{"ast":null,"code":"import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useCallback, useLayoutEffect, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport compute from 'compute-scroll-into-view';\nimport { __assign } from 'tslib';\nvar idCounter = 0;\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\n\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\n\nfunction noop() {}\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\n\n\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n\n  var actions = compute(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @param {Window} environment The window context where downshift renders.\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\n\n\nfunction isOrContainsNode(parent, child, environment) {\n  var result = parent === child || child instanceof environment.Node && parent.contains && parent.contains(child);\n  return result;\n}\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\n\n\nfunction debounce(fn, time) {\n  var timeoutId;\n\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\n\n\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\n\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\n\n\nfunction generateId() {\n  return String(idCounter++);\n}\n/**\n * Resets idCounter to 0. Used for SSR.\n */\n\n\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specify if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\n\nfunction getA11yStatusMessage$1(_ref2) {\n  var isOpen = _ref2.isOpen,\n      resultCount = _ref2.resultCount,\n      previousResultCount = _ref2.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n\n  return '';\n}\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\n\n\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ?\n  /* istanbul ignore next (preact) */\n  arg[0] : arg;\n\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\n\n\nfunction isDOMElement(element) {\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\n\n\nfunction getElementProps(element) {\n  return element.props;\n}\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\n\n\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\n\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\n\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\n\n\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\n\n\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\n\n\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n      keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n\n  return key;\n}\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\n\n\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\n\n\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n\n  if (itemCount === 0) {\n    return -1;\n  }\n\n  var itemsLastIndex = itemCount - 1;\n\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n\n  var newIndex = baseIndex + moveAmount;\n\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n\n  return nonDisabledNewIndex;\n}\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\n\n\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n\n  return -1;\n}\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Window} environment The window context where downshift renders.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\n\n\nfunction targetWithinDownshift(target, downshiftElements, environment, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target, environment) || checkActiveElement && isOrContainsNode(contextNode, environment.document.activeElement, environment));\n  });\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\n\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\n\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n\n  if (!status) {\n    return;\n  }\n\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\n\n\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n\n  if (statusDiv) {\n    return statusDiv;\n  }\n\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\nvar _excluded$4 = [\"refKey\", \"ref\"],\n    _excluded2$3 = [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"],\n    _excluded3$2 = [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"],\n    _excluded4$1 = [\"refKey\", \"ref\"],\n    _excluded5 = [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"];\n\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n\n    function Downshift(_props) {\n      var _this;\n\n      _this = _Component.call(this, _props) || this; // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n\n      _this.input = null;\n      _this.items = []; // itemCount can be changed asynchronously\n      // from within downshift (so it can't come from a prop)\n      // this is why we store it as an instance and use\n      // getItemCount rather than just use items.length\n      // (to support windowing + async)\n\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n      /**\n       * @param {Function} fn the function to call after the time\n       * @param {Number} time the time to wait\n       */\n\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n\n        _this.timeoutIds.push(id);\n      };\n\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n\n        if (item == null) {\n          return;\n        }\n\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      }; // any piece of our state can live in two places:\n      // 1. Uncontrolled: it's internal (this.state)\n      //    We will call this.setState to update that state\n      // 2. Controlled: it's external (this.props)\n      //    We will call this.props.onStateChange to update that state\n      //\n      // In addition, we'll call this.props.onChange if the\n      // selectedItem is changed.\n\n\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function'; // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet; // Your own function that could modify the state that will be set.\n\n          newStateToSet = _this.props.stateReducer(state, newStateToSet); // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem'); // this keeps track of the object we want to call with setState\n\n          var nextState = {}; // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            } // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n\n\n            if (key === 'type') {\n              return;\n            }\n\n            newStateToSet[key]; // if it's coming from props, then we don't care to set it internally\n\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          }); // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)(); // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          } // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n\n\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      }; //////////////////////////// ROOT\n\n\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n\n        var _ref = _temp === void 0 ? {} : _temp,\n            _ref$refKey = _ref.refKey,\n            refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n            ref = _ref.ref,\n            rest = _objectWithoutPropertiesLoose(_ref, _excluded$4);\n\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n            _ref2$suppressRefErro = _ref2.suppressRefError,\n            suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro; // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n\n\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n\n        var _this$getState = _this.getState(),\n            isOpen = _this$getState.isOpen;\n\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n\n\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                    highlightedIndex = _this2$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n\n          event.preventDefault();\n\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                    highlightedIndex = _this3$getState.highlightedIndex;\n\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n\n          var _this$getState2 = this.getState(),\n              isOpen = _this$getState2.isOpen,\n              highlightedIndex = _this$getState2.highlightedIndex;\n\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      }; //////////////////////////// BUTTON\n\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n\n          var _this$getState3 = this.getState(),\n              isOpen = _this$getState3.isOpen;\n\n          if (!isOpen) {\n            return;\n          }\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting downwards from 0 if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n\n          var _this$getState4 = this.getState(),\n              isOpen = _this$getState4.isOpen;\n\n          if (!isOpen) {\n            return;\n          }\n\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          } // get next non-disabled starting upwards from last index if that's disabled.\n\n\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n            onClick = _ref3.onClick;\n\n        _ref3.onPress;\n\n        var onKeyDown = _ref3.onKeyDown,\n            onKeyUp = _ref3.onKeyUp,\n            onBlur = _ref3.onBlur,\n            rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$3);\n\n        var _this$getState5 = _this.getState(),\n            isOpen = _this$getState5.isOpen;\n\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault(); // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n\n        /* istanbul ignore if (can't reasonably test this) */\n\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        } // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n\n\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n      /////////////////////////////// LABEL\n\n\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n      /////////////////////////////// INPUT\n\n\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n            onKeyDown = _ref4.onKeyDown,\n            onBlur = _ref4.onBlur,\n            onChange = _ref4.onChange,\n            onInput = _ref4.onInput;\n\n        _ref4.onChangeText;\n\n        var rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$2);\n\n        var onChangeKey;\n        var eventHandlers = {};\n        /* istanbul ignore next (preact) */\n\n        {\n          onChangeKey = 'onChange';\n        }\n\n        var _this$getState6 = _this.getState(),\n            inputValue = _this$getState6.inputValue,\n            isOpen = _this$getState6.isOpen,\n            highlightedIndex = _this$getState6.highlightedIndex;\n\n        if (!rest.disabled) {\n          var _eventHandlers;\n\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': rest && rest['aria-label'] ? undefined : _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n      /////////////////////////////// MENU\n\n\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n            _ref5$refKey = _ref5.refKey,\n            refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n            ref = _ref5.ref,\n            props = _objectWithoutPropertiesLoose(_ref5, _excluded4$1);\n\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n            _ref6$suppressRefErro = _ref6.suppressRefError,\n            suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ MENU\n      /////////////////////////////// ITEM\n\n\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n            onMouseMove = _ref7.onMouseMove,\n            onMouseDown = _ref7.onMouseDown,\n            onClick = _ref7.onClick;\n\n        _ref7.onPress;\n\n        var index = _ref7.index,\n            _ref7$item = _ref7.item,\n            item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ?\n        /* istanbul ignore next */\n        undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n            rest = _objectWithoutPropertiesLoose(_ref7, _excluded5);\n\n        if (index === undefined) {\n          _this.items.push(item);\n\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            }); // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n\n\n            _this.avoidScrolling = true;\n\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers); // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      }; //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n\n\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n\n        otherStateToSet = pickState(otherStateToSet);\n\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n              isOpen = _this$getState7.isOpen,\n              highlightedIndex = _this$getState7.highlightedIndex;\n\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n\n          cbToCb(cb)();\n        });\n      };\n\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n\n        var item = _this.items[state.highlightedIndex];\n\n        var resultCount = _this.getItemCount();\n\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n\n      var _this$props = _this.props,\n          defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n          _this$props$initialHi = _this$props.initialHighlightedIndex,\n          _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n          defaultIsOpen = _this$props.defaultIsOpen,\n          _this$props$initialIs = _this$props.initialIsOpen,\n          _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n          _this$props$initialIn = _this$props.initialInputValue,\n          _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n          _this$props$initialSe = _this$props.initialSelectedItem,\n          _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n\n      _this.state = _state;\n      return _this;\n    }\n\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */\n    ;\n\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n\n      return getState(stateToMerge, this.props);\n    };\n\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n\n      return itemCount;\n    };\n\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n\n      var itemCount = this.getItemCount();\n\n      var _this$getState8 = this.getState(),\n          highlightedIndex = _this$getState8.highlightedIndex;\n\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n          highlightedIndex = _this$getState9.highlightedIndex,\n          inputValue = _this$getState9.inputValue,\n          selectedItem = _this$getState9.selectedItem,\n          isOpen = _this$getState9.isOpen;\n\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n          getToggleButtonProps = this.getToggleButtonProps,\n          getLabelProps = this.getLabelProps,\n          getMenuProps = this.getMenuProps,\n          getInputProps = this.getInputProps,\n          getItemProps = this.getItemProps,\n          openMenu = this.openMenu,\n          closeMenu = this.closeMenu,\n          toggleMenu = this.toggleMenu,\n          selectItem = this.selectItem,\n          selectItemAtIndex = this.selectItemAtIndex,\n          selectHighlightedItem = this.selectHighlightedItem,\n          setHighlightedIndex = this.setHighlightedIndex,\n          clearSelection = this.clearSelection,\n          clearItems = this.clearItems,\n          reset = this.reset,\n          setItemCount = this.setItemCount,\n          unsetItemCount = this.unsetItemCount,\n          setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n      /* istanbul ignore if (react-native) */\n\n\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n      /* istanbul ignore if (react-native) */\n\n\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this7.isMouseDown = true;\n        };\n\n        var onMouseUp = function onMouseUp(event) {\n          _this7.isMouseDown = false; // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment);\n\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        }; // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n\n\n        var onTouchStart = function onTouchStart() {\n          _this7.isTouchMove = false;\n        };\n\n        var onTouchMove = function onTouchMove() {\n          _this7.isTouchMove = true;\n        };\n\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment, false);\n\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n\n          _this7.updateStatus.cancel();\n\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n          currentHighlightedIndex = _ref10.highlightedIndex;\n\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n          prevHighlightedIndex = _ref11.highlightedIndex;\n\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n      /* istanbul ignore else (react-native) */\n\n\n      {\n        this.updateStatus();\n      }\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop); // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n\n      this.clearItems(); // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined; // we do something similar for getMenuProps\n\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined; // we do something similar for getLabelProps\n\n      this.getLabelProps.called = false; // and something similar for getInputProps\n\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n\n      if (!element) {\n        return null;\n      }\n\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n      /* istanbul ignore else */\n\n\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n      /* istanbul ignore next */\n\n\n      return undefined;\n    };\n\n    return Downshift;\n  }(Component);\n\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage$1,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment:\n    /* istanbul ignore next (ssr) */\n    typeof window === 'undefined' ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\n\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n\n} : void 0;\nvar Downshift$1 = Downshift;\n\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\n\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar _excluded$3 = [\"isInitialMount\", \"highlightedIndex\", \"items\", \"environment\"];\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\n\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\n\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n      type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\n\n\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n/**\n * Debounced call for updating the a11y message.\n */\n\n\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200); // istanbul ignore next\n\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\n\nfunction useElementIds(_ref) {\n  var _ref$id = _ref.id,\n      id = _ref$id === void 0 ? \"downshift-\" + generateId() : _ref$id,\n      labelId = _ref.labelId,\n      menuId = _ref.menuId,\n      getItemId = _ref.getItemId,\n      toggleButtonId = _ref.toggleButtonId,\n      inputId = _ref.inputId;\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n}\n\nfunction getItemAndIndex(itemProp, indexProp, items, errorMessage) {\n  var item, index;\n\n  if (itemProp === undefined) {\n    if (indexProp === undefined) {\n      throw new Error(errorMessage);\n    }\n\n    item = items[indexProp];\n    index = indexProp;\n  } else {\n    index = indexProp === undefined ? items.indexOf(itemProp) : indexProp;\n    item = itemProp;\n  }\n\n  return [item, index];\n}\n\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\n\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\n\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\n\nfunction useLatestRef(val) {\n  var ref = useRef(val); // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n\n  ref.current = val;\n  return ref;\n}\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n\n  var _useReducer = useReducer(enhancedReducer, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\n\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1];\n\n  return [getState(state, props), dispatch];\n}\n\nvar defaultProps$3 = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  environment:\n  /* istanbul ignore next (ssr) */\n  typeof window === 'undefined' ? {} : window\n};\n\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var defaultValue = props[\"default\" + capitalizeString(propKey)];\n\n  if (defaultValue !== undefined) {\n    return defaultValue;\n  }\n\n  return defaultStateValues[propKey];\n}\n\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n\n  var value = props[propKey];\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  var initialValue = props[\"initial\" + capitalizeString(propKey)];\n\n  if (initialValue !== undefined) {\n    return initialValue;\n  }\n\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n      initialHighlightedIndex = props.initialHighlightedIndex,\n      defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n      highlightedIndex = state.highlightedIndex;\n\n  if (items.length === 0) {\n    return -1;\n  } // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n\n\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n\n  if (selectedItem) {\n    return items.indexOf(selectedItem);\n  }\n\n  if (offset === 0) {\n    return -1;\n  }\n\n  return offset < 0 ? items.length - 1 : 0;\n}\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\n\n\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    if ((environment == null ? void 0 : environment.addEventListener) == null) {\n      return;\n    } // The same strategy for checking if a click occurred inside or outside downshift\n    // as in downshift.js.\n\n\n    var onMouseDown = function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n\n    var onMouseUp = function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment)) {\n        handleBlur();\n      }\n    };\n\n    var onTouchStart = function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n\n    var onTouchMove = function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n\n    var onTouchEnd = function onTouchEnd(event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment, false)) {\n        handleBlur();\n      }\n    };\n\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd); // eslint-disable-next-line consistent-return\n\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\n\n\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n\n/* istanbul ignore next */\n\n\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    var isInitialMountRef = useRef(true);\n\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n\n        if (isInitialMountRef.current) {\n          if (!Object.keys(propCallInfo).length) {\n            // eslint-disable-next-line no-console\n            console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n            return;\n          }\n        }\n\n        var suppressRefError = propCallInfo.suppressRefError,\n            refKey = propCallInfo.refKey,\n            elementRef = propCallInfo.elementRef;\n\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n      isInitialMountRef.current = false;\n    });\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\n\nfunction useA11yMessageSetter(getA11yMessage, dependencyArray, _ref2) {\n  var isInitialMount = _ref2.isInitialMount,\n      highlightedIndex = _ref2.highlightedIndex,\n      items = _ref2.items,\n      environment = _ref2.environment,\n      rest = _objectWithoutPropertiesLoose(_ref2, _excluded$3); // Sets a11y status message on changes in state.\n\n\n  useEffect(function () {\n    if (isInitialMount || false) {\n      return;\n    }\n\n    updateA11yStatus(function () {\n      return getA11yMessage(_extends({\n        highlightedIndex: highlightedIndex,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length\n      }, rest));\n    }, environment.document); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n}\n\nfunction useScrollIntoView(_ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n      isOpen = _ref3.isOpen,\n      itemRefs = _ref3.itemRefs,\n      getItemNodeFromIndex = _ref3.getItemNodeFromIndex,\n      menuElement = _ref3.menuElement,\n      scrollIntoViewProp = _ref3.scrollIntoView; // used not to scroll on highlight by mouse.\n\n  var shouldScrollRef = useRef(true); // Scroll on highlighted item if change comes from keyboard.\n\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref4) {\n    var isInitialMount = _ref4.isInitialMount,\n        props = _ref4.props,\n        state = _ref4.state; // used for checking when props are moving from controlled to uncontrolled.\n\n    var prevPropsRef = useRef(props);\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n/**\n * Handles selection on Enter / Alt + ArrowUp. Closes the menu and resets the highlighted index, unless there is a highlighted.\n * In that case, selects the item and resets to defaults for open state and highlighted idex.\n * @param {Object} props The useCombobox props.\n * @param {number} highlightedIndex The index from the state.\n * @param {boolean} inputValue Also return the input value for state.\n * @returns The changes for the state.\n */\n\n\nfunction getChangesOnSelection(props, highlightedIndex, inputValue) {\n  var _props$items;\n\n  if (inputValue === void 0) {\n    inputValue = true;\n  }\n\n  var shouldSelect = ((_props$items = props.items) == null ? void 0 : _props$items.length) && highlightedIndex >= 0;\n  return _extends({\n    isOpen: false,\n    highlightedIndex: -1\n  }, shouldSelect && _extends({\n    selectedItem: props.items[highlightedIndex],\n    isOpen: getDefaultValue$1(props, 'isOpen'),\n    highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n  }, inputValue && {\n    inputValue: props.itemToString(props.items[highlightedIndex])\n  }));\n}\n\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n      props = action.props;\n  var changes;\n\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.disabled ? -1 : action.index\n      };\n      break;\n\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nfunction getItemIndexByCharacterKey(_a) {\n  var keysSoFar = _a.keysSoFar,\n      highlightedIndex = _a.highlightedIndex,\n      items = _a.items,\n      itemToString = _a.itemToString,\n      getItemNodeFromIndex = _a.getItemNodeFromIndex;\n  var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n\n  for (var index = 0; index < items.length; index++) {\n    // if we already have a search query in progress, we also consider the current highlighted item.\n    var offsetIndex = (index + highlightedIndex + (keysSoFar.length < 2 ? 1 : 0)) % items.length;\n    var item = items[offsetIndex];\n\n    if (item !== undefined && itemToString(item).toLowerCase().startsWith(lowerCasedKeysSoFar)) {\n      var element = getItemNodeFromIndex(offsetIndex);\n\n      if (!(element === null || element === void 0 ? void 0 : element.hasAttribute('disabled'))) {\n        return offsetIndex;\n      }\n    }\n  }\n\n  return highlightedIndex;\n}\n\nvar propTypes$2 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\n\nfunction getA11yStatusMessage(_a) {\n  var isOpen = _a.isOpen,\n      resultCount = _a.resultCount,\n      previousResultCount = _a.previousResultCount;\n\n  if (!isOpen) {\n    return '';\n  }\n\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n\n  if (resultCount !== previousResultCount) {\n    return \"\".concat(resultCount, \" result\").concat(resultCount === 1 ? ' is' : 's are', \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\");\n  }\n\n  return '';\n}\n\nvar defaultProps$2 = __assign(__assign({}, defaultProps$3), {\n  getA11yStatusMessage: getA11yStatusMessage\n}); // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$2 = function (options, caller) {\n    PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n  };\n}\n\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 0;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 1;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 2;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 3;\nvar ToggleButtonKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_escape__' : 4;\nvar ToggleButtonKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_home__' : 5;\nvar ToggleButtonKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_end__' : 6;\nvar ToggleButtonKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_enter__' : 7;\nvar ToggleButtonKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_space_button__' : 8;\nvar ToggleButtonKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_up__' : 9;\nvar ToggleButtonKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_down__' : 10;\nvar ToggleButtonBlur = process.env.NODE_ENV !== \"production\" ? '__togglebutton_blur__' : 11;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 12;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 13;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 14;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownEscape: ToggleButtonKeyDownEscape,\n  ToggleButtonKeyDownHome: ToggleButtonKeyDownHome,\n  ToggleButtonKeyDownEnd: ToggleButtonKeyDownEnd,\n  ToggleButtonKeyDownEnter: ToggleButtonKeyDownEnter,\n  ToggleButtonKeyDownSpaceButton: ToggleButtonKeyDownSpaceButton,\n  ToggleButtonKeyDownPageUp: ToggleButtonKeyDownPageUp,\n  ToggleButtonKeyDownPageDown: ToggleButtonKeyDownPageDown,\n  ToggleButtonBlur: ToggleButtonBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$2\n});\n/* eslint-disable complexity */\n\nfunction downshiftSelectReducer(state, action) {\n  var _props$items;\n\n  var type = action.type,\n      props = action.props,\n      altKey = action.altKey;\n  var changes;\n\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var prevHighlightedIndex = !state.isOpen && state.selectedItem ? props.items.indexOf(state.selectedItem) : state.highlightedIndex;\n        var highlightedIndex = getItemIndexByCharacterKey({\n          keysSoFar: inputValue,\n          highlightedIndex: prevHighlightedIndex,\n          items: props.items,\n          itemToString: props.itemToString,\n          getItemNodeFromIndex: action.getItemNodeFromIndex\n        });\n        changes = {\n          inputValue: inputValue,\n          highlightedIndex: highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowDown:\n      {\n        var _highlightedIndex = state.isOpen ? getNextWrappingIndex(1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false) : altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1);\n\n        changes = {\n          highlightedIndex: _highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n\n    case ToggleButtonKeyDownArrowUp:\n      if (state.isOpen && altKey) {\n        changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      } else {\n        var _highlightedIndex2 = state.isOpen ? getNextWrappingIndex(-1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false) : getHighlightedIndexOnOpen(props, state, -1);\n\n        changes = {\n          highlightedIndex: _highlightedIndex2,\n          isOpen: true\n        };\n      }\n\n      break;\n    // only triggered when menu is open.\n\n    case ToggleButtonKeyDownEnter:\n    case ToggleButtonKeyDownSpaceButton:\n      changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      break;\n\n    case ToggleButtonKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false),\n        isOpen: true\n      };\n      break;\n\n    case ToggleButtonKeyDownPageUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(-10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case ToggleButtonKeyDownPageDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case ToggleButtonKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n\n    case ToggleButtonBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nvar _excluded$2 = [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"],\n    _excluded2$2 = [\"onBlur\", \"onClick\", \"onPress\", \"onKeyDown\", \"refKey\", \"ref\"],\n    _excluded3$1 = [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"onPress\", \"refKey\", \"ref\", \"disabled\"];\nuseSelect.stateChangeTypes = stateChangeTypes$2;\n\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes$2(userProps, useSelect); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps$2, userProps);\n\n  var items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      itemToString = props.itemToString,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      getA11yStatusMessage = props.getA11yStatusMessage; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$2(props);\n\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element efs.\n\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({}); // used to keep the inputValue clearTimeout object between renders.\n\n  var clearTimeoutRef = useRef(null); // prevent id re-generation between renders.\n\n  var elementIds = useElementIds(props); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Some utils.\n\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]); // Effects.\n  // Sets a11y status message on changes in state.\n\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Sets a11y status message on changes in selectedItem.\n\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Scroll on highlighted item if change comes from keyboard.\n\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  }); // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500); // Cancel any pending debounced calls on mount\n\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []); // Invokes the keysSoFar callback set up above.\n\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  }); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: ToggleButtonBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []); // Reset itemRefs on close.\n\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]); // Event handler functions.\n\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        if (latest.current.state.isOpen) {\n          dispatch({\n            type: ToggleButtonKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: latest.current.state.isOpen ? ToggleButtonKeyDownEnter : ToggleButtonClick$1\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageUp,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageDown,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        var currentState = latest.current.state;\n\n        if (!currentState.isOpen) {\n          dispatch({\n            type: ToggleButtonClick$1\n          });\n          return;\n        }\n\n        if (currentState.inputValue) {\n          dispatch({\n            type: ToggleButtonKeyDownCharacter,\n            key: ' ',\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        } else {\n          dispatch({\n            type: ToggleButtonKeyDownSpaceButton\n          });\n        }\n      }\n    };\n  }, [dispatch, getItemNodeFromIndex, latest]); // Action functions.\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]); // Getter functions.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey;\n\n    _ref.onKeyDown;\n    _ref.onBlur;\n\n    var ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        onBlur = _ref3.onBlur,\n        onClick = _ref3.onClick;\n\n    _ref3.onPress;\n\n    var onKeyDown = _ref3.onKeyDown,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$2);\n\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n        _ref4$suppressRefErro = _ref4.suppressRefError,\n        suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n\n    var latestState = latest.current.state;\n\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n\n    var toggleButtonHandleBlur = function toggleButtonHandleBlur() {\n      if (latestState.isOpen && !mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: ToggleButtonBlur\n        });\n      }\n    };\n\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends3['aria-controls'] = elementIds.menuId, _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends3.id = elementIds.toggleButtonId, _extends3.role = 'combobox', _extends3.tabIndex = 0, _extends3.onBlur = callAllEventHandlers(onBlur, toggleButtonHandleBlur), _extends3), rest);\n\n    if (!rest.disabled) {\n      /* istanbul ignore if (react-native) */\n      {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n    }\n\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [latest, elementIds, setGetterPropCallInfo, dispatch, mouseAndTouchTrackersRef, toggleButtonKeyDownHandlers, getItemNodeFromIndex]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n        itemProp = _ref5.item,\n        indexProp = _ref5.index,\n        onMouseMove = _ref5.onMouseMove,\n        onClick = _ref5.onClick;\n\n    _ref5.onPress;\n\n    var _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        disabled = _ref5.disabled,\n        rest = _objectWithoutPropertiesLoose(_ref5, _excluded3$1);\n\n    var _latest$current = latest.current,\n        latestState = _latest$current.state,\n        latestProps = _latest$current.props;\n\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n        item = _getItemAndIndex[0],\n        index = _getItemAndIndex[1];\n\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index,\n        disabled: disabled\n      });\n    };\n\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n\n    var itemProps = _extends((_extends4 = {\n      disabled: disabled,\n      role: 'option',\n      'aria-selected': \"\" + (item === selectedItem),\n      id: elementIds.getItemId(index)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends4), rest);\n\n    if (!disabled) {\n      /* istanbul ignore next (react-native) */\n      {\n        itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n      }\n    }\n\n    itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n    return itemProps;\n  }, [latest, selectedItem, elementIds, shouldScrollRef, dispatch]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_up__' : 5;\nvar InputKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_down__' : 6;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 7;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 8;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 9;\nvar InputFocus = process.env.NODE_ENV !== \"production\" ? '__input_focus__' : 10;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 11;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 12;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 22;\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownPageUp: InputKeyDownPageUp,\n  InputKeyDownPageDown: InputKeyDownPageDown,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  InputFocus: InputFocus,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\n\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\n\nfunction useControlledReducer(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n      state = _useEnhancedReducer[0],\n      dispatch = _useEnhancedReducer[1]; // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n\n\n  useEffect(function () {\n    if (!isControlledProp(props, 'selectedItem')) {\n      return;\n    }\n\n    if (props.selectedItemChanged(previousSelectedItemRef.current, props.selectedItem)) {\n      dispatch({\n        type: ControlledPropUpdatedSelectedItem,\n        inputValue: props.itemToString(props.selectedItem)\n      });\n    }\n\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.selectedItem, props.selectedItem]);\n  return [getState(state, props), dispatch];\n} // eslint-disable-next-line import/no-mutable-exports\n\n\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\n\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n/* eslint-disable complexity */\n\n\nfunction downshiftUseComboboxReducer(state, action) {\n  var _props$items;\n\n  var type = action.type,\n      props = action.props,\n      altKey = action.altKey;\n  var changes;\n\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, true)\n        };\n      } else {\n        changes = {\n          highlightedIndex: altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n\n      break;\n\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        if (altKey) {\n          changes = getChangesOnSelection(props, state.highlightedIndex);\n        } else {\n          changes = {\n            highlightedIndex: getNextWrappingIndex(-1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, true)\n          };\n        }\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n\n      break;\n\n    case InputKeyDownEnter:\n      changes = getChangesOnSelection(props, state.highlightedIndex);\n      break;\n\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n\n    case InputKeyDownPageUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(-10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownPageDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n\n    case InputFocus:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\n\nvar _excluded$1 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n    _excluded2$1 = [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"disabled\"],\n    _excluded3 = [\"onClick\", \"onPress\", \"refKey\", \"ref\"],\n    _excluded4 = [\"onKeyDown\", \"onChange\", \"onInput\", \"onFocus\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"];\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\n\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes$1(userProps, useCombobox); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps$1, userProps);\n\n  var initialIsOpen = props.initialIsOpen,\n      defaultIsOpen = props.defaultIsOpen,\n      items = props.items,\n      scrollIntoView = props.scrollIntoView,\n      environment = props.environment,\n      getA11yStatusMessage = props.getA11yStatusMessage,\n      getA11ySelectionMessage = props.getA11ySelectionMessage,\n      itemToString = props.itemToString; // Initial state depending on controlled props.\n\n  var initialState = getInitialState$1(props);\n\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, initialState, props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var isOpen = state.isOpen,\n      highlightedIndex = state.highlightedIndex,\n      selectedItem = state.selectedItem,\n      inputValue = state.inputValue; // Element refs.\n\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var isInitialMountRef = useRef(true); // prevent id re-generation between renders.\n\n  var elementIds = useElementIds(props); // used to keep track of how many items we had on previous cycle.\n\n  var previousResultCountRef = useRef(); // utility callback to get item element.\n\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]); // Effects.\n  // Sets a11y status message on changes in state.\n\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Sets a11y status message on changes in selectedItem.\n\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state)); // Scroll on highlighted item if change comes from keyboard.\n\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  }); // Focus the input on first render if required.\n\n  useEffect(function () {\n    var focusOnOpen = initialIsOpen || defaultIsOpen || isOpen;\n\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    previousResultCountRef.current = items.length;\n  }); // Add mouse/touch events to document.\n\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [inputRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur,\n      selectItem: false\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getMenuProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []); // Reset itemRefs on close.\n\n  useEffect(function () {\n    var _environment$document;\n\n    if (!isOpen) {\n      itemRefs.current = {};\n    } else if (((_environment$document = environment.document) == null ? void 0 : _environment$document.activeElement) !== inputRef.current) {\n      var _inputRef$current;\n\n      inputRef == null || (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.focus();\n    }\n  }, [isOpen, environment]);\n  /* Event handler functions */\n\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          altKey: event.altKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          altKey: event.altKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape(event) {\n        var latestState = latest.current.state;\n\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state; // if closed or no highlighted index, do nothing.\n\n        if (!latestState.isOpen || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n          return;\n        }\n\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageUp,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageDown,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }\n    };\n  }, [dispatch, latest, getItemNodeFromIndex]); // Getter props.\n\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n\n    var _ref = _temp === void 0 ? {} : _temp,\n        onMouseLeave = _ref.onMouseLeave,\n        _ref$refKey = _ref.refKey,\n        refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n        ref = _ref.ref,\n        rest = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n        _ref2$suppressRefErro = _ref2.suppressRefError,\n        suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n        itemProp = _ref3.item,\n        indexProp = _ref3.index,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onMouseMove = _ref3.onMouseMove,\n        onMouseDown = _ref3.onMouseDown,\n        onClick = _ref3.onClick;\n\n    _ref3.onPress;\n\n    var disabled = _ref3.disabled,\n        rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$1);\n\n    var _latest$current = latest.current,\n        latestProps = _latest$current.props,\n        latestState = _latest$current.state;\n\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n        index = _getItemAndIndex[1];\n\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index,\n        disabled: disabled\n      });\n    };\n\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    };\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends3.disabled = disabled, _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (index === latestState.highlightedIndex), _extends3.id = elementIds.getItemId(index), _extends3), !disabled && (_ref4 = {}, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove),\n      onMouseDown: callAllEventHandlers(onMouseDown, itemHandleMouseDown)\n    }, rest);\n  }, [dispatch, latest, shouldScrollRef, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n        onClick = _ref5.onClick;\n\n    _ref5.onPress;\n\n    var _ref5$refKey = _ref5.refKey,\n        refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n        ref = _ref5.ref,\n        rest = _objectWithoutPropertiesLoose(_ref5, _excluded3);\n\n    var latestState = latest.current.state;\n\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4['aria-controls'] = elementIds.menuId, _extends4['aria-expanded'] = latestState.isOpen, _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n        onKeyDown = _ref6.onKeyDown,\n        onChange = _ref6.onChange,\n        onInput = _ref6.onInput,\n        onFocus = _ref6.onFocus,\n        onBlur = _ref6.onBlur;\n\n    _ref6.onChangeText;\n\n    var _ref6$refKey = _ref6.refKey,\n        refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n        ref = _ref6.ref,\n        rest = _objectWithoutPropertiesLoose(_ref6, _excluded4);\n\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n        _ref7$suppressRefErro = _ref7.suppressRefError,\n        suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n\n    var inputHandleBlur = function inputHandleBlur(event) {\n      /* istanbul ignore else */\n      if (latestState.isOpen && !mouseAndTouchTrackersRef.current.isMouseDown) {\n        var isBlurByTabChange = event.relatedTarget === null && environment.document.activeElement !== environment.document.body;\n        dispatch({\n          type: InputBlur,\n          selectItem: !isBlurByTabChange\n        });\n      }\n    };\n\n    var inputHandleFocus = function inputHandleFocus() {\n      if (!latestState.isOpen) {\n        dispatch({\n          type: InputFocus\n        });\n      }\n    };\n    /* istanbul ignore next (preact) */\n\n\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n\n    if (!rest.disabled) {\n      var _eventHandlers;\n\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers.onFocus = callAllEventHandlers(onFocus, inputHandleFocus), _eventHandlers);\n    }\n\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5['aria-expanded'] = latestState.isOpen, _extends5['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends5.autoComplete = 'off', _extends5.id = elementIds.inputId, _extends5.role = 'combobox', _extends5.value = latestState.inputValue, _extends5), eventHandlers, rest);\n  }, [setGetterPropCallInfo, latest, elementIds, inputKeyDownHandlers, dispatch, mouseAndTouchTrackersRef, environment]); // returns\n\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\n\n\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\n\n\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\n\n\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n\n  var element = event.target;\n\n  if (element instanceof HTMLInputElement && // if element is a text input\n  element.value !== '' && ( // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n\n  return true;\n}\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\n\n\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n      itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\n\nvar propTypes = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps = {\n  itemToString: defaultProps$3.itemToString,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n}; // eslint-disable-next-line import/no-mutable-exports\n\nvar validatePropTypes = noop;\n/* istanbul ignore next */\n\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset\n});\n/* eslint-disable complexity */\n\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n      index = action.index,\n      props = action.props,\n      selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems;\n  var changes;\n\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        if (activeIndex < 0) {\n          break;\n        }\n\n        var newActiveIndex = activeIndex;\n\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n\n        if (selectedItemIndex < 0) {\n          break;\n        }\n\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n\n        changes = {\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1)),\n          activeIndex: _newActiveIndex\n        };\n        break;\n      }\n\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n\n  return _extends({}, state, changes);\n}\n\nvar _excluded = [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"],\n    _excluded2 = [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"];\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\n\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n\n  validatePropTypes(userProps, useMultipleSelection); // Props defaults and destructuring.\n\n  var props = _extends({}, defaultProps, userProps);\n\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n      itemToString = props.itemToString,\n      environment = props.environment,\n      keyNavigationNext = props.keyNavigationNext,\n      keyNavigationPrevious = props.keyNavigationPrevious; // Reducer init.\n\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, getInitialState(props), props),\n      state = _useControlledReducer[0],\n      dispatch = _useControlledReducer[1];\n\n  var activeIndex = state.activeIndex,\n      selectedItems = state.selectedItems; // Refs.\n\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  }); // Effects.\n\n  /* Sets a11y status message on changes in selectedItem. */\n\n  useEffect(function () {\n    if (isInitialMountRef.current || false) {\n      return;\n    }\n\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n\n    previousSelectedItemsRef.current = selectedItems; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]); // Sets focus on active item.\n\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps'); // Make initial ref false.\n\n  useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []); // Event handler functions.\n\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]); // Getter props.\n\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n\n    var _ref3 = _temp === void 0 ? {} : _temp,\n        _ref3$refKey = _ref3.refKey,\n        refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n        ref = _ref3.ref,\n        onClick = _ref3.onClick,\n        onKeyDown = _ref3.onKeyDown,\n        selectedItemProp = _ref3.selectedItem,\n        indexProp = _ref3.index,\n        rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n    var latestState = latest.current.state;\n\n    var _getItemAndIndex = getItemAndIndex(selectedItemProp, indexProp, latestState.selectedItems, 'Pass either item or index to getSelectedItemProps!'),\n        index = _getItemAndIndex[1];\n\n    var isFocusable = index > -1 && index === latestState.activeIndex;\n\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = isFocusable ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n        _ref4$refKey = _ref4.refKey,\n        refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n        ref = _ref4.ref,\n        onKeyDown = _ref4.onKeyDown,\n        onClick = _ref4.onClick,\n        _ref4$preventKeyActio = _ref4.preventKeyAction,\n        preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n        rest = _objectWithoutPropertiesLoose(_ref4, _excluded2);\n\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n        _ref5$suppressRefErro = _ref5.suppressRefError,\n        suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]); // returns\n\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport { Downshift$1 as default, resetIdCounter, useCombobox, useMultipleSelection, useSelect };","map":{"version":3,"names":["_objectWithoutPropertiesLoose","_extends","_assertThisInitialized","_inheritsLoose","PropTypes","cloneElement","Component","useRef","useEffect","useCallback","useLayoutEffect","useReducer","useMemo","isForwardRef","compute","__assign","idCounter","cbToCb","cb","noop","scrollIntoView","node","menuNode","actions","boundary","block","scrollMode","forEach","_ref","el","top","left","scrollTop","scrollLeft","isOrContainsNode","parent","child","environment","result","Node","contains","debounce","fn","time","timeoutId","cancel","clearTimeout","wrapper","_len","arguments","length","args","Array","_key","setTimeout","apply","callAllEventHandlers","_len2","fns","_key2","event","_len3","_key3","some","concat","preventDownshiftDefault","hasOwnProperty","nativeEvent","handleRefs","_len4","refs","_key4","ref","current","generateId","String","resetIdCounter","getA11yStatusMessage$1","_ref2","isOpen","resultCount","previousResultCount","unwrapArray","arg","defaultValue","isArray","isDOMElement","element","type","getElementProps","props","requiredProp","fnName","propName","console","error","stateKeys","pickState","state","k","getState","Object","keys","reduce","prevState","key","isControlledProp","undefined","normalizeArrowKey","keyCode","indexOf","isPlainObject","obj","prototype","toString","call","getNextWrappingIndex","moveAmount","baseIndex","itemCount","getItemNodeFromIndex","circular","itemsLastIndex","newIndex","nonDisabledNewIndex","getNextNonDisabledIndex","currentElementNode","hasAttribute","index","_index","targetWithinDownshift","target","downshiftElements","checkActiveElement","contextNode","document","activeElement","validateControlledUnchanged","process","env","NODE_ENV","prevProps","nextProps","warningDescription","propKey","cleanupStatus","documentProp","getStatusDiv","textContent","setStatus","status","div","statusDiv","getElementById","createElement","setAttribute","assign","style","border","clip","height","margin","overflow","padding","position","width","body","appendChild","unknown","mouseUp","itemMouseEnter","keyDownArrowUp","keyDownArrowDown","keyDownEscape","keyDownEnter","keyDownHome","keyDownEnd","clickItem","blurInput","changeInput","keyDownSpaceButton","clickButton","blurButton","controlledPropUpdatedSelectedItem","touchEnd","stateChangeTypes$3","freeze","__proto__","_excluded$4","_excluded2$3","_excluded3$2","_excluded4$1","_excluded5","Downshift","_Component","_props","_this","id","menuId","labelId","inputId","getItemId","input","items","timeoutIds","internalSetTimeout","filter","i","push","setItemCount","count","unsetItemCount","setHighlightedIndex","highlightedIndex","otherStateToSet","defaultHighlightedIndex","internalSetState","clearSelection","selectedItem","inputValue","defaultIsOpen","selectItem","item","itemToString","selectItemAtIndex","itemIndex","selectHighlightedItem","stateToSet","isItemSelected","onChangeArg","onStateChangeArg","isStateToSetFunction","onInputValueChange","getStateAndHelpers","setState","newStateToSet","stateReducer","nextState","hasMoreStateThanType","onStateChange","onSelect","onChange","onUserAction","rootRef","_rootNode","getRootProps","_temp","_temp2","_extends2","_ref$refKey","refKey","rest","_ref2$suppressRefErro","suppressRefError","called","_this$getState","role","keyDownHandlers","ArrowDown","_this2","preventDefault","amount","shiftKey","moveHighlightedIndex","getItemCount","_this2$getState","nextHighlightedIndex","ArrowUp","_this3","_this3$getState","Enter","which","_this$getState2","itemNode","Escape","reset","buttonKeyDownHandlers","_","toggleMenu","inputKeyDownHandlers","Home","_this4","_this$getState3","newHighlightedIndex","End","_this5","_this$getState4","getToggleButtonProps","_temp3","_ref3","onClick","onPress","onKeyDown","onKeyUp","onBlur","_this$getState5","enabledEventHandlers","buttonHandleClick","buttonHandleKeyDown","buttonHandleKeyUp","buttonHandleBlur","eventHandlers","disabled","focus","blurTarget","isMouseDown","getLabelProps","htmlFor","getInputProps","_temp4","_ref4","onInput","onChangeText","onChangeKey","_this$getState6","_eventHandlers","inputHandleChange","inputHandleKeyDown","inputHandleBlur","autoComplete","value","downshiftButtonIsActive","dataset","toggle","menuRef","_menuNode","getMenuProps","_temp5","_temp6","_extends3","_ref5","_ref5$refKey","_ref6","_ref6$suppressRefErro","getItemProps","_temp7","_enabledEventHandlers","_ref7","onMouseMove","onMouseDown","_ref7$item","onSelectKey","customClickHandler","avoidScrolling","clearItems","_ref8","_ref9","_this$getState7","openMenu","closeMenu","updateStatus","getA11yStatusMessage","highlightedItem","_this$props","_this$props$initialHi","initialHighlightedIndex","_highlightedIndex","_this$props$initialIs","initialIsOpen","_isOpen","_this$props$initialIn","initialInputValue","_inputValue","_this$props$initialSe","initialSelectedItem","_selectedItem","_state","_proto","internalClearTimeouts","getState$1","stateToMerge","scrollHighlightedItemIntoView","_this6","_this$getState8","_this$getState9","componentDidMount","_this7","validateGetMenuPropsCalledCorrectly","onMouseUp","contextWithinDownshift","onOuterClick","onTouchStart","isTouchMove","onTouchMove","onTouchEnd","addEventListener","cleanup","removeEventListener","shouldScroll","_ref10","currentHighlightedIndex","_ref11","prevHighlightedIndex","scrollWhenOpen","scrollWhenNavigating","componentDidUpdate","selectedItemChanged","componentWillUnmount","render","children","validateGetRootPropsCalledCorrectly","Error","defaultProps","warn","prevItem","window","stateChangeTypes","propTypes","func","number","bool","any","string","shape","Downshift$1","_ref12","_ref13","refKeySpecified","isComposite","_excluded$3","dropdownDefaultStateValues","callOnChangeProps","action","newState","changes","invokeOnChangeHandler","handler","capitalizeString","s","a","getA11ySelectionMessage","selectionParameters","itemToStringLocal","updateA11yStatus","getA11yMessage","useIsomorphicLayoutEffect","useElementIds","_ref$id","toggleButtonId","elementIdsRef","getItemAndIndex","itemProp","indexProp","errorMessage","isAcceptedCharacterKey","test","slice","toUpperCase","useLatestRef","val","useEnhancedReducer","reducer","initialState","prevStateRef","actionRef","enhancedReducer","_useReducer","dispatch","propsRef","dispatchWithProps","useControlledReducer$1","_useEnhancedReducer","defaultProps$3","getDefaultValue$1","defaultStateValues","getInitialValue$1","initialValue","getInitialState$2","getHighlightedIndexOnOpen","offset","useMouseAndTouchTracker","downshiftElementRefs","handleBlur","mouseAndTouchTrackersRef","map","useGetterPropsCalledChecker","isInitialMountRef","propKeys","getterPropsCalledRef","acc","propCallInfo","elementRef","setGetterPropCallInfo","useA11yMessageSetter","dependencyArray","isInitialMount","useScrollIntoView","itemRefs","menuElement","scrollIntoViewProp","shouldScrollRef","useControlPropsValidator","prevPropsRef","getChangesOnSelection","_props$items","shouldSelect","downshiftCommonReducer","ItemMouseMove","MenuMouseLeave","ToggleButtonClick","FunctionToggleMenu","FunctionOpenMenu","FunctionCloseMenu","FunctionSetHighlightedIndex","FunctionSetInputValue","FunctionReset","getItemIndexByCharacterKey","_a","keysSoFar","lowerCasedKeysSoFar","toLowerCase","offsetIndex","startsWith","propTypes$2","array","isRequired","defaultSelectedItem","onSelectedItemChange","onHighlightedIndexChange","onIsOpenChange","defaultProps$2","validatePropTypes$2","options","caller","checkPropTypes","name","ToggleButtonClick$1","ToggleButtonKeyDownArrowDown","ToggleButtonKeyDownArrowUp","ToggleButtonKeyDownCharacter","ToggleButtonKeyDownEscape","ToggleButtonKeyDownHome","ToggleButtonKeyDownEnd","ToggleButtonKeyDownEnter","ToggleButtonKeyDownSpaceButton","ToggleButtonKeyDownPageUp","ToggleButtonKeyDownPageDown","ToggleButtonBlur","MenuMouseLeave$1","ItemMouseMove$1","ItemClick$1","FunctionToggleMenu$1","FunctionOpenMenu$1","FunctionCloseMenu$1","FunctionSetHighlightedIndex$1","FunctionSelectItem$1","FunctionSetInputValue$1","FunctionReset$2","stateChangeTypes$2","ItemClick","FunctionSelectItem","downshiftSelectReducer","altKey","lowercasedKey","_highlightedIndex2","_excluded$2","_excluded2$2","_excluded3$1","useSelect","userProps","_useControlledReducer","toggleButtonRef","clearTimeoutRef","elementIds","previousResultCountRef","latest","outerDispatch","toggleButtonKeyDownHandlers","PageUp","PageDown","currentState","newSelectedItem","setInputValue","newInputValue","labelProps","onMouseLeave","menuHandleMouseLeave","_ref3$refKey","_ref4$suppressRefErro","latestState","toggleButtonHandleClick","toggleButtonHandleBlur","toggleButtonHandleKeyDown","toggleProps","toggleButtonNode","tabIndex","_extends4","_latest$current","latestProps","_getItemAndIndex","itemHandleMouseMove","itemHandleClick","itemProps","InputKeyDownArrowDown","InputKeyDownArrowUp","InputKeyDownEscape","InputKeyDownHome","InputKeyDownEnd","InputKeyDownPageUp","InputKeyDownPageDown","InputKeyDownEnter","InputChange","InputBlur","InputFocus","FunctionReset$1","ControlledPropUpdatedSelectedItem","stateChangeTypes$1","getInitialState$1","defaultInputValue","propTypes$1","useControlledReducer","previousSelectedItemRef","validatePropTypes$1","validatePropTypes","defaultProps$1","downshiftUseComboboxReducer","_excluded$1","_excluded2$1","_excluded3","_excluded4","useCombobox","inputRef","focusOnOpen","_environment$document","_inputRef$current","itemHandleMouseDown","e","_extends5","onFocus","_ref6$refKey","_ref7$suppressRefErro","isBlurByTabChange","relatedTarget","inputHandleFocus","inputNode","activeIndex","selectedItems","getInitialValue","getDefaultValue","getInitialState","isKeyDownOperationPermitted","metaKey","ctrlKey","HTMLInputElement","selectionStart","selectionEnd","getA11yRemovalMessage","removedSelectedItem","initialSelectedItems","defaultSelectedItems","initialActiveIndex","defaultActiveIndex","onActiveIndexChange","onSelectedItemsChange","keyNavigationNext","keyNavigationPrevious","SelectedItemClick","SelectedItemKeyDownDelete","SelectedItemKeyDownBackspace","SelectedItemKeyDownNavigationNext","SelectedItemKeyDownNavigationPrevious","DropdownKeyDownNavigationPrevious","DropdownKeyDownBackspace","DropdownClick","FunctionAddSelectedItem","FunctionRemoveSelectedItem","FunctionSetSelectedItems","FunctionSetActiveIndex","downshiftMultipleSelectionReducer","newActiveIndex","_newActiveIndex","selectedItemIndex","newSelectedItems","_newActiveIndex2","_excluded","_excluded2","useMultipleSelection","dropdownRef","previousSelectedItemsRef","selectedItemRefs","find","activeSelectedItem","selectedItemKeyDownHandlers","Delete","Backspace","dropdownKeyDownHandlers","getSelectedItemProps","selectedItemProp","isFocusable","selectedItemHandleClick","selectedItemHandleKeyDown","selectedItemNode","getDropdownProps","_ref4$refKey","_ref4$preventKeyActio","preventKeyAction","_ref5$suppressRefErro","dropdownHandleKeyDown","dropdownHandleClick","dropdownNode","addSelectedItem","removeSelectedItem","setSelectedItems","setActiveIndex","default"],"sources":["C:/Users/krish/OneDrive/Desktop/ramp-fe-challenge/ramp-fe-challenge/node_modules/downshift/dist/downshift.esm.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport PropTypes from 'prop-types';\nimport { cloneElement, Component, useRef, useEffect, useCallback, useLayoutEffect, useReducer, useMemo } from 'react';\nimport { isForwardRef } from 'react-is';\nimport compute from 'compute-scroll-into-view';\nimport { __assign } from 'tslib';\n\nvar idCounter = 0;\n\n/**\n * Accepts a parameter and returns it if it's a function\n * or a noop function if it's not. This allows us to\n * accept a callback, but not worry about it if it's not\n * passed.\n * @param {Function} cb the callback\n * @return {Function} a function\n */\nfunction cbToCb(cb) {\n  return typeof cb === 'function' ? cb : noop;\n}\nfunction noop() {}\n\n/**\n * Scroll node into view if necessary\n * @param {HTMLElement} node the element that should scroll into view\n * @param {HTMLElement} menuNode the menu element of the component\n */\nfunction scrollIntoView(node, menuNode) {\n  if (!node) {\n    return;\n  }\n  var actions = compute(node, {\n    boundary: menuNode,\n    block: 'nearest',\n    scrollMode: 'if-needed'\n  });\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n      top = _ref.top,\n      left = _ref.left;\n    el.scrollTop = top;\n    el.scrollLeft = left;\n  });\n}\n\n/**\n * @param {HTMLElement} parent the parent node\n * @param {HTMLElement} child the child node\n * @param {Window} environment The window context where downshift renders.\n * @return {Boolean} whether the parent is the child or the child is in the parent\n */\nfunction isOrContainsNode(parent, child, environment) {\n  var result = parent === child || child instanceof environment.Node && parent.contains && parent.contains(child);\n  return result;\n}\n\n/**\n * Simple debounce implementation. Will call the given\n * function once after the time given has passed since\n * it was last called.\n * @param {Function} fn the function to call after the time\n * @param {Number} time the time to wait\n * @return {Function} the debounced function\n */\nfunction debounce(fn, time) {\n  var timeoutId;\n  function cancel() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n  function wrapper() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    cancel();\n    timeoutId = setTimeout(function () {\n      timeoutId = null;\n      fn.apply(void 0, args);\n    }, time);\n  }\n  wrapper.cancel = cancel;\n  return wrapper;\n}\n\n/**\n * This is intended to be used to compose event handlers.\n * They are executed in order until one of them sets\n * `event.preventDownshiftDefault = true`.\n * @param {...Function} fns the event handler functions\n * @return {Function} the event handler to add to an element\n */\nfunction callAllEventHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function (event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return fns.some(function (fn) {\n      if (fn) {\n        fn.apply(void 0, [event].concat(args));\n      }\n      return event.preventDownshiftDefault || event.hasOwnProperty('nativeEvent') && event.nativeEvent.preventDownshiftDefault;\n    });\n  };\n}\nfunction handleRefs() {\n  for (var _len4 = arguments.length, refs = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    refs[_key4] = arguments[_key4];\n  }\n  return function (node) {\n    refs.forEach(function (ref) {\n      if (typeof ref === 'function') {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    });\n  };\n}\n\n/**\n * This generates a unique ID for an instance of Downshift\n * @return {String} the unique ID\n */\nfunction generateId() {\n  return String(idCounter++);\n}\n\n/**\n * Resets idCounter to 0. Used for SSR.\n */\nfunction resetIdCounter() {\n  idCounter = 0;\n}\n\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specify if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage$1(_ref2) {\n  var isOpen = _ref2.isOpen,\n    resultCount = _ref2.resultCount,\n    previousResultCount = _ref2.previousResultCount;\n  if (!isOpen) {\n    return '';\n  }\n  if (!resultCount) {\n    return 'No results are available.';\n  }\n  if (resultCount !== previousResultCount) {\n    return resultCount + \" result\" + (resultCount === 1 ? ' is' : 's are') + \" available, use up and down arrow keys to navigate. Press Enter key to select.\";\n  }\n  return '';\n}\n\n/**\n * Takes an argument and if it's an array, returns the first item in the array\n * otherwise returns the argument\n * @param {*} arg the maybe-array\n * @param {*} defaultValue the value if arg is falsey not defined\n * @return {*} the arg or it's first item\n */\nfunction unwrapArray(arg, defaultValue) {\n  arg = Array.isArray(arg) ? /* istanbul ignore next (preact) */arg[0] : arg;\n  if (!arg && defaultValue) {\n    return defaultValue;\n  } else {\n    return arg;\n  }\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Boolean} whether it's a DOM element\n */\nfunction isDOMElement(element) {\n\n  // then we assume this is react\n  return typeof element.type === 'string';\n}\n\n/**\n * @param {Object} element (P)react element\n * @return {Object} the props\n */\nfunction getElementProps(element) {\n  return element.props;\n}\n\n/**\n * Throws a helpful error message for required properties. Useful\n * to be used as a default in destructuring or object params.\n * @param {String} fnName the function name\n * @param {String} propName the prop name\n */\nfunction requiredProp(fnName, propName) {\n  // eslint-disable-next-line no-console\n  console.error(\"The property \\\"\" + propName + \"\\\" is required in \\\"\" + fnName + \"\\\"\");\n}\nvar stateKeys = ['highlightedIndex', 'inputValue', 'isOpen', 'selectedItem', 'type'];\n/**\n * @param {Object} state the state object\n * @return {Object} state that is relevant to downshift\n */\nfunction pickState(state) {\n  if (state === void 0) {\n    state = {};\n  }\n  var result = {};\n  stateKeys.forEach(function (k) {\n    if (state.hasOwnProperty(k)) {\n      result[k] = state[k];\n    }\n  });\n  return result;\n}\n\n/**\n * This will perform a shallow merge of the given state object\n * with the state coming from props\n * (for the controlled component scenario)\n * This is used in state updater functions so they're referencing\n * the right state regardless of where it comes from.\n *\n * @param {Object} state The state of the component/hook.\n * @param {Object} props The props that may contain controlled values.\n * @returns {Object} The merged controlled state.\n */\nfunction getState(state, props) {\n  return Object.keys(state).reduce(function (prevState, key) {\n    prevState[key] = isControlledProp(props, key) ? props[key] : state[key];\n    return prevState;\n  }, {});\n}\n\n/**\n * This determines whether a prop is a \"controlled prop\" meaning it is\n * state which is controlled by the outside of this component rather\n * than within this component.\n *\n * @param {Object} props The props that may contain controlled values.\n * @param {String} key the key to check\n * @return {Boolean} whether it is a controlled controlled prop\n */\nfunction isControlledProp(props, key) {\n  return props[key] !== undefined;\n}\n\n/**\n * Normalizes the 'key' property of a KeyboardEvent in IE/Edge\n * @param {Object} event a keyboardEvent object\n * @return {String} keyboard key\n */\nfunction normalizeArrowKey(event) {\n  var key = event.key,\n    keyCode = event.keyCode;\n  /* istanbul ignore next (ie) */\n  if (keyCode >= 37 && keyCode <= 40 && key.indexOf('Arrow') !== 0) {\n    return \"Arrow\" + key;\n  }\n  return key;\n}\n\n/**\n * Simple check if the value passed is object literal\n * @param {*} obj any things\n * @return {Boolean} whether it's object literal\n */\nfunction isPlainObject(obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]';\n}\n\n/**\n * Returns the new index in the list, in a circular way. If next value is out of bonds from the total,\n * it will wrap to either 0 or itemCount - 1.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index after the move.\n */\nfunction getNextWrappingIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  if (circular === void 0) {\n    circular = true;\n  }\n  if (itemCount === 0) {\n    return -1;\n  }\n  var itemsLastIndex = itemCount - 1;\n  if (typeof baseIndex !== 'number' || baseIndex < 0 || baseIndex >= itemCount) {\n    baseIndex = moveAmount > 0 ? -1 : itemsLastIndex + 1;\n  }\n  var newIndex = baseIndex + moveAmount;\n  if (newIndex < 0) {\n    newIndex = circular ? itemsLastIndex : 0;\n  } else if (newIndex > itemsLastIndex) {\n    newIndex = circular ? 0 : itemsLastIndex;\n  }\n  var nonDisabledNewIndex = getNextNonDisabledIndex(moveAmount, newIndex, itemCount, getItemNodeFromIndex, circular);\n  if (nonDisabledNewIndex === -1) {\n    return baseIndex >= itemCount ? -1 : baseIndex;\n  }\n  return nonDisabledNewIndex;\n}\n\n/**\n * Returns the next index in the list of an item that is not disabled.\n *\n * @param {number} moveAmount Number of positions to move. Negative to move backwards, positive forwards.\n * @param {number} baseIndex The initial position to move from.\n * @param {number} itemCount The total number of items.\n * @param {Function} getItemNodeFromIndex Used to check if item is disabled.\n * @param {boolean} circular Specify if navigation is circular. Default is true.\n * @returns {number} The new index. Returns baseIndex if item is not disabled. Returns next non-disabled item otherwise. If no non-disabled found it will return -1.\n */\nfunction getNextNonDisabledIndex(moveAmount, baseIndex, itemCount, getItemNodeFromIndex, circular) {\n  var currentElementNode = getItemNodeFromIndex(baseIndex);\n  if (!currentElementNode || !currentElementNode.hasAttribute('disabled')) {\n    return baseIndex;\n  }\n  if (moveAmount > 0) {\n    for (var index = baseIndex + 1; index < itemCount; index++) {\n      if (!getItemNodeFromIndex(index).hasAttribute('disabled')) {\n        return index;\n      }\n    }\n  } else {\n    for (var _index = baseIndex - 1; _index >= 0; _index--) {\n      if (!getItemNodeFromIndex(_index).hasAttribute('disabled')) {\n        return _index;\n      }\n    }\n  }\n  if (circular) {\n    return moveAmount > 0 ? getNextNonDisabledIndex(1, 0, itemCount, getItemNodeFromIndex, false) : getNextNonDisabledIndex(-1, itemCount - 1, itemCount, getItemNodeFromIndex, false);\n  }\n  return -1;\n}\n\n/**\n * Checks if event target is within the downshift elements.\n *\n * @param {EventTarget} target Target to check.\n * @param {HTMLElement[]} downshiftElements The elements that form downshift (list, toggle button etc).\n * @param {Window} environment The window context where downshift renders.\n * @param {boolean} checkActiveElement Whether to also check activeElement.\n *\n * @returns {boolean} Whether or not the target is within downshift elements.\n */\nfunction targetWithinDownshift(target, downshiftElements, environment, checkActiveElement) {\n  if (checkActiveElement === void 0) {\n    checkActiveElement = true;\n  }\n  return downshiftElements.some(function (contextNode) {\n    return contextNode && (isOrContainsNode(contextNode, target, environment) || checkActiveElement && isOrContainsNode(contextNode, environment.document.activeElement, environment));\n  });\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validateControlledUnchanged = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validateControlledUnchanged = function validateControlledUnchanged(state, prevProps, nextProps) {\n    var warningDescription = \"This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props\";\n    Object.keys(state).forEach(function (propKey) {\n      if (prevProps[propKey] !== undefined && nextProps[propKey] === undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the controlled prop \\\"\" + propKey + \"\\\" to be uncontrolled. \" + warningDescription);\n      } else if (prevProps[propKey] === undefined && nextProps[propKey] !== undefined) {\n        // eslint-disable-next-line no-console\n        console.error(\"downshift: A component has changed the uncontrolled prop \\\"\" + propKey + \"\\\" to be controlled. \" + warningDescription);\n      }\n    });\n  };\n}\n\nvar cleanupStatus = debounce(function (documentProp) {\n  getStatusDiv(documentProp).textContent = '';\n}, 500);\n\n/**\n * @param {String} status the status message\n * @param {Object} documentProp document passed by the user.\n */\nfunction setStatus(status, documentProp) {\n  var div = getStatusDiv(documentProp);\n  if (!status) {\n    return;\n  }\n  div.textContent = status;\n  cleanupStatus(documentProp);\n}\n\n/**\n * Get the status node or create it if it does not already exist.\n * @param {Object} documentProp document passed by the user.\n * @return {HTMLElement} the status node.\n */\nfunction getStatusDiv(documentProp) {\n  if (documentProp === void 0) {\n    documentProp = document;\n  }\n  var statusDiv = documentProp.getElementById('a11y-status-message');\n  if (statusDiv) {\n    return statusDiv;\n  }\n  statusDiv = documentProp.createElement('div');\n  statusDiv.setAttribute('id', 'a11y-status-message');\n  statusDiv.setAttribute('role', 'status');\n  statusDiv.setAttribute('aria-live', 'polite');\n  statusDiv.setAttribute('aria-relevant', 'additions text');\n  Object.assign(statusDiv.style, {\n    border: '0',\n    clip: 'rect(0 0 0 0)',\n    height: '1px',\n    margin: '-1px',\n    overflow: 'hidden',\n    padding: '0',\n    position: 'absolute',\n    width: '1px'\n  });\n  documentProp.body.appendChild(statusDiv);\n  return statusDiv;\n}\n\nvar unknown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_unknown__' : 0;\nvar mouseUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_mouseup__' : 1;\nvar itemMouseEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_item_mouseenter__' : 2;\nvar keyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_up__' : 3;\nvar keyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_arrow_down__' : 4;\nvar keyDownEscape = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_escape__' : 5;\nvar keyDownEnter = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_enter__' : 6;\nvar keyDownHome = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_home__' : 7;\nvar keyDownEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_end__' : 8;\nvar clickItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_item__' : 9;\nvar blurInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_input__' : 10;\nvar changeInput = process.env.NODE_ENV !== \"production\" ? '__autocomplete_change_input__' : 11;\nvar keyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_keydown_space_button__' : 12;\nvar clickButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_click_button__' : 13;\nvar blurButton = process.env.NODE_ENV !== \"production\" ? '__autocomplete_blur_button__' : 14;\nvar controlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__autocomplete_controlled_prop_updated_selected_item__' : 15;\nvar touchEnd = process.env.NODE_ENV !== \"production\" ? '__autocomplete_touchend__' : 16;\n\nvar stateChangeTypes$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  unknown: unknown,\n  mouseUp: mouseUp,\n  itemMouseEnter: itemMouseEnter,\n  keyDownArrowUp: keyDownArrowUp,\n  keyDownArrowDown: keyDownArrowDown,\n  keyDownEscape: keyDownEscape,\n  keyDownEnter: keyDownEnter,\n  keyDownHome: keyDownHome,\n  keyDownEnd: keyDownEnd,\n  clickItem: clickItem,\n  blurInput: blurInput,\n  changeInput: changeInput,\n  keyDownSpaceButton: keyDownSpaceButton,\n  clickButton: clickButton,\n  blurButton: blurButton,\n  controlledPropUpdatedSelectedItem: controlledPropUpdatedSelectedItem,\n  touchEnd: touchEnd\n});\n\nvar _excluded$4 = [\"refKey\", \"ref\"],\n  _excluded2$3 = [\"onClick\", \"onPress\", \"onKeyDown\", \"onKeyUp\", \"onBlur\"],\n  _excluded3$2 = [\"onKeyDown\", \"onBlur\", \"onChange\", \"onInput\", \"onChangeText\"],\n  _excluded4$1 = [\"refKey\", \"ref\"],\n  _excluded5 = [\"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"index\", \"item\"];\nvar Downshift = /*#__PURE__*/function () {\n  var Downshift = /*#__PURE__*/function (_Component) {\n    _inheritsLoose(Downshift, _Component);\n    function Downshift(_props) {\n      var _this;\n      _this = _Component.call(this, _props) || this;\n      // fancy destructuring + defaults + aliases\n      // this basically says each value of state should either be set to\n      // the initial value or the default value if the initial value is not provided\n      _this.id = _this.props.id || \"downshift-\" + generateId();\n      _this.menuId = _this.props.menuId || _this.id + \"-menu\";\n      _this.labelId = _this.props.labelId || _this.id + \"-label\";\n      _this.inputId = _this.props.inputId || _this.id + \"-input\";\n      _this.getItemId = _this.props.getItemId || function (index) {\n        return _this.id + \"-item-\" + index;\n      };\n      _this.input = null;\n      _this.items = [];\n      // itemCount can be changed asynchronously\n      // from within downshift (so it can't come from a prop)\n      // this is why we store it as an instance and use\n      // getItemCount rather than just use items.length\n      // (to support windowing + async)\n      _this.itemCount = null;\n      _this.previousResultCount = 0;\n      _this.timeoutIds = [];\n      /**\n       * @param {Function} fn the function to call after the time\n       * @param {Number} time the time to wait\n       */\n      _this.internalSetTimeout = function (fn, time) {\n        var id = setTimeout(function () {\n          _this.timeoutIds = _this.timeoutIds.filter(function (i) {\n            return i !== id;\n          });\n          fn();\n        }, time);\n        _this.timeoutIds.push(id);\n      };\n      _this.setItemCount = function (count) {\n        _this.itemCount = count;\n      };\n      _this.unsetItemCount = function () {\n        _this.itemCount = null;\n      };\n      _this.setHighlightedIndex = function (highlightedIndex, otherStateToSet) {\n        if (highlightedIndex === void 0) {\n          highlightedIndex = _this.props.defaultHighlightedIndex;\n        }\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          highlightedIndex: highlightedIndex\n        }, otherStateToSet));\n      };\n      _this.clearSelection = function (cb) {\n        _this.internalSetState({\n          selectedItem: null,\n          inputValue: '',\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          isOpen: _this.props.defaultIsOpen\n        }, cb);\n      };\n      _this.selectItem = function (item, otherStateToSet, cb) {\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(_extends({\n          isOpen: _this.props.defaultIsOpen,\n          highlightedIndex: _this.props.defaultHighlightedIndex,\n          selectedItem: item,\n          inputValue: _this.props.itemToString(item)\n        }, otherStateToSet), cb);\n      };\n      _this.selectItemAtIndex = function (itemIndex, otherStateToSet, cb) {\n        var item = _this.items[itemIndex];\n        if (item == null) {\n          return;\n        }\n        _this.selectItem(item, otherStateToSet, cb);\n      };\n      _this.selectHighlightedItem = function (otherStateToSet, cb) {\n        return _this.selectItemAtIndex(_this.getState().highlightedIndex, otherStateToSet, cb);\n      };\n      // any piece of our state can live in two places:\n      // 1. Uncontrolled: it's internal (this.state)\n      //    We will call this.setState to update that state\n      // 2. Controlled: it's external (this.props)\n      //    We will call this.props.onStateChange to update that state\n      //\n      // In addition, we'll call this.props.onChange if the\n      // selectedItem is changed.\n      _this.internalSetState = function (stateToSet, cb) {\n        var isItemSelected, onChangeArg;\n        var onStateChangeArg = {};\n        var isStateToSetFunction = typeof stateToSet === 'function';\n\n        // we want to call `onInputValueChange` before the `setState` call\n        // so someone controlling the `inputValue` state gets notified of\n        // the input change as soon as possible. This avoids issues with\n        // preserving the cursor position.\n        // See https://github.com/downshift-js/downshift/issues/217 for more info.\n        if (!isStateToSetFunction && stateToSet.hasOwnProperty('inputValue')) {\n          _this.props.onInputValueChange(stateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), stateToSet));\n        }\n        return _this.setState(function (state) {\n          state = _this.getState(state);\n          var newStateToSet = isStateToSetFunction ? stateToSet(state) : stateToSet;\n\n          // Your own function that could modify the state that will be set.\n          newStateToSet = _this.props.stateReducer(state, newStateToSet);\n\n          // checks if an item is selected, regardless of if it's different from\n          // what was selected before\n          // used to determine if onSelect and onChange callbacks should be called\n          isItemSelected = newStateToSet.hasOwnProperty('selectedItem');\n          // this keeps track of the object we want to call with setState\n          var nextState = {};\n          // we need to call on change if the outside world is controlling any of our state\n          // and we're trying to update that state. OR if the selection has changed and we're\n          // trying to update the selection\n          if (isItemSelected && newStateToSet.selectedItem !== state.selectedItem) {\n            onChangeArg = newStateToSet.selectedItem;\n          }\n          newStateToSet.type = newStateToSet.type || unknown;\n          Object.keys(newStateToSet).forEach(function (key) {\n            // onStateChangeArg should only have the state that is\n            // actually changing\n            if (state[key] !== newStateToSet[key]) {\n              onStateChangeArg[key] = newStateToSet[key];\n            }\n            // the type is useful for the onStateChangeArg\n            // but we don't actually want to set it in internal state.\n            // this is an undocumented feature for now... Not all internalSetState\n            // calls support it and I'm not certain we want them to yet.\n            // But it enables users controlling the isOpen state to know when\n            // the isOpen state changes due to mouseup events which is quite handy.\n            if (key === 'type') {\n              return;\n            }\n            newStateToSet[key];\n            // if it's coming from props, then we don't care to set it internally\n            if (!isControlledProp(_this.props, key)) {\n              nextState[key] = newStateToSet[key];\n            }\n          });\n\n          // if stateToSet is a function, then we weren't able to call onInputValueChange\n          // earlier, so we'll call it now that we know what the inputValue state will be.\n          if (isStateToSetFunction && newStateToSet.hasOwnProperty('inputValue')) {\n            _this.props.onInputValueChange(newStateToSet.inputValue, _extends({}, _this.getStateAndHelpers(), newStateToSet));\n          }\n          return nextState;\n        }, function () {\n          // call the provided callback if it's a function\n          cbToCb(cb)();\n\n          // only call the onStateChange and onChange callbacks if\n          // we have relevant information to pass them.\n          var hasMoreStateThanType = Object.keys(onStateChangeArg).length > 1;\n          if (hasMoreStateThanType) {\n            _this.props.onStateChange(onStateChangeArg, _this.getStateAndHelpers());\n          }\n          if (isItemSelected) {\n            _this.props.onSelect(stateToSet.selectedItem, _this.getStateAndHelpers());\n          }\n          if (onChangeArg !== undefined) {\n            _this.props.onChange(onChangeArg, _this.getStateAndHelpers());\n          }\n          // this is currently undocumented and therefore subject to change\n          // We'll try to not break it, but just be warned.\n          _this.props.onUserAction(onStateChangeArg, _this.getStateAndHelpers());\n        });\n      };\n      //////////////////////////// ROOT\n      _this.rootRef = function (node) {\n        return _this._rootNode = node;\n      };\n      _this.getRootProps = function (_temp, _temp2) {\n        var _extends2;\n        var _ref = _temp === void 0 ? {} : _temp,\n          _ref$refKey = _ref.refKey,\n          refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n          ref = _ref.ref,\n          rest = _objectWithoutPropertiesLoose(_ref, _excluded$4);\n        var _ref2 = _temp2 === void 0 ? {} : _temp2,\n          _ref2$suppressRefErro = _ref2.suppressRefError,\n          suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n        // this is used in the render to know whether the user has called getRootProps.\n        // It uses that to know whether to apply the props automatically\n        _this.getRootProps.called = true;\n        _this.getRootProps.refKey = refKey;\n        _this.getRootProps.suppressRefError = suppressRefError;\n        var _this$getState = _this.getState(),\n          isOpen = _this$getState.isOpen;\n        return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, _this.rootRef), _extends2.role = 'combobox', _extends2['aria-expanded'] = isOpen, _extends2['aria-haspopup'] = 'listbox', _extends2['aria-owns'] = isOpen ? _this.menuId : null, _extends2['aria-labelledby'] = _this.labelId, _extends2), rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ROOT\n      _this.keyDownHandlers = {\n        ArrowDown: function ArrowDown(event) {\n          var _this2 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? 5 : 1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowDown\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowDown\n            }, function () {\n              var itemCount = _this2.getItemCount();\n              if (itemCount > 0) {\n                var _this2$getState = _this2.getState(),\n                  highlightedIndex = _this2$getState.highlightedIndex;\n                var nextHighlightedIndex = getNextWrappingIndex(1, highlightedIndex, itemCount, function (index) {\n                  return _this2.getItemNodeFromIndex(index);\n                });\n                _this2.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowDown\n                });\n              }\n            });\n          }\n        },\n        ArrowUp: function ArrowUp(event) {\n          var _this3 = this;\n          event.preventDefault();\n          if (this.getState().isOpen) {\n            var amount = event.shiftKey ? -5 : -1;\n            this.moveHighlightedIndex(amount, {\n              type: keyDownArrowUp\n            });\n          } else {\n            this.internalSetState({\n              isOpen: true,\n              type: keyDownArrowUp\n            }, function () {\n              var itemCount = _this3.getItemCount();\n              if (itemCount > 0) {\n                var _this3$getState = _this3.getState(),\n                  highlightedIndex = _this3$getState.highlightedIndex;\n                var nextHighlightedIndex = getNextWrappingIndex(-1, highlightedIndex, itemCount, function (index) {\n                  return _this3.getItemNodeFromIndex(index);\n                });\n                _this3.setHighlightedIndex(nextHighlightedIndex, {\n                  type: keyDownArrowUp\n                });\n              }\n            });\n          }\n        },\n        Enter: function Enter(event) {\n          if (event.which === 229) {\n            return;\n          }\n          var _this$getState2 = this.getState(),\n            isOpen = _this$getState2.isOpen,\n            highlightedIndex = _this$getState2.highlightedIndex;\n          if (isOpen && highlightedIndex != null) {\n            event.preventDefault();\n            var item = this.items[highlightedIndex];\n            var itemNode = this.getItemNodeFromIndex(highlightedIndex);\n            if (item == null || itemNode && itemNode.hasAttribute('disabled')) {\n              return;\n            }\n            this.selectHighlightedItem({\n              type: keyDownEnter\n            });\n          }\n        },\n        Escape: function Escape(event) {\n          event.preventDefault();\n          this.reset(_extends({\n            type: keyDownEscape\n          }, !this.state.isOpen && {\n            selectedItem: null,\n            inputValue: ''\n          }));\n        }\n      };\n      //////////////////////////// BUTTON\n      _this.buttonKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        ' ': function _(event) {\n          event.preventDefault();\n          this.toggleMenu({\n            type: keyDownSpaceButton\n          });\n        }\n      });\n      _this.inputKeyDownHandlers = _extends({}, _this.keyDownHandlers, {\n        Home: function Home(event) {\n          var _this4 = this;\n          var _this$getState3 = this.getState(),\n            isOpen = _this$getState3.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting downwards from 0 if that's disabled.\n          var newHighlightedIndex = getNextNonDisabledIndex(1, 0, itemCount, function (index) {\n            return _this4.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownHome\n          });\n        },\n        End: function End(event) {\n          var _this5 = this;\n          var _this$getState4 = this.getState(),\n            isOpen = _this$getState4.isOpen;\n          if (!isOpen) {\n            return;\n          }\n          event.preventDefault();\n          var itemCount = this.getItemCount();\n          if (itemCount <= 0 || !isOpen) {\n            return;\n          }\n\n          // get next non-disabled starting upwards from last index if that's disabled.\n          var newHighlightedIndex = getNextNonDisabledIndex(-1, itemCount - 1, itemCount, function (index) {\n            return _this5.getItemNodeFromIndex(index);\n          }, false);\n          this.setHighlightedIndex(newHighlightedIndex, {\n            type: keyDownEnd\n          });\n        }\n      });\n      _this.getToggleButtonProps = function (_temp3) {\n        var _ref3 = _temp3 === void 0 ? {} : _temp3,\n          onClick = _ref3.onClick;\n          _ref3.onPress;\n          var onKeyDown = _ref3.onKeyDown,\n          onKeyUp = _ref3.onKeyUp,\n          onBlur = _ref3.onBlur,\n          rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$3);\n        var _this$getState5 = _this.getState(),\n          isOpen = _this$getState5.isOpen;\n        var enabledEventHandlers = {\n          onClick: callAllEventHandlers(onClick, _this.buttonHandleClick),\n          onKeyDown: callAllEventHandlers(onKeyDown, _this.buttonHandleKeyDown),\n          onKeyUp: callAllEventHandlers(onKeyUp, _this.buttonHandleKeyUp),\n          onBlur: callAllEventHandlers(onBlur, _this.buttonHandleBlur)\n        };\n        var eventHandlers = rest.disabled ? {} : enabledEventHandlers;\n        return _extends({\n          type: 'button',\n          role: 'button',\n          'aria-label': isOpen ? 'close menu' : 'open menu',\n          'aria-haspopup': true,\n          'data-toggle': true\n        }, eventHandlers, rest);\n      };\n      _this.buttonHandleKeyUp = function (event) {\n        // Prevent click event from emitting in Firefox\n        event.preventDefault();\n      };\n      _this.buttonHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (_this.buttonKeyDownHandlers[key]) {\n          _this.buttonKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.buttonHandleClick = function (event) {\n        event.preventDefault();\n        // handle odd case for Safari and Firefox which\n        // don't give the button the focus properly.\n        /* istanbul ignore if (can't reasonably test this) */\n        if (_this.props.environment.document.activeElement === _this.props.environment.document.body) {\n          event.target.focus();\n        }\n        // to simplify testing components that use downshift, we'll not wrap this in a setTimeout\n        // if the NODE_ENV is test. With the proper build system, this should be dead code eliminated\n        // when building for production and should therefore have no impact on production code.\n        if (process.env.NODE_ENV === 'test') {\n          _this.toggleMenu({\n            type: clickButton\n          });\n        } else {\n          // Ensure that toggle of menu occurs after the potential blur event in iOS\n          _this.internalSetTimeout(function () {\n            return _this.toggleMenu({\n              type: clickButton\n            });\n          });\n        }\n      };\n      _this.buttonHandleBlur = function (event) {\n        var blurTarget = event.target; // Save blur target for comparison with activeElement later\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not body element\n        _this.internalSetTimeout(function () {\n          if (!_this.isMouseDown && (_this.props.environment.document.activeElement == null || _this.props.environment.document.activeElement.id !== _this.inputId) && _this.props.environment.document.activeElement !== blurTarget // Do nothing if we refocus the same element again (to solve issue in Safari on iOS)\n          ) {\n            _this.reset({\n              type: blurButton\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ BUTTON\n      /////////////////////////////// LABEL\n      _this.getLabelProps = function (props) {\n        return _extends({\n          htmlFor: _this.inputId,\n          id: _this.labelId\n        }, props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ LABEL\n      /////////////////////////////// INPUT\n      _this.getInputProps = function (_temp4) {\n        var _ref4 = _temp4 === void 0 ? {} : _temp4,\n          onKeyDown = _ref4.onKeyDown,\n          onBlur = _ref4.onBlur,\n          onChange = _ref4.onChange,\n          onInput = _ref4.onInput;\n          _ref4.onChangeText;\n          var rest = _objectWithoutPropertiesLoose(_ref4, _excluded3$2);\n        var onChangeKey;\n        var eventHandlers = {};\n\n        /* istanbul ignore next (preact) */\n        {\n          onChangeKey = 'onChange';\n        }\n        var _this$getState6 = _this.getState(),\n          inputValue = _this$getState6.inputValue,\n          isOpen = _this$getState6.isOpen,\n          highlightedIndex = _this$getState6.highlightedIndex;\n        if (!rest.disabled) {\n          var _eventHandlers;\n          eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, _this.inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, _this.inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, _this.inputHandleBlur), _eventHandlers);\n        }\n        return _extends({\n          'aria-autocomplete': 'list',\n          'aria-activedescendant': isOpen && typeof highlightedIndex === 'number' && highlightedIndex >= 0 ? _this.getItemId(highlightedIndex) : null,\n          'aria-controls': isOpen ? _this.menuId : null,\n          'aria-labelledby': rest && rest['aria-label'] ? undefined : _this.labelId,\n          // https://developer.mozilla.org/en-US/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\n          // revert back since autocomplete=\"nope\" is ignored on latest Chrome and Opera\n          autoComplete: 'off',\n          value: inputValue,\n          id: _this.inputId\n        }, eventHandlers, rest);\n      };\n      _this.inputHandleKeyDown = function (event) {\n        var key = normalizeArrowKey(event);\n        if (key && _this.inputKeyDownHandlers[key]) {\n          _this.inputKeyDownHandlers[key].call(_assertThisInitialized(_this), event);\n        }\n      };\n      _this.inputHandleChange = function (event) {\n        _this.internalSetState({\n          type: changeInput,\n          isOpen: true,\n          inputValue: event.target.value,\n          highlightedIndex: _this.props.defaultHighlightedIndex\n        });\n      };\n      _this.inputHandleBlur = function () {\n        // Need setTimeout, so that when the user presses Tab, the activeElement is the next focused element, not the body element\n        _this.internalSetTimeout(function () {\n          var downshiftButtonIsActive = _this.props.environment.document && !!_this.props.environment.document.activeElement && !!_this.props.environment.document.activeElement.dataset && _this.props.environment.document.activeElement.dataset.toggle && _this._rootNode && _this._rootNode.contains(_this.props.environment.document.activeElement);\n          if (!_this.isMouseDown && !downshiftButtonIsActive) {\n            _this.reset({\n              type: blurInput\n            });\n          }\n        });\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ INPUT\n      /////////////////////////////// MENU\n      _this.menuRef = function (node) {\n        _this._menuNode = node;\n      };\n      _this.getMenuProps = function (_temp5, _temp6) {\n        var _extends3;\n        var _ref5 = _temp5 === void 0 ? {} : _temp5,\n          _ref5$refKey = _ref5.refKey,\n          refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n          ref = _ref5.ref,\n          props = _objectWithoutPropertiesLoose(_ref5, _excluded4$1);\n        var _ref6 = _temp6 === void 0 ? {} : _temp6,\n          _ref6$suppressRefErro = _ref6.suppressRefError,\n          suppressRefError = _ref6$suppressRefErro === void 0 ? false : _ref6$suppressRefErro;\n        _this.getMenuProps.called = true;\n        _this.getMenuProps.refKey = refKey;\n        _this.getMenuProps.suppressRefError = suppressRefError;\n        return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, _this.menuRef), _extends3.role = 'listbox', _extends3['aria-labelledby'] = props && props['aria-label'] ? null : _this.labelId, _extends3.id = _this.menuId, _extends3), props);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ MENU\n      /////////////////////////////// ITEM\n      _this.getItemProps = function (_temp7) {\n        var _enabledEventHandlers;\n        var _ref7 = _temp7 === void 0 ? {} : _temp7,\n          onMouseMove = _ref7.onMouseMove,\n          onMouseDown = _ref7.onMouseDown,\n          onClick = _ref7.onClick;\n          _ref7.onPress;\n          var index = _ref7.index,\n          _ref7$item = _ref7.item,\n          item = _ref7$item === void 0 ? process.env.NODE_ENV === 'production' ? /* istanbul ignore next */undefined : requiredProp('getItemProps', 'item') : _ref7$item,\n          rest = _objectWithoutPropertiesLoose(_ref7, _excluded5);\n        if (index === undefined) {\n          _this.items.push(item);\n          index = _this.items.indexOf(item);\n        } else {\n          _this.items[index] = item;\n        }\n        var onSelectKey = 'onClick';\n        var customClickHandler = onClick;\n        var enabledEventHandlers = (_enabledEventHandlers = {\n          // onMouseMove is used over onMouseEnter here. onMouseMove\n          // is only triggered on actual mouse movement while onMouseEnter\n          // can fire on DOM changes, interrupting keyboard navigation\n          onMouseMove: callAllEventHandlers(onMouseMove, function () {\n            if (index === _this.getState().highlightedIndex) {\n              return;\n            }\n            _this.setHighlightedIndex(index, {\n              type: itemMouseEnter\n            });\n\n            // We never want to manually scroll when changing state based\n            // on `onMouseMove` because we will be moving the element out\n            // from under the user which is currently scrolling/moving the\n            // cursor\n            _this.avoidScrolling = true;\n            _this.internalSetTimeout(function () {\n              return _this.avoidScrolling = false;\n            }, 250);\n          }),\n          onMouseDown: callAllEventHandlers(onMouseDown, function (event) {\n            // This prevents the activeElement from being changed\n            // to the item so it can remain with the current activeElement\n            // which is a more common use case.\n            event.preventDefault();\n          })\n        }, _enabledEventHandlers[onSelectKey] = callAllEventHandlers(customClickHandler, function () {\n          _this.selectItemAtIndex(index, {\n            type: clickItem\n          });\n        }), _enabledEventHandlers);\n\n        // Passing down the onMouseDown handler to prevent redirect\n        // of the activeElement if clicking on disabled items\n        var eventHandlers = rest.disabled ? {\n          onMouseDown: enabledEventHandlers.onMouseDown\n        } : enabledEventHandlers;\n        return _extends({\n          id: _this.getItemId(index),\n          role: 'option',\n          'aria-selected': _this.getState().highlightedIndex === index\n        }, eventHandlers, rest);\n      };\n      //\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ ITEM\n      _this.clearItems = function () {\n        _this.items = [];\n      };\n      _this.reset = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref8) {\n          var selectedItem = _ref8.selectedItem;\n          return _extends({\n            isOpen: _this.props.defaultIsOpen,\n            highlightedIndex: _this.props.defaultHighlightedIndex,\n            inputValue: _this.props.itemToString(selectedItem)\n          }, otherStateToSet);\n        }, cb);\n      };\n      _this.toggleMenu = function (otherStateToSet, cb) {\n        if (otherStateToSet === void 0) {\n          otherStateToSet = {};\n        }\n        otherStateToSet = pickState(otherStateToSet);\n        _this.internalSetState(function (_ref9) {\n          var isOpen = _ref9.isOpen;\n          return _extends({\n            isOpen: !isOpen\n          }, isOpen && {\n            highlightedIndex: _this.props.defaultHighlightedIndex\n          }, otherStateToSet);\n        }, function () {\n          var _this$getState7 = _this.getState(),\n            isOpen = _this$getState7.isOpen,\n            highlightedIndex = _this$getState7.highlightedIndex;\n          if (isOpen) {\n            if (_this.getItemCount() > 0 && typeof highlightedIndex === 'number') {\n              _this.setHighlightedIndex(highlightedIndex, otherStateToSet);\n            }\n          }\n          cbToCb(cb)();\n        });\n      };\n      _this.openMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: true\n        }, cb);\n      };\n      _this.closeMenu = function (cb) {\n        _this.internalSetState({\n          isOpen: false\n        }, cb);\n      };\n      _this.updateStatus = debounce(function () {\n        var state = _this.getState();\n        var item = _this.items[state.highlightedIndex];\n        var resultCount = _this.getItemCount();\n        var status = _this.props.getA11yStatusMessage(_extends({\n          itemToString: _this.props.itemToString,\n          previousResultCount: _this.previousResultCount,\n          resultCount: resultCount,\n          highlightedItem: item\n        }, state));\n        _this.previousResultCount = resultCount;\n        setStatus(status, _this.props.environment.document);\n      }, 200);\n      var _this$props = _this.props,\n        defaultHighlightedIndex = _this$props.defaultHighlightedIndex,\n        _this$props$initialHi = _this$props.initialHighlightedIndex,\n        _highlightedIndex = _this$props$initialHi === void 0 ? defaultHighlightedIndex : _this$props$initialHi,\n        defaultIsOpen = _this$props.defaultIsOpen,\n        _this$props$initialIs = _this$props.initialIsOpen,\n        _isOpen = _this$props$initialIs === void 0 ? defaultIsOpen : _this$props$initialIs,\n        _this$props$initialIn = _this$props.initialInputValue,\n        _inputValue = _this$props$initialIn === void 0 ? '' : _this$props$initialIn,\n        _this$props$initialSe = _this$props.initialSelectedItem,\n        _selectedItem = _this$props$initialSe === void 0 ? null : _this$props$initialSe;\n      var _state = _this.getState({\n        highlightedIndex: _highlightedIndex,\n        isOpen: _isOpen,\n        inputValue: _inputValue,\n        selectedItem: _selectedItem\n      });\n      if (_state.selectedItem != null && _this.props.initialInputValue === undefined) {\n        _state.inputValue = _this.props.itemToString(_state.selectedItem);\n      }\n      _this.state = _state;\n      return _this;\n    }\n    var _proto = Downshift.prototype;\n    /**\n     * Clear all running timeouts\n     */\n    _proto.internalClearTimeouts = function internalClearTimeouts() {\n      this.timeoutIds.forEach(function (id) {\n        clearTimeout(id);\n      });\n      this.timeoutIds = [];\n    }\n\n    /**\n     * Gets the state based on internal state or props\n     * If a state value is passed via props, then that\n     * is the value given, otherwise it's retrieved from\n     * stateToMerge\n     *\n     * @param {Object} stateToMerge defaults to this.state\n     * @return {Object} the state\n     */;\n    _proto.getState = function getState$1(stateToMerge) {\n      if (stateToMerge === void 0) {\n        stateToMerge = this.state;\n      }\n      return getState(stateToMerge, this.props);\n    };\n    _proto.getItemCount = function getItemCount() {\n      // things read better this way. They're in priority order:\n      // 1. `this.itemCount`\n      // 2. `this.props.itemCount`\n      // 3. `this.items.length`\n      var itemCount = this.items.length;\n      if (this.itemCount != null) {\n        itemCount = this.itemCount;\n      } else if (this.props.itemCount !== undefined) {\n        itemCount = this.props.itemCount;\n      }\n      return itemCount;\n    };\n    _proto.getItemNodeFromIndex = function getItemNodeFromIndex(index) {\n      return this.props.environment.document.getElementById(this.getItemId(index));\n    };\n    _proto.scrollHighlightedItemIntoView = function scrollHighlightedItemIntoView() {\n      /* istanbul ignore else (react-native) */\n      {\n        var node = this.getItemNodeFromIndex(this.getState().highlightedIndex);\n        this.props.scrollIntoView(node, this._menuNode);\n      }\n    };\n    _proto.moveHighlightedIndex = function moveHighlightedIndex(amount, otherStateToSet) {\n      var _this6 = this;\n      var itemCount = this.getItemCount();\n      var _this$getState8 = this.getState(),\n        highlightedIndex = _this$getState8.highlightedIndex;\n      if (itemCount > 0) {\n        var nextHighlightedIndex = getNextWrappingIndex(amount, highlightedIndex, itemCount, function (index) {\n          return _this6.getItemNodeFromIndex(index);\n        });\n        this.setHighlightedIndex(nextHighlightedIndex, otherStateToSet);\n      }\n    };\n    _proto.getStateAndHelpers = function getStateAndHelpers() {\n      var _this$getState9 = this.getState(),\n        highlightedIndex = _this$getState9.highlightedIndex,\n        inputValue = _this$getState9.inputValue,\n        selectedItem = _this$getState9.selectedItem,\n        isOpen = _this$getState9.isOpen;\n      var itemToString = this.props.itemToString;\n      var id = this.id;\n      var getRootProps = this.getRootProps,\n        getToggleButtonProps = this.getToggleButtonProps,\n        getLabelProps = this.getLabelProps,\n        getMenuProps = this.getMenuProps,\n        getInputProps = this.getInputProps,\n        getItemProps = this.getItemProps,\n        openMenu = this.openMenu,\n        closeMenu = this.closeMenu,\n        toggleMenu = this.toggleMenu,\n        selectItem = this.selectItem,\n        selectItemAtIndex = this.selectItemAtIndex,\n        selectHighlightedItem = this.selectHighlightedItem,\n        setHighlightedIndex = this.setHighlightedIndex,\n        clearSelection = this.clearSelection,\n        clearItems = this.clearItems,\n        reset = this.reset,\n        setItemCount = this.setItemCount,\n        unsetItemCount = this.unsetItemCount,\n        setState = this.internalSetState;\n      return {\n        // prop getters\n        getRootProps: getRootProps,\n        getToggleButtonProps: getToggleButtonProps,\n        getLabelProps: getLabelProps,\n        getMenuProps: getMenuProps,\n        getInputProps: getInputProps,\n        getItemProps: getItemProps,\n        // actions\n        reset: reset,\n        openMenu: openMenu,\n        closeMenu: closeMenu,\n        toggleMenu: toggleMenu,\n        selectItem: selectItem,\n        selectItemAtIndex: selectItemAtIndex,\n        selectHighlightedItem: selectHighlightedItem,\n        setHighlightedIndex: setHighlightedIndex,\n        clearSelection: clearSelection,\n        clearItems: clearItems,\n        setItemCount: setItemCount,\n        unsetItemCount: unsetItemCount,\n        setState: setState,\n        // props\n        itemToString: itemToString,\n        // derived\n        id: id,\n        // state\n        highlightedIndex: highlightedIndex,\n        inputValue: inputValue,\n        isOpen: isOpen,\n        selectedItem: selectedItem\n      };\n    };\n    _proto.componentDidMount = function componentDidMount() {\n      var _this7 = this;\n      /* istanbul ignore if (react-native) */\n      if (process.env.NODE_ENV !== 'production' && !false && this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n        validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n      }\n\n      /* istanbul ignore if (react-native) */\n      {\n        // this.isMouseDown helps us track whether the mouse is currently held down.\n        // This is useful when the user clicks on an item in the list, but holds the mouse\n        // down long enough for the list to disappear (because the blur event fires on the input)\n        // this.isMouseDown is used in the blur handler on the input to determine whether the blur event should\n        // trigger hiding the menu.\n        var onMouseDown = function onMouseDown() {\n          _this7.isMouseDown = true;\n        };\n        var onMouseUp = function onMouseUp(event) {\n          _this7.isMouseDown = false;\n          // if the target element or the activeElement is within a downshift node\n          // then we don't want to reset downshift\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment);\n          if (!contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: mouseUp\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n        // Touching an element in iOS gives focus and hover states, but touching out of\n        // the element will remove hover, and persist the focus state, resulting in the\n        // blur event not being triggered.\n        // this.isTouchMove helps us track whether the user is tapping or swiping on a touch screen.\n        // If the user taps outside of Downshift, the component should be reset,\n        // but not if the user is swiping\n        var onTouchStart = function onTouchStart() {\n          _this7.isTouchMove = false;\n        };\n        var onTouchMove = function onTouchMove() {\n          _this7.isTouchMove = true;\n        };\n        var onTouchEnd = function onTouchEnd(event) {\n          var contextWithinDownshift = targetWithinDownshift(event.target, [_this7._rootNode, _this7._menuNode], _this7.props.environment, false);\n          if (!_this7.isTouchMove && !contextWithinDownshift && _this7.getState().isOpen) {\n            _this7.reset({\n              type: touchEnd\n            }, function () {\n              return _this7.props.onOuterClick(_this7.getStateAndHelpers());\n            });\n          }\n        };\n        var environment = this.props.environment;\n        environment.addEventListener('mousedown', onMouseDown);\n        environment.addEventListener('mouseup', onMouseUp);\n        environment.addEventListener('touchstart', onTouchStart);\n        environment.addEventListener('touchmove', onTouchMove);\n        environment.addEventListener('touchend', onTouchEnd);\n        this.cleanup = function () {\n          _this7.internalClearTimeouts();\n          _this7.updateStatus.cancel();\n          environment.removeEventListener('mousedown', onMouseDown);\n          environment.removeEventListener('mouseup', onMouseUp);\n          environment.removeEventListener('touchstart', onTouchStart);\n          environment.removeEventListener('touchmove', onTouchMove);\n          environment.removeEventListener('touchend', onTouchEnd);\n        };\n      }\n    };\n    _proto.shouldScroll = function shouldScroll(prevState, prevProps) {\n      var _ref10 = this.props.highlightedIndex === undefined ? this.getState() : this.props,\n        currentHighlightedIndex = _ref10.highlightedIndex;\n      var _ref11 = prevProps.highlightedIndex === undefined ? prevState : prevProps,\n        prevHighlightedIndex = _ref11.highlightedIndex;\n      var scrollWhenOpen = currentHighlightedIndex && this.getState().isOpen && !prevState.isOpen;\n      var scrollWhenNavigating = currentHighlightedIndex !== prevHighlightedIndex;\n      return scrollWhenOpen || scrollWhenNavigating;\n    };\n    _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n      if (process.env.NODE_ENV !== 'production') {\n        validateControlledUnchanged(this.state, prevProps, this.props);\n        /* istanbul ignore if (react-native) */\n        if (this.getMenuProps.called && !this.getMenuProps.suppressRefError) {\n          validateGetMenuPropsCalledCorrectly(this._menuNode, this.getMenuProps);\n        }\n      }\n      if (isControlledProp(this.props, 'selectedItem') && this.props.selectedItemChanged(prevProps.selectedItem, this.props.selectedItem)) {\n        this.internalSetState({\n          type: controlledPropUpdatedSelectedItem,\n          inputValue: this.props.itemToString(this.props.selectedItem)\n        });\n      }\n      if (!this.avoidScrolling && this.shouldScroll(prevState, prevProps)) {\n        this.scrollHighlightedItemIntoView();\n      }\n\n      /* istanbul ignore else (react-native) */\n      {\n        this.updateStatus();\n      }\n    };\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      this.cleanup(); // avoids memory leak\n    };\n    _proto.render = function render() {\n      var children = unwrapArray(this.props.children, noop);\n      // because the items are rerendered every time we call the children\n      // we clear this out each render and it will be populated again as\n      // getItemProps is called.\n      this.clearItems();\n      // we reset this so we know whether the user calls getRootProps during\n      // this render. If they do then we don't need to do anything,\n      // if they don't then we need to clone the element they return and\n      // apply the props for them.\n      this.getRootProps.called = false;\n      this.getRootProps.refKey = undefined;\n      this.getRootProps.suppressRefError = undefined;\n      // we do something similar for getMenuProps\n      this.getMenuProps.called = false;\n      this.getMenuProps.refKey = undefined;\n      this.getMenuProps.suppressRefError = undefined;\n      // we do something similar for getLabelProps\n      this.getLabelProps.called = false;\n      // and something similar for getInputProps\n      this.getInputProps.called = false;\n      var element = unwrapArray(children(this.getStateAndHelpers()));\n      if (!element) {\n        return null;\n      }\n      if (this.getRootProps.called || this.props.suppressRefError) {\n        if (process.env.NODE_ENV !== 'production' && !this.getRootProps.suppressRefError && !this.props.suppressRefError) {\n          validateGetRootPropsCalledCorrectly(element, this.getRootProps);\n        }\n        return element;\n      } else if (isDOMElement(element)) {\n        // they didn't apply the root props, but we can clone\n        // this and apply the props ourselves\n        return /*#__PURE__*/cloneElement(element, this.getRootProps(getElementProps(element)));\n      }\n\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        // they didn't apply the root props, but they need to\n        // otherwise we can't query around the autocomplete\n\n        throw new Error('downshift: If you return a non-DOM element, you must apply the getRootProps function');\n      }\n\n      /* istanbul ignore next */\n      return undefined;\n    };\n    return Downshift;\n  }(Component);\n  Downshift.defaultProps = {\n    defaultHighlightedIndex: null,\n    defaultIsOpen: false,\n    getA11yStatusMessage: getA11yStatusMessage$1,\n    itemToString: function itemToString(i) {\n      if (i == null) {\n        return '';\n      }\n      if (process.env.NODE_ENV !== 'production' && isPlainObject(i) && !i.hasOwnProperty('toString')) {\n        // eslint-disable-next-line no-console\n        console.warn('downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.', 'The object that was passed:', i);\n      }\n      return String(i);\n    },\n    onStateChange: noop,\n    onInputValueChange: noop,\n    onUserAction: noop,\n    onChange: noop,\n    onSelect: noop,\n    onOuterClick: noop,\n    selectedItemChanged: function selectedItemChanged(prevItem, item) {\n      return prevItem !== item;\n    },\n    environment: /* istanbul ignore next (ssr) */\n    typeof window === 'undefined' ? {} : window,\n    stateReducer: function stateReducer(state, stateToSet) {\n      return stateToSet;\n    },\n    suppressRefError: false,\n    scrollIntoView: scrollIntoView\n  };\n  Downshift.stateChangeTypes = stateChangeTypes$3;\n  return Downshift;\n}();\nprocess.env.NODE_ENV !== \"production\" ? Downshift.propTypes = {\n  children: PropTypes.func,\n  defaultHighlightedIndex: PropTypes.number,\n  defaultIsOpen: PropTypes.bool,\n  initialHighlightedIndex: PropTypes.number,\n  initialSelectedItem: PropTypes.any,\n  initialInputValue: PropTypes.string,\n  initialIsOpen: PropTypes.bool,\n  getA11yStatusMessage: PropTypes.func,\n  itemToString: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  onUserAction: PropTypes.func,\n  onOuterClick: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  stateReducer: PropTypes.func,\n  itemCount: PropTypes.number,\n  id: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  }),\n  suppressRefError: PropTypes.bool,\n  scrollIntoView: PropTypes.func,\n  // things we keep in state for uncontrolled components\n  // but can accept as props for controlled components\n  /* eslint-disable react/no-unused-prop-types */\n  selectedItem: PropTypes.any,\n  isOpen: PropTypes.bool,\n  inputValue: PropTypes.string,\n  highlightedIndex: PropTypes.number,\n  labelId: PropTypes.string,\n  inputId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func\n  /* eslint-enable react/no-unused-prop-types */\n} : void 0;\nvar Downshift$1 = Downshift;\nfunction validateGetMenuPropsCalledCorrectly(node, _ref12) {\n  var refKey = _ref12.refKey;\n  if (!node) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from getMenuProps was not applied correctly on your menu element.\");\n  }\n}\nfunction validateGetRootPropsCalledCorrectly(element, _ref13) {\n  var refKey = _ref13.refKey;\n  var refKeySpecified = refKey !== 'ref';\n  var isComposite = !isDOMElement(element);\n  if (isComposite && !refKeySpecified && !isForwardRef(element)) {\n    // eslint-disable-next-line no-console\n    console.error('downshift: You returned a non-DOM element. You must specify a refKey in getRootProps');\n  } else if (!isComposite && refKeySpecified) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified \\\"\" + refKey + \"\\\"\");\n  }\n  if (!isForwardRef(element) && !getElementProps(element)[refKey]) {\n    // eslint-disable-next-line no-console\n    console.error(\"downshift: You must apply the ref prop \\\"\" + refKey + \"\\\" from getRootProps onto your root element.\");\n  }\n}\n\nvar _excluded$3 = [\"isInitialMount\", \"highlightedIndex\", \"items\", \"environment\"];\nvar dropdownDefaultStateValues = {\n  highlightedIndex: -1,\n  isOpen: false,\n  selectedItem: null,\n  inputValue: ''\n};\nfunction callOnChangeProps(action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var changes = {};\n  Object.keys(state).forEach(function (key) {\n    invokeOnChangeHandler(key, action, state, newState);\n    if (newState[key] !== state[key]) {\n      changes[key] = newState[key];\n    }\n  });\n  if (props.onStateChange && Object.keys(changes).length) {\n    props.onStateChange(_extends({\n      type: type\n    }, changes));\n  }\n}\nfunction invokeOnChangeHandler(key, action, state, newState) {\n  var props = action.props,\n    type = action.type;\n  var handler = \"on\" + capitalizeString(key) + \"Change\";\n  if (props[handler] && newState[key] !== undefined && newState[key] !== state[key]) {\n    props[handler](_extends({\n      type: type\n    }, newState));\n  }\n}\n\n/**\n * Default state reducer that returns the changes.\n *\n * @param {Object} s state.\n * @param {Object} a action with changes.\n * @returns {Object} changes.\n */\nfunction stateReducer(s, a) {\n  return a.changes;\n}\n\n/**\n * Returns a message to be added to aria-live region when item is selected.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\nfunction getA11ySelectionMessage(selectionParameters) {\n  var selectedItem = selectionParameters.selectedItem,\n    itemToStringLocal = selectionParameters.itemToString;\n  return selectedItem ? itemToStringLocal(selectedItem) + \" has been selected.\" : '';\n}\n\n/**\n * Debounced call for updating the a11y message.\n */\nvar updateA11yStatus = debounce(function (getA11yMessage, document) {\n  setStatus(getA11yMessage(), document);\n}, 200);\n\n// istanbul ignore next\nvar useIsomorphicLayoutEffect = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined' ? useLayoutEffect : useEffect;\nfunction useElementIds(_ref) {\n  var _ref$id = _ref.id,\n    id = _ref$id === void 0 ? \"downshift-\" + generateId() : _ref$id,\n    labelId = _ref.labelId,\n    menuId = _ref.menuId,\n    getItemId = _ref.getItemId,\n    toggleButtonId = _ref.toggleButtonId,\n    inputId = _ref.inputId;\n  var elementIdsRef = useRef({\n    labelId: labelId || id + \"-label\",\n    menuId: menuId || id + \"-menu\",\n    getItemId: getItemId || function (index) {\n      return id + \"-item-\" + index;\n    },\n    toggleButtonId: toggleButtonId || id + \"-toggle-button\",\n    inputId: inputId || id + \"-input\"\n  });\n  return elementIdsRef.current;\n}\nfunction getItemAndIndex(itemProp, indexProp, items, errorMessage) {\n  var item, index;\n  if (itemProp === undefined) {\n    if (indexProp === undefined) {\n      throw new Error(errorMessage);\n    }\n    item = items[indexProp];\n    index = indexProp;\n  } else {\n    index = indexProp === undefined ? items.indexOf(itemProp) : indexProp;\n    item = itemProp;\n  }\n  return [item, index];\n}\nfunction itemToString(item) {\n  return item ? String(item) : '';\n}\nfunction isAcceptedCharacterKey(key) {\n  return /^\\S{1}$/.test(key);\n}\nfunction capitalizeString(string) {\n  return \"\" + string.slice(0, 1).toUpperCase() + string.slice(1);\n}\nfunction useLatestRef(val) {\n  var ref = useRef(val);\n  // technically this is not \"concurrent mode safe\" because we're manipulating\n  // the value during render (so it's not idempotent). However, the places this\n  // hook is used is to support memoizing callbacks which will be called\n  // *during* render, so we need the latest values *during* render.\n  // If not for this, then we'd probably want to use useLayoutEffect instead.\n  ref.current = val;\n  return ref;\n}\n\n/**\n * Computes the controlled state using a the previous state, props,\n * two reducers, one from downshift and an optional one from the user.\n * Also calls the onChange handlers for state values that have changed.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useEnhancedReducer(reducer, initialState, props) {\n  var prevStateRef = useRef();\n  var actionRef = useRef();\n  var enhancedReducer = useCallback(function (state, action) {\n    actionRef.current = action;\n    state = getState(state, action.props);\n    var changes = reducer(state, action);\n    var newState = action.props.stateReducer(state, _extends({}, action, {\n      changes: changes\n    }));\n    return newState;\n  }, [reducer]);\n  var _useReducer = useReducer(enhancedReducer, initialState),\n    state = _useReducer[0],\n    dispatch = _useReducer[1];\n  var propsRef = useLatestRef(props);\n  var dispatchWithProps = useCallback(function (action) {\n    return dispatch(_extends({\n      props: propsRef.current\n    }, action));\n  }, [propsRef]);\n  var action = actionRef.current;\n  useEffect(function () {\n    if (action && prevStateRef.current && prevStateRef.current !== state) {\n      callOnChangeProps(action, getState(prevStateRef.current, action.props), state);\n    }\n    prevStateRef.current = state;\n  }, [state, props, action]);\n  return [state, dispatchWithProps];\n}\n\n/**\n * Wraps the useEnhancedReducer and applies the controlled prop values before\n * returning the new state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer$1(reducer, initialState, props) {\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n  return [getState(state, props), dispatch];\n}\nvar defaultProps$3 = {\n  itemToString: itemToString,\n  stateReducer: stateReducer,\n  getA11ySelectionMessage: getA11ySelectionMessage,\n  scrollIntoView: scrollIntoView,\n  environment: /* istanbul ignore next (ssr) */\n  typeof window === 'undefined' ? {} : window\n};\nfunction getDefaultValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var defaultValue = props[\"default\" + capitalizeString(propKey)];\n  if (defaultValue !== undefined) {\n    return defaultValue;\n  }\n  return defaultStateValues[propKey];\n}\nfunction getInitialValue$1(props, propKey, defaultStateValues) {\n  if (defaultStateValues === void 0) {\n    defaultStateValues = dropdownDefaultStateValues;\n  }\n  var value = props[propKey];\n  if (value !== undefined) {\n    return value;\n  }\n  var initialValue = props[\"initial\" + capitalizeString(propKey)];\n  if (initialValue !== undefined) {\n    return initialValue;\n  }\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\nfunction getInitialState$2(props) {\n  var selectedItem = getInitialValue$1(props, 'selectedItem');\n  var isOpen = getInitialValue$1(props, 'isOpen');\n  var highlightedIndex = getInitialValue$1(props, 'highlightedIndex');\n  var inputValue = getInitialValue$1(props, 'inputValue');\n  return {\n    highlightedIndex: highlightedIndex < 0 && selectedItem && isOpen ? props.items.indexOf(selectedItem) : highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\nfunction getHighlightedIndexOnOpen(props, state, offset) {\n  var items = props.items,\n    initialHighlightedIndex = props.initialHighlightedIndex,\n    defaultHighlightedIndex = props.defaultHighlightedIndex;\n  var selectedItem = state.selectedItem,\n    highlightedIndex = state.highlightedIndex;\n  if (items.length === 0) {\n    return -1;\n  }\n\n  // initialHighlightedIndex will give value to highlightedIndex on initial state only.\n  if (initialHighlightedIndex !== undefined && highlightedIndex === initialHighlightedIndex) {\n    return initialHighlightedIndex;\n  }\n  if (defaultHighlightedIndex !== undefined) {\n    return defaultHighlightedIndex;\n  }\n  if (selectedItem) {\n    return items.indexOf(selectedItem);\n  }\n  if (offset === 0) {\n    return -1;\n  }\n  return offset < 0 ? items.length - 1 : 0;\n}\n\n/**\n * Reuse the movement tracking of mouse and touch events.\n *\n * @param {boolean} isOpen Whether the dropdown is open or not.\n * @param {Array<Object>} downshiftElementRefs Downshift element refs to track movement (toggleButton, menu etc.)\n * @param {Object} environment Environment where component/hook exists.\n * @param {Function} handleBlur Handler on blur from mouse or touch.\n * @returns {Object} Ref containing whether mouseDown or touchMove event is happening\n */\nfunction useMouseAndTouchTracker(isOpen, downshiftElementRefs, environment, handleBlur) {\n  var mouseAndTouchTrackersRef = useRef({\n    isMouseDown: false,\n    isTouchMove: false\n  });\n  useEffect(function () {\n    if ((environment == null ? void 0 : environment.addEventListener) == null) {\n      return;\n    }\n\n    // The same strategy for checking if a click occurred inside or outside downshift\n    // as in downshift.js.\n    var onMouseDown = function onMouseDown() {\n      mouseAndTouchTrackersRef.current.isMouseDown = true;\n    };\n    var onMouseUp = function onMouseUp(event) {\n      mouseAndTouchTrackersRef.current.isMouseDown = false;\n      if (isOpen && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment)) {\n        handleBlur();\n      }\n    };\n    var onTouchStart = function onTouchStart() {\n      mouseAndTouchTrackersRef.current.isTouchMove = false;\n    };\n    var onTouchMove = function onTouchMove() {\n      mouseAndTouchTrackersRef.current.isTouchMove = true;\n    };\n    var onTouchEnd = function onTouchEnd(event) {\n      if (isOpen && !mouseAndTouchTrackersRef.current.isTouchMove && !targetWithinDownshift(event.target, downshiftElementRefs.map(function (ref) {\n        return ref.current;\n      }), environment, false)) {\n        handleBlur();\n      }\n    };\n    environment.addEventListener('mousedown', onMouseDown);\n    environment.addEventListener('mouseup', onMouseUp);\n    environment.addEventListener('touchstart', onTouchStart);\n    environment.addEventListener('touchmove', onTouchMove);\n    environment.addEventListener('touchend', onTouchEnd);\n\n    // eslint-disable-next-line consistent-return\n    return function cleanup() {\n      environment.removeEventListener('mousedown', onMouseDown);\n      environment.removeEventListener('mouseup', onMouseUp);\n      environment.removeEventListener('touchstart', onTouchStart);\n      environment.removeEventListener('touchmove', onTouchMove);\n      environment.removeEventListener('touchend', onTouchEnd);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isOpen, environment]);\n  return mouseAndTouchTrackersRef;\n}\n\n/* istanbul ignore next */\n// eslint-disable-next-line import/no-mutable-exports\nvar useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n  return noop;\n};\n/**\n * Custom hook that checks if getter props are called correctly.\n *\n * @param  {...any} propKeys Getter prop names to be handled.\n * @returns {Function} Setter function called inside getter props to set call information.\n */\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useGetterPropsCalledChecker = function useGetterPropsCalledChecker() {\n    var isInitialMountRef = useRef(true);\n    for (var _len = arguments.length, propKeys = new Array(_len), _key = 0; _key < _len; _key++) {\n      propKeys[_key] = arguments[_key];\n    }\n    var getterPropsCalledRef = useRef(propKeys.reduce(function (acc, propKey) {\n      acc[propKey] = {};\n      return acc;\n    }, {}));\n    useEffect(function () {\n      Object.keys(getterPropsCalledRef.current).forEach(function (propKey) {\n        var propCallInfo = getterPropsCalledRef.current[propKey];\n        if (isInitialMountRef.current) {\n          if (!Object.keys(propCallInfo).length) {\n            // eslint-disable-next-line no-console\n            console.error(\"downshift: You forgot to call the \" + propKey + \" getter function on your component / element.\");\n            return;\n          }\n        }\n        var suppressRefError = propCallInfo.suppressRefError,\n          refKey = propCallInfo.refKey,\n          elementRef = propCallInfo.elementRef;\n        if ((!elementRef || !elementRef.current) && !suppressRefError) {\n          // eslint-disable-next-line no-console\n          console.error(\"downshift: The ref prop \\\"\" + refKey + \"\\\" from \" + propKey + \" was not applied correctly on your element.\");\n        }\n      });\n      isInitialMountRef.current = false;\n    });\n    var setGetterPropCallInfo = useCallback(function (propKey, suppressRefError, refKey, elementRef) {\n      getterPropsCalledRef.current[propKey] = {\n        suppressRefError: suppressRefError,\n        refKey: refKey,\n        elementRef: elementRef\n      };\n    }, []);\n    return setGetterPropCallInfo;\n  };\n}\nfunction useA11yMessageSetter(getA11yMessage, dependencyArray, _ref2) {\n  var isInitialMount = _ref2.isInitialMount,\n    highlightedIndex = _ref2.highlightedIndex,\n    items = _ref2.items,\n    environment = _ref2.environment,\n    rest = _objectWithoutPropertiesLoose(_ref2, _excluded$3);\n  // Sets a11y status message on changes in state.\n  useEffect(function () {\n    if (isInitialMount || false) {\n      return;\n    }\n    updateA11yStatus(function () {\n      return getA11yMessage(_extends({\n        highlightedIndex: highlightedIndex,\n        highlightedItem: items[highlightedIndex],\n        resultCount: items.length\n      }, rest));\n    }, environment.document);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencyArray);\n}\nfunction useScrollIntoView(_ref3) {\n  var highlightedIndex = _ref3.highlightedIndex,\n    isOpen = _ref3.isOpen,\n    itemRefs = _ref3.itemRefs,\n    getItemNodeFromIndex = _ref3.getItemNodeFromIndex,\n    menuElement = _ref3.menuElement,\n    scrollIntoViewProp = _ref3.scrollIntoView;\n  // used not to scroll on highlight by mouse.\n  var shouldScrollRef = useRef(true);\n  // Scroll on highlighted item if change comes from keyboard.\n  useIsomorphicLayoutEffect(function () {\n    if (highlightedIndex < 0 || !isOpen || !Object.keys(itemRefs.current).length) {\n      return;\n    }\n    if (shouldScrollRef.current === false) {\n      shouldScrollRef.current = true;\n    } else {\n      scrollIntoViewProp(getItemNodeFromIndex(highlightedIndex), menuElement);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [highlightedIndex]);\n  return shouldScrollRef;\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar useControlPropsValidator = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  useControlPropsValidator = function useControlPropsValidator(_ref4) {\n    var isInitialMount = _ref4.isInitialMount,\n      props = _ref4.props,\n      state = _ref4.state;\n    // used for checking when props are moving from controlled to uncontrolled.\n    var prevPropsRef = useRef(props);\n    useEffect(function () {\n      if (isInitialMount) {\n        return;\n      }\n      validateControlledUnchanged(state, prevPropsRef.current, props);\n      prevPropsRef.current = props;\n    }, [state, props, isInitialMount]);\n  };\n}\n\n/**\n * Handles selection on Enter / Alt + ArrowUp. Closes the menu and resets the highlighted index, unless there is a highlighted.\n * In that case, selects the item and resets to defaults for open state and highlighted idex.\n * @param {Object} props The useCombobox props.\n * @param {number} highlightedIndex The index from the state.\n * @param {boolean} inputValue Also return the input value for state.\n * @returns The changes for the state.\n */\nfunction getChangesOnSelection(props, highlightedIndex, inputValue) {\n  var _props$items;\n  if (inputValue === void 0) {\n    inputValue = true;\n  }\n  var shouldSelect = ((_props$items = props.items) == null ? void 0 : _props$items.length) && highlightedIndex >= 0;\n  return _extends({\n    isOpen: false,\n    highlightedIndex: -1\n  }, shouldSelect && _extends({\n    selectedItem: props.items[highlightedIndex],\n    isOpen: getDefaultValue$1(props, 'isOpen'),\n    highlightedIndex: getDefaultValue$1(props, 'highlightedIndex')\n  }, inputValue && {\n    inputValue: props.itemToString(props.items[highlightedIndex])\n  }));\n}\n\nfunction downshiftCommonReducer(state, action, stateChangeTypes) {\n  var type = action.type,\n    props = action.props;\n  var changes;\n  switch (type) {\n    case stateChangeTypes.ItemMouseMove:\n      changes = {\n        highlightedIndex: action.disabled ? -1 : action.index\n      };\n      break;\n    case stateChangeTypes.MenuMouseLeave:\n      changes = {\n        highlightedIndex: -1\n      };\n      break;\n    case stateChangeTypes.ToggleButtonClick:\n    case stateChangeTypes.FunctionToggleMenu:\n      changes = {\n        isOpen: !state.isOpen,\n        highlightedIndex: state.isOpen ? -1 : getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionOpenMenu:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case stateChangeTypes.FunctionCloseMenu:\n      changes = {\n        isOpen: false\n      };\n      break;\n    case stateChangeTypes.FunctionSetHighlightedIndex:\n      changes = {\n        highlightedIndex: action.highlightedIndex\n      };\n      break;\n    case stateChangeTypes.FunctionSetInputValue:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    case stateChangeTypes.FunctionReset:\n      changes = {\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        selectedItem: getDefaultValue$1(props, 'selectedItem'),\n        inputValue: getDefaultValue$1(props, 'inputValue')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nfunction getItemIndexByCharacterKey(_a) {\n    var keysSoFar = _a.keysSoFar, highlightedIndex = _a.highlightedIndex, items = _a.items, itemToString = _a.itemToString, getItemNodeFromIndex = _a.getItemNodeFromIndex;\n    var lowerCasedKeysSoFar = keysSoFar.toLowerCase();\n    for (var index = 0; index < items.length; index++) {\n        // if we already have a search query in progress, we also consider the current highlighted item.\n        var offsetIndex = (index + highlightedIndex + (keysSoFar.length < 2 ? 1 : 0)) % items.length;\n        var item = items[offsetIndex];\n        if (item !== undefined &&\n            itemToString(item).toLowerCase().startsWith(lowerCasedKeysSoFar)) {\n            var element = getItemNodeFromIndex(offsetIndex);\n            if (!(element === null || element === void 0 ? void 0 : element.hasAttribute('disabled'))) {\n                return offsetIndex;\n            }\n        }\n    }\n    return highlightedIndex;\n}\nvar propTypes$2 = {\n    items: PropTypes.array.isRequired,\n    itemToString: PropTypes.func,\n    getA11yStatusMessage: PropTypes.func,\n    getA11ySelectionMessage: PropTypes.func,\n    highlightedIndex: PropTypes.number,\n    defaultHighlightedIndex: PropTypes.number,\n    initialHighlightedIndex: PropTypes.number,\n    isOpen: PropTypes.bool,\n    defaultIsOpen: PropTypes.bool,\n    initialIsOpen: PropTypes.bool,\n    selectedItem: PropTypes.any,\n    initialSelectedItem: PropTypes.any,\n    defaultSelectedItem: PropTypes.any,\n    id: PropTypes.string,\n    labelId: PropTypes.string,\n    menuId: PropTypes.string,\n    getItemId: PropTypes.func,\n    toggleButtonId: PropTypes.string,\n    stateReducer: PropTypes.func,\n    onSelectedItemChange: PropTypes.func,\n    onHighlightedIndexChange: PropTypes.func,\n    onStateChange: PropTypes.func,\n    onIsOpenChange: PropTypes.func,\n    environment: PropTypes.shape({\n        addEventListener: PropTypes.func,\n        removeEventListener: PropTypes.func,\n        document: PropTypes.shape({\n            getElementById: PropTypes.func,\n            activeElement: PropTypes.any,\n            body: PropTypes.any\n        })\n    })\n};\n/**\n * Default implementation for status message. Only added when menu is open.\n * Will specift if there are results in the list, and if so, how many,\n * and what keys are relevant.\n *\n * @param {Object} param the downshift state and other relevant properties\n * @return {String} the a11y status message\n */\nfunction getA11yStatusMessage(_a) {\n    var isOpen = _a.isOpen, resultCount = _a.resultCount, previousResultCount = _a.previousResultCount;\n    if (!isOpen) {\n        return '';\n    }\n    if (!resultCount) {\n        return 'No results are available.';\n    }\n    if (resultCount !== previousResultCount) {\n        return \"\".concat(resultCount, \" result\").concat(resultCount === 1 ? ' is' : 's are', \" available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.\");\n    }\n    return '';\n}\nvar defaultProps$2 = __assign(__assign({}, defaultProps$3), { getA11yStatusMessage: getA11yStatusMessage });\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$2 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n    validatePropTypes$2 = function (options, caller) {\n        PropTypes.checkPropTypes(propTypes$2, options, 'prop', caller.name);\n    };\n}\n\nvar ToggleButtonClick$1 = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 0;\nvar ToggleButtonKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_down__' : 1;\nvar ToggleButtonKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_arrow_up__' : 2;\nvar ToggleButtonKeyDownCharacter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_character__' : 3;\nvar ToggleButtonKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_escape__' : 4;\nvar ToggleButtonKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_home__' : 5;\nvar ToggleButtonKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_end__' : 6;\nvar ToggleButtonKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_enter__' : 7;\nvar ToggleButtonKeyDownSpaceButton = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_space_button__' : 8;\nvar ToggleButtonKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_up__' : 9;\nvar ToggleButtonKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__togglebutton_keydown_page_down__' : 10;\nvar ToggleButtonBlur = process.env.NODE_ENV !== \"production\" ? '__togglebutton_blur__' : 11;\nvar MenuMouseLeave$1 = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 12;\nvar ItemMouseMove$1 = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 13;\nvar ItemClick$1 = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 14;\nvar FunctionToggleMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu$1 = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem$1 = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue$1 = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$2 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\n\nvar stateChangeTypes$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ToggleButtonClick: ToggleButtonClick$1,\n  ToggleButtonKeyDownArrowDown: ToggleButtonKeyDownArrowDown,\n  ToggleButtonKeyDownArrowUp: ToggleButtonKeyDownArrowUp,\n  ToggleButtonKeyDownCharacter: ToggleButtonKeyDownCharacter,\n  ToggleButtonKeyDownEscape: ToggleButtonKeyDownEscape,\n  ToggleButtonKeyDownHome: ToggleButtonKeyDownHome,\n  ToggleButtonKeyDownEnd: ToggleButtonKeyDownEnd,\n  ToggleButtonKeyDownEnter: ToggleButtonKeyDownEnter,\n  ToggleButtonKeyDownSpaceButton: ToggleButtonKeyDownSpaceButton,\n  ToggleButtonKeyDownPageUp: ToggleButtonKeyDownPageUp,\n  ToggleButtonKeyDownPageDown: ToggleButtonKeyDownPageDown,\n  ToggleButtonBlur: ToggleButtonBlur,\n  MenuMouseLeave: MenuMouseLeave$1,\n  ItemMouseMove: ItemMouseMove$1,\n  ItemClick: ItemClick$1,\n  FunctionToggleMenu: FunctionToggleMenu$1,\n  FunctionOpenMenu: FunctionOpenMenu$1,\n  FunctionCloseMenu: FunctionCloseMenu$1,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex$1,\n  FunctionSelectItem: FunctionSelectItem$1,\n  FunctionSetInputValue: FunctionSetInputValue$1,\n  FunctionReset: FunctionReset$2\n});\n\n/* eslint-disable complexity */\nfunction downshiftSelectReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick$1:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index]\n      };\n      break;\n    case ToggleButtonKeyDownCharacter:\n      {\n        var lowercasedKey = action.key;\n        var inputValue = \"\" + state.inputValue + lowercasedKey;\n        var prevHighlightedIndex = !state.isOpen && state.selectedItem ? props.items.indexOf(state.selectedItem) : state.highlightedIndex;\n        var highlightedIndex = getItemIndexByCharacterKey({\n          keysSoFar: inputValue,\n          highlightedIndex: prevHighlightedIndex,\n          items: props.items,\n          itemToString: props.itemToString,\n          getItemNodeFromIndex: action.getItemNodeFromIndex\n        });\n        changes = {\n          inputValue: inputValue,\n          highlightedIndex: highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowDown:\n      {\n        var _highlightedIndex = state.isOpen ? getNextWrappingIndex(1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false) : altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1);\n        changes = {\n          highlightedIndex: _highlightedIndex,\n          isOpen: true\n        };\n      }\n      break;\n    case ToggleButtonKeyDownArrowUp:\n      if (state.isOpen && altKey) {\n        changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      } else {\n        var _highlightedIndex2 = state.isOpen ? getNextWrappingIndex(-1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false) : getHighlightedIndexOnOpen(props, state, -1);\n        changes = {\n          highlightedIndex: _highlightedIndex2,\n          isOpen: true\n        };\n      }\n      break;\n    // only triggered when menu is open.\n    case ToggleButtonKeyDownEnter:\n    case ToggleButtonKeyDownSpaceButton:\n      changes = getChangesOnSelection(props, state.highlightedIndex, false);\n      break;\n    case ToggleButtonKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false),\n        isOpen: true\n      };\n      break;\n    case ToggleButtonKeyDownPageUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(-10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case ToggleButtonKeyDownPageDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case ToggleButtonKeyDownEscape:\n      changes = {\n        isOpen: false,\n        highlightedIndex: -1\n      };\n      break;\n    case ToggleButtonBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && {\n        selectedItem: props.items[state.highlightedIndex]\n      });\n      break;\n    case FunctionSelectItem$1:\n      changes = {\n        selectedItem: action.selectedItem\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$2);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$2 = [\"onMouseLeave\", \"refKey\", \"onKeyDown\", \"onBlur\", \"ref\"],\n  _excluded2$2 = [\"onBlur\", \"onClick\", \"onPress\", \"onKeyDown\", \"refKey\", \"ref\"],\n  _excluded3$1 = [\"item\", \"index\", \"onMouseMove\", \"onClick\", \"onPress\", \"refKey\", \"ref\", \"disabled\"];\nuseSelect.stateChangeTypes = stateChangeTypes$2;\nfunction useSelect(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$2(userProps, useSelect);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$2, userProps);\n  var items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    itemToString = props.itemToString,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    getA11yStatusMessage = props.getA11yStatusMessage;\n  // Initial state depending on controlled props.\n  var initialState = getInitialState$2(props);\n  var _useControlledReducer = useControlledReducer$1(downshiftSelectReducer, initialState, props),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n\n  // Element efs.\n  var toggleButtonRef = useRef(null);\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  // used to keep the inputValue clearTimeout object between renders.\n  var clearTimeoutRef = useRef(null);\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  var isInitialMountRef = useRef(true);\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Some utils.\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Sets a11y status message on changes in state.\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Sets a11y status message on changes in selectedItem.\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n\n  // Sets cleanup for the keysSoFar callback, debounded after 500ms.\n  useEffect(function () {\n    // init the clean function here as we need access to dispatch.\n    clearTimeoutRef.current = debounce(function (outerDispatch) {\n      outerDispatch({\n        type: FunctionSetInputValue$1,\n        inputValue: ''\n      });\n    }, 500);\n\n    // Cancel any pending debounced calls on mount\n    return function () {\n      clearTimeoutRef.current.cancel();\n    };\n  }, []);\n\n  // Invokes the keysSoFar callback set up above.\n  useEffect(function () {\n    if (!inputValue) {\n      return;\n    }\n    clearTimeoutRef.current(dispatch);\n  }, [dispatch, inputValue]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    previousResultCountRef.current = items.length;\n  });\n  // Add mouse/touch events to document.\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: ToggleButtonBlur\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getMenuProps', 'getToggleButtonProps');\n  // Make initial ref false.\n  useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []);\n  // Reset itemRefs on close.\n  useEffect(function () {\n    if (!isOpen) {\n      itemRefs.current = {};\n    }\n  }, [isOpen]);\n\n  // Event handler functions.\n  var toggleButtonKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowDown,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          altKey: event.altKey\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownArrowUp,\n          getItemNodeFromIndex: getItemNodeFromIndex,\n          altKey: event.altKey\n        });\n      },\n      Home: function Home(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        event.preventDefault();\n        dispatch({\n          type: ToggleButtonKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape() {\n        if (latest.current.state.isOpen) {\n          dispatch({\n            type: ToggleButtonKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        event.preventDefault();\n        dispatch({\n          type: latest.current.state.isOpen ? ToggleButtonKeyDownEnter : ToggleButtonClick$1\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageUp,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: ToggleButtonKeyDownPageDown,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      },\n      ' ': function _(event) {\n        event.preventDefault();\n        var currentState = latest.current.state;\n        if (!currentState.isOpen) {\n          dispatch({\n            type: ToggleButtonClick$1\n          });\n          return;\n        }\n        if (currentState.inputValue) {\n          dispatch({\n            type: ToggleButtonKeyDownCharacter,\n            key: ' ',\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        } else {\n          dispatch({\n            type: ToggleButtonKeyDownSpaceButton\n          });\n        }\n      }\n    };\n  }, [dispatch, getItemNodeFromIndex, latest]);\n\n  // Action functions.\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu$1\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu$1\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu$1\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex$1,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem$1,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$2\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue$1,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  // Getter functions.\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.toggleButtonId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey;\n      _ref.onKeyDown;\n      _ref.onBlur;\n      var ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    var menuHandleMouseLeave = function menuHandleMouseLeave() {\n      dispatch({\n        type: MenuMouseLeave$1\n      });\n    };\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, menuHandleMouseLeave), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp3, _temp4) {\n    var _extends3;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      onBlur = _ref3.onBlur,\n      onClick = _ref3.onClick;\n      _ref3.onPress;\n      var onKeyDown = _ref3.onKeyDown,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$2);\n    var _ref4 = _temp4 === void 0 ? {} : _temp4,\n      _ref4$suppressRefErro = _ref4.suppressRefError,\n      suppressRefError = _ref4$suppressRefErro === void 0 ? false : _ref4$suppressRefErro;\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick$1\n      });\n    };\n    var toggleButtonHandleBlur = function toggleButtonHandleBlur() {\n      if (latestState.isOpen && !mouseAndTouchTrackersRef.current.isMouseDown) {\n        dispatch({\n          type: ToggleButtonBlur\n        });\n      }\n    };\n    var toggleButtonHandleKeyDown = function toggleButtonHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && toggleButtonKeyDownHandlers[key]) {\n        toggleButtonKeyDownHandlers[key](event);\n      } else if (isAcceptedCharacterKey(key)) {\n        dispatch({\n          type: ToggleButtonKeyDownCharacter,\n          key: key,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      }\n    };\n    var toggleProps = _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends3['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends3['aria-controls'] = elementIds.menuId, _extends3['aria-expanded'] = latest.current.state.isOpen, _extends3['aria-haspopup'] = 'listbox', _extends3['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends3.id = elementIds.toggleButtonId, _extends3.role = 'combobox', _extends3.tabIndex = 0, _extends3.onBlur = callAllEventHandlers(onBlur, toggleButtonHandleBlur), _extends3), rest);\n    if (!rest.disabled) {\n      /* istanbul ignore if (react-native) */\n      {\n        toggleProps.onClick = callAllEventHandlers(onClick, toggleButtonHandleClick);\n        toggleProps.onKeyDown = callAllEventHandlers(onKeyDown, toggleButtonHandleKeyDown);\n      }\n    }\n    setGetterPropCallInfo('getToggleButtonProps', suppressRefError, refKey, toggleButtonRef);\n    return toggleProps;\n  }, [latest, elementIds, setGetterPropCallInfo, dispatch, mouseAndTouchTrackersRef, toggleButtonKeyDownHandlers, getItemNodeFromIndex]);\n  var getItemProps = useCallback(function (_temp5) {\n    var _extends4;\n    var _ref5 = _temp5 === void 0 ? {} : _temp5,\n      itemProp = _ref5.item,\n      indexProp = _ref5.index,\n      onMouseMove = _ref5.onMouseMove,\n      onClick = _ref5.onClick;\n      _ref5.onPress;\n      var _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      disabled = _ref5.disabled,\n      rest = _objectWithoutPropertiesLoose(_ref5, _excluded3$1);\n    var _latest$current = latest.current,\n      latestState = _latest$current.state,\n      latestProps = _latest$current.props;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      item = _getItemAndIndex[0],\n      index = _getItemAndIndex[1];\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove$1,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick$1,\n        index: index\n      });\n    };\n    var itemProps = _extends((_extends4 = {\n      disabled: disabled,\n      role: 'option',\n      'aria-selected': \"\" + (item === selectedItem),\n      id: elementIds.getItemId(index)\n    }, _extends4[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends4), rest);\n    if (!disabled) {\n      /* istanbul ignore next (react-native) */\n      {\n        itemProps.onClick = callAllEventHandlers(onClick, itemHandleClick);\n      }\n    }\n    itemProps.onMouseMove = callAllEventHandlers(onMouseMove, itemHandleMouseMove);\n    return itemProps;\n  }, [latest, selectedItem, elementIds, shouldScrollRef, dispatch]);\n  return {\n    // prop getters.\n    getToggleButtonProps: getToggleButtonProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getItemProps: getItemProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    selectItem: selectItem,\n    reset: reset,\n    setInputValue: setInputValue,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar InputKeyDownArrowDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_down__' : 0;\nvar InputKeyDownArrowUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_arrow_up__' : 1;\nvar InputKeyDownEscape = process.env.NODE_ENV !== \"production\" ? '__input_keydown_escape__' : 2;\nvar InputKeyDownHome = process.env.NODE_ENV !== \"production\" ? '__input_keydown_home__' : 3;\nvar InputKeyDownEnd = process.env.NODE_ENV !== \"production\" ? '__input_keydown_end__' : 4;\nvar InputKeyDownPageUp = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_up__' : 5;\nvar InputKeyDownPageDown = process.env.NODE_ENV !== \"production\" ? '__input_keydown_page_down__' : 6;\nvar InputKeyDownEnter = process.env.NODE_ENV !== \"production\" ? '__input_keydown_enter__' : 7;\nvar InputChange = process.env.NODE_ENV !== \"production\" ? '__input_change__' : 8;\nvar InputBlur = process.env.NODE_ENV !== \"production\" ? '__input_blur__' : 9;\nvar InputFocus = process.env.NODE_ENV !== \"production\" ? '__input_focus__' : 10;\nvar MenuMouseLeave = process.env.NODE_ENV !== \"production\" ? '__menu_mouse_leave__' : 11;\nvar ItemMouseMove = process.env.NODE_ENV !== \"production\" ? '__item_mouse_move__' : 12;\nvar ItemClick = process.env.NODE_ENV !== \"production\" ? '__item_click__' : 13;\nvar ToggleButtonClick = process.env.NODE_ENV !== \"production\" ? '__togglebutton_click__' : 14;\nvar FunctionToggleMenu = process.env.NODE_ENV !== \"production\" ? '__function_toggle_menu__' : 15;\nvar FunctionOpenMenu = process.env.NODE_ENV !== \"production\" ? '__function_open_menu__' : 16;\nvar FunctionCloseMenu = process.env.NODE_ENV !== \"production\" ? '__function_close_menu__' : 17;\nvar FunctionSetHighlightedIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_highlighted_index__' : 18;\nvar FunctionSelectItem = process.env.NODE_ENV !== \"production\" ? '__function_select_item__' : 19;\nvar FunctionSetInputValue = process.env.NODE_ENV !== \"production\" ? '__function_set_input_value__' : 20;\nvar FunctionReset$1 = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 21;\nvar ControlledPropUpdatedSelectedItem = process.env.NODE_ENV !== \"production\" ? '__controlled_prop_updated_selected_item__' : 22;\n\nvar stateChangeTypes$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  InputKeyDownArrowDown: InputKeyDownArrowDown,\n  InputKeyDownArrowUp: InputKeyDownArrowUp,\n  InputKeyDownEscape: InputKeyDownEscape,\n  InputKeyDownHome: InputKeyDownHome,\n  InputKeyDownEnd: InputKeyDownEnd,\n  InputKeyDownPageUp: InputKeyDownPageUp,\n  InputKeyDownPageDown: InputKeyDownPageDown,\n  InputKeyDownEnter: InputKeyDownEnter,\n  InputChange: InputChange,\n  InputBlur: InputBlur,\n  InputFocus: InputFocus,\n  MenuMouseLeave: MenuMouseLeave,\n  ItemMouseMove: ItemMouseMove,\n  ItemClick: ItemClick,\n  ToggleButtonClick: ToggleButtonClick,\n  FunctionToggleMenu: FunctionToggleMenu,\n  FunctionOpenMenu: FunctionOpenMenu,\n  FunctionCloseMenu: FunctionCloseMenu,\n  FunctionSetHighlightedIndex: FunctionSetHighlightedIndex,\n  FunctionSelectItem: FunctionSelectItem,\n  FunctionSetInputValue: FunctionSetInputValue,\n  FunctionReset: FunctionReset$1,\n  ControlledPropUpdatedSelectedItem: ControlledPropUpdatedSelectedItem\n});\n\nfunction getInitialState$1(props) {\n  var initialState = getInitialState$2(props);\n  var selectedItem = initialState.selectedItem;\n  var inputValue = initialState.inputValue;\n  if (inputValue === '' && selectedItem && props.defaultInputValue === undefined && props.initialInputValue === undefined && props.inputValue === undefined) {\n    inputValue = props.itemToString(selectedItem);\n  }\n  return _extends({}, initialState, {\n    inputValue: inputValue\n  });\n}\nvar propTypes$1 = {\n  items: PropTypes.array.isRequired,\n  itemToString: PropTypes.func,\n  selectedItemChanged: PropTypes.func,\n  getA11yStatusMessage: PropTypes.func,\n  getA11ySelectionMessage: PropTypes.func,\n  highlightedIndex: PropTypes.number,\n  defaultHighlightedIndex: PropTypes.number,\n  initialHighlightedIndex: PropTypes.number,\n  isOpen: PropTypes.bool,\n  defaultIsOpen: PropTypes.bool,\n  initialIsOpen: PropTypes.bool,\n  selectedItem: PropTypes.any,\n  initialSelectedItem: PropTypes.any,\n  defaultSelectedItem: PropTypes.any,\n  inputValue: PropTypes.string,\n  defaultInputValue: PropTypes.string,\n  initialInputValue: PropTypes.string,\n  id: PropTypes.string,\n  labelId: PropTypes.string,\n  menuId: PropTypes.string,\n  getItemId: PropTypes.func,\n  inputId: PropTypes.string,\n  toggleButtonId: PropTypes.string,\n  stateReducer: PropTypes.func,\n  onSelectedItemChange: PropTypes.func,\n  onHighlightedIndexChange: PropTypes.func,\n  onStateChange: PropTypes.func,\n  onIsOpenChange: PropTypes.func,\n  onInputValueChange: PropTypes.func,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\n\n/**\n * The useCombobox version of useControlledReducer, which also\n * checks if the controlled prop selectedItem changed between\n * renders. If so, it will also update inputValue with its\n * string equivalent. It uses the common useEnhancedReducer to\n * compute the rest of the state.\n *\n * @param {Function} reducer Reducer function from downshift.\n * @param {Object} initialState Initial state of the hook.\n * @param {Object} props The hook props.\n * @returns {Array} An array with the state and an action dispatcher.\n */\nfunction useControlledReducer(reducer, initialState, props) {\n  var previousSelectedItemRef = useRef();\n  var _useEnhancedReducer = useEnhancedReducer(reducer, initialState, props),\n    state = _useEnhancedReducer[0],\n    dispatch = _useEnhancedReducer[1];\n\n  // ToDo: if needed, make same approach as selectedItemChanged from Downshift.\n  useEffect(function () {\n    if (!isControlledProp(props, 'selectedItem')) {\n      return;\n    }\n    if (props.selectedItemChanged(previousSelectedItemRef.current, props.selectedItem)) {\n      dispatch({\n        type: ControlledPropUpdatedSelectedItem,\n        inputValue: props.itemToString(props.selectedItem)\n      });\n    }\n    previousSelectedItemRef.current = state.selectedItem === previousSelectedItemRef.current ? props.selectedItem : state.selectedItem;\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [state.selectedItem, props.selectedItem]);\n  return [getState(state, props), dispatch];\n}\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes$1 = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes$1 = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes$1, options, 'prop', caller.name);\n  };\n}\nvar defaultProps$1 = _extends({}, defaultProps$3, {\n  selectedItemChanged: function selectedItemChanged(prevItem, item) {\n    return prevItem !== item;\n  },\n  getA11yStatusMessage: getA11yStatusMessage$1\n});\n\n/* eslint-disable complexity */\nfunction downshiftUseComboboxReducer(state, action) {\n  var _props$items;\n  var type = action.type,\n    props = action.props,\n    altKey = action.altKey;\n  var changes;\n  switch (type) {\n    case ItemClick:\n      changes = {\n        isOpen: getDefaultValue$1(props, 'isOpen'),\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        selectedItem: props.items[action.index],\n        inputValue: props.itemToString(props.items[action.index])\n      };\n      break;\n    case InputKeyDownArrowDown:\n      if (state.isOpen) {\n        changes = {\n          highlightedIndex: getNextWrappingIndex(1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, true)\n        };\n      } else {\n        changes = {\n          highlightedIndex: altKey && state.selectedItem == null ? -1 : getHighlightedIndexOnOpen(props, state, 1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownArrowUp:\n      if (state.isOpen) {\n        if (altKey) {\n          changes = getChangesOnSelection(props, state.highlightedIndex);\n        } else {\n          changes = {\n            highlightedIndex: getNextWrappingIndex(-1, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, true)\n          };\n        }\n      } else {\n        changes = {\n          highlightedIndex: getHighlightedIndexOnOpen(props, state, -1, action.getItemNodeFromIndex),\n          isOpen: props.items.length >= 0\n        };\n      }\n      break;\n    case InputKeyDownEnter:\n      changes = getChangesOnSelection(props, state.highlightedIndex);\n      break;\n    case InputKeyDownEscape:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, !state.isOpen && {\n        selectedItem: null,\n        inputValue: ''\n      });\n      break;\n    case InputKeyDownPageUp:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(-10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case InputKeyDownPageDown:\n      changes = {\n        highlightedIndex: getNextWrappingIndex(10, state.highlightedIndex, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case InputKeyDownHome:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(1, 0, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case InputKeyDownEnd:\n      changes = {\n        highlightedIndex: getNextNonDisabledIndex(-1, props.items.length - 1, props.items.length, action.getItemNodeFromIndex, false)\n      };\n      break;\n    case InputBlur:\n      changes = _extends({\n        isOpen: false,\n        highlightedIndex: -1\n      }, state.highlightedIndex >= 0 && ((_props$items = props.items) == null ? void 0 : _props$items.length) && action.selectItem && {\n        selectedItem: props.items[state.highlightedIndex],\n        inputValue: props.itemToString(props.items[state.highlightedIndex])\n      });\n      break;\n    case InputChange:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getDefaultValue$1(props, 'highlightedIndex'),\n        inputValue: action.inputValue\n      };\n      break;\n    case InputFocus:\n      changes = {\n        isOpen: true,\n        highlightedIndex: getHighlightedIndexOnOpen(props, state, 0)\n      };\n      break;\n    case FunctionSelectItem:\n      changes = {\n        selectedItem: action.selectedItem,\n        inputValue: props.itemToString(action.selectedItem)\n      };\n      break;\n    case ControlledPropUpdatedSelectedItem:\n      changes = {\n        inputValue: action.inputValue\n      };\n      break;\n    default:\n      return downshiftCommonReducer(state, action, stateChangeTypes$1);\n  }\n  return _extends({}, state, changes);\n}\n/* eslint-enable complexity */\n\nvar _excluded$1 = [\"onMouseLeave\", \"refKey\", \"ref\"],\n  _excluded2$1 = [\"item\", \"index\", \"refKey\", \"ref\", \"onMouseMove\", \"onMouseDown\", \"onClick\", \"onPress\", \"disabled\"],\n  _excluded3 = [\"onClick\", \"onPress\", \"refKey\", \"ref\"],\n  _excluded4 = [\"onKeyDown\", \"onChange\", \"onInput\", \"onFocus\", \"onBlur\", \"onChangeText\", \"refKey\", \"ref\"];\nuseCombobox.stateChangeTypes = stateChangeTypes$1;\nfunction useCombobox(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes$1(userProps, useCombobox);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps$1, userProps);\n  var initialIsOpen = props.initialIsOpen,\n    defaultIsOpen = props.defaultIsOpen,\n    items = props.items,\n    scrollIntoView = props.scrollIntoView,\n    environment = props.environment,\n    getA11yStatusMessage = props.getA11yStatusMessage,\n    getA11ySelectionMessage = props.getA11ySelectionMessage,\n    itemToString = props.itemToString;\n  // Initial state depending on controlled props.\n  var initialState = getInitialState$1(props);\n  var _useControlledReducer = useControlledReducer(downshiftUseComboboxReducer, initialState, props),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var isOpen = state.isOpen,\n    highlightedIndex = state.highlightedIndex,\n    selectedItem = state.selectedItem,\n    inputValue = state.inputValue;\n\n  // Element refs.\n  var menuRef = useRef(null);\n  var itemRefs = useRef({});\n  var inputRef = useRef(null);\n  var toggleButtonRef = useRef(null);\n  var isInitialMountRef = useRef(true);\n  // prevent id re-generation between renders.\n  var elementIds = useElementIds(props);\n  // used to keep track of how many items we had on previous cycle.\n  var previousResultCountRef = useRef();\n  // utility callback to get item element.\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n  var getItemNodeFromIndex = useCallback(function (index) {\n    return itemRefs.current[elementIds.getItemId(index)];\n  }, [elementIds]);\n\n  // Effects.\n  // Sets a11y status message on changes in state.\n  useA11yMessageSetter(getA11yStatusMessage, [isOpen, highlightedIndex, inputValue, items], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Sets a11y status message on changes in selectedItem.\n  useA11yMessageSetter(getA11ySelectionMessage, [selectedItem], _extends({\n    isInitialMount: isInitialMountRef.current,\n    previousResultCount: previousResultCountRef.current,\n    items: items,\n    environment: environment,\n    itemToString: itemToString\n  }, state));\n  // Scroll on highlighted item if change comes from keyboard.\n  var shouldScrollRef = useScrollIntoView({\n    menuElement: menuRef.current,\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    itemRefs: itemRefs,\n    scrollIntoView: scrollIntoView,\n    getItemNodeFromIndex: getItemNodeFromIndex\n  });\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  // Focus the input on first render if required.\n  useEffect(function () {\n    var focusOnOpen = initialIsOpen || defaultIsOpen || isOpen;\n    if (focusOnOpen && inputRef.current) {\n      inputRef.current.focus();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    previousResultCountRef.current = items.length;\n  });\n  // Add mouse/touch events to document.\n  var mouseAndTouchTrackersRef = useMouseAndTouchTracker(isOpen, [inputRef, menuRef, toggleButtonRef], environment, function () {\n    dispatch({\n      type: InputBlur,\n      selectItem: false\n    });\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getInputProps', 'getMenuProps');\n  // Make initial ref false.\n  useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []);\n  // Reset itemRefs on close.\n  useEffect(function () {\n    var _environment$document;\n    if (!isOpen) {\n      itemRefs.current = {};\n    } else if (((_environment$document = environment.document) == null ? void 0 : _environment$document.activeElement) !== inputRef.current) {\n      var _inputRef$current;\n      inputRef == null || (_inputRef$current = inputRef.current) == null ? void 0 : _inputRef$current.focus();\n    }\n  }, [isOpen, environment]);\n\n  /* Event handler functions */\n  var inputKeyDownHandlers = useMemo(function () {\n    return {\n      ArrowDown: function ArrowDown(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowDown,\n          altKey: event.altKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      ArrowUp: function ArrowUp(event) {\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownArrowUp,\n          altKey: event.altKey,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Home: function Home(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownHome,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      End: function End(event) {\n        if (!latest.current.state.isOpen) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnd,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      Escape: function Escape(event) {\n        var latestState = latest.current.state;\n        if (latestState.isOpen || latestState.inputValue || latestState.selectedItem || latestState.highlightedIndex > -1) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownEscape\n          });\n        }\n      },\n      Enter: function Enter(event) {\n        var latestState = latest.current.state;\n        // if closed or no highlighted index, do nothing.\n        if (!latestState.isOpen || event.which === 229 // if IME composing, wait for next Enter keydown event.\n        ) {\n          return;\n        }\n        event.preventDefault();\n        dispatch({\n          type: InputKeyDownEnter,\n          getItemNodeFromIndex: getItemNodeFromIndex\n        });\n      },\n      PageUp: function PageUp(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageUp,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      },\n      PageDown: function PageDown(event) {\n        if (latest.current.state.isOpen) {\n          event.preventDefault();\n          dispatch({\n            type: InputKeyDownPageDown,\n            getItemNodeFromIndex: getItemNodeFromIndex\n          });\n        }\n      }\n    };\n  }, [dispatch, latest, getItemNodeFromIndex]);\n\n  // Getter props.\n  var getLabelProps = useCallback(function (labelProps) {\n    return _extends({\n      id: elementIds.labelId,\n      htmlFor: elementIds.inputId\n    }, labelProps);\n  }, [elementIds]);\n  var getMenuProps = useCallback(function (_temp, _temp2) {\n    var _extends2;\n    var _ref = _temp === void 0 ? {} : _temp,\n      onMouseLeave = _ref.onMouseLeave,\n      _ref$refKey = _ref.refKey,\n      refKey = _ref$refKey === void 0 ? 'ref' : _ref$refKey,\n      ref = _ref.ref,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n    var _ref2 = _temp2 === void 0 ? {} : _temp2,\n      _ref2$suppressRefErro = _ref2.suppressRefError,\n      suppressRefError = _ref2$suppressRefErro === void 0 ? false : _ref2$suppressRefErro;\n    setGetterPropCallInfo('getMenuProps', suppressRefError, refKey, menuRef);\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (menuNode) {\n      menuRef.current = menuNode;\n    }), _extends2.id = elementIds.menuId, _extends2.role = 'listbox', _extends2['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends2.onMouseLeave = callAllEventHandlers(onMouseLeave, function () {\n      dispatch({\n        type: MenuMouseLeave\n      });\n    }), _extends2), rest);\n  }, [dispatch, setGetterPropCallInfo, elementIds]);\n  var getItemProps = useCallback(function (_temp3) {\n    var _extends3, _ref4;\n    var _ref3 = _temp3 === void 0 ? {} : _temp3,\n      itemProp = _ref3.item,\n      indexProp = _ref3.index,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onMouseMove = _ref3.onMouseMove,\n      onMouseDown = _ref3.onMouseDown,\n      onClick = _ref3.onClick;\n      _ref3.onPress;\n      var disabled = _ref3.disabled,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded2$1);\n    var _latest$current = latest.current,\n      latestProps = _latest$current.props,\n      latestState = _latest$current.state;\n    var _getItemAndIndex = getItemAndIndex(itemProp, indexProp, latestProps.items, 'Pass either item or index to getItemProps!'),\n      index = _getItemAndIndex[1];\n    var onSelectKey = 'onClick';\n    var customClickHandler = onClick;\n    var itemHandleMouseMove = function itemHandleMouseMove() {\n      if (index === latestState.highlightedIndex) {\n        return;\n      }\n      shouldScrollRef.current = false;\n      dispatch({\n        type: ItemMouseMove,\n        index: index,\n        disabled: disabled\n      });\n    };\n    var itemHandleClick = function itemHandleClick() {\n      dispatch({\n        type: ItemClick,\n        index: index\n      });\n    };\n    var itemHandleMouseDown = function itemHandleMouseDown(e) {\n      return e.preventDefault();\n    };\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (itemNode) {\n      if (itemNode) {\n        itemRefs.current[elementIds.getItemId(index)] = itemNode;\n      }\n    }), _extends3.disabled = disabled, _extends3.role = 'option', _extends3['aria-selected'] = \"\" + (index === latestState.highlightedIndex), _extends3.id = elementIds.getItemId(index), _extends3), !disabled && (_ref4 = {}, _ref4[onSelectKey] = callAllEventHandlers(customClickHandler, itemHandleClick), _ref4), {\n      onMouseMove: callAllEventHandlers(onMouseMove, itemHandleMouseMove),\n      onMouseDown: callAllEventHandlers(onMouseDown, itemHandleMouseDown)\n    }, rest);\n  }, [dispatch, latest, shouldScrollRef, elementIds]);\n  var getToggleButtonProps = useCallback(function (_temp4) {\n    var _extends4;\n    var _ref5 = _temp4 === void 0 ? {} : _temp4,\n      onClick = _ref5.onClick;\n      _ref5.onPress;\n      var _ref5$refKey = _ref5.refKey,\n      refKey = _ref5$refKey === void 0 ? 'ref' : _ref5$refKey,\n      ref = _ref5.ref,\n      rest = _objectWithoutPropertiesLoose(_ref5, _excluded3);\n    var latestState = latest.current.state;\n    var toggleButtonHandleClick = function toggleButtonHandleClick() {\n      dispatch({\n        type: ToggleButtonClick\n      });\n    };\n    return _extends((_extends4 = {}, _extends4[refKey] = handleRefs(ref, function (toggleButtonNode) {\n      toggleButtonRef.current = toggleButtonNode;\n    }), _extends4['aria-controls'] = elementIds.menuId, _extends4['aria-expanded'] = latestState.isOpen, _extends4.id = elementIds.toggleButtonId, _extends4.tabIndex = -1, _extends4), !rest.disabled && _extends({}, {\n      onClick: callAllEventHandlers(onClick, toggleButtonHandleClick)\n    }), rest);\n  }, [dispatch, latest, elementIds]);\n  var getInputProps = useCallback(function (_temp5, _temp6) {\n    var _extends5;\n    var _ref6 = _temp5 === void 0 ? {} : _temp5,\n      onKeyDown = _ref6.onKeyDown,\n      onChange = _ref6.onChange,\n      onInput = _ref6.onInput,\n      onFocus = _ref6.onFocus,\n      onBlur = _ref6.onBlur;\n      _ref6.onChangeText;\n      var _ref6$refKey = _ref6.refKey,\n      refKey = _ref6$refKey === void 0 ? 'ref' : _ref6$refKey,\n      ref = _ref6.ref,\n      rest = _objectWithoutPropertiesLoose(_ref6, _excluded4);\n    var _ref7 = _temp6 === void 0 ? {} : _temp6,\n      _ref7$suppressRefErro = _ref7.suppressRefError,\n      suppressRefError = _ref7$suppressRefErro === void 0 ? false : _ref7$suppressRefErro;\n    setGetterPropCallInfo('getInputProps', suppressRefError, refKey, inputRef);\n    var latestState = latest.current.state;\n    var inputHandleKeyDown = function inputHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && inputKeyDownHandlers[key]) {\n        inputKeyDownHandlers[key](event);\n      }\n    };\n    var inputHandleChange = function inputHandleChange(event) {\n      dispatch({\n        type: InputChange,\n        inputValue: event.target.value\n      });\n    };\n    var inputHandleBlur = function inputHandleBlur(event) {\n      /* istanbul ignore else */\n      if (latestState.isOpen && !mouseAndTouchTrackersRef.current.isMouseDown) {\n        var isBlurByTabChange = event.relatedTarget === null && environment.document.activeElement !== environment.document.body;\n        dispatch({\n          type: InputBlur,\n          selectItem: !isBlurByTabChange\n        });\n      }\n    };\n    var inputHandleFocus = function inputHandleFocus() {\n      if (!latestState.isOpen) {\n        dispatch({\n          type: InputFocus\n        });\n      }\n    };\n\n    /* istanbul ignore next (preact) */\n    var onChangeKey = 'onChange';\n    var eventHandlers = {};\n    if (!rest.disabled) {\n      var _eventHandlers;\n      eventHandlers = (_eventHandlers = {}, _eventHandlers[onChangeKey] = callAllEventHandlers(onChange, onInput, inputHandleChange), _eventHandlers.onKeyDown = callAllEventHandlers(onKeyDown, inputHandleKeyDown), _eventHandlers.onBlur = callAllEventHandlers(onBlur, inputHandleBlur), _eventHandlers.onFocus = callAllEventHandlers(onFocus, inputHandleFocus), _eventHandlers);\n    }\n    return _extends((_extends5 = {}, _extends5[refKey] = handleRefs(ref, function (inputNode) {\n      inputRef.current = inputNode;\n    }), _extends5['aria-activedescendant'] = latestState.isOpen && latestState.highlightedIndex > -1 ? elementIds.getItemId(latestState.highlightedIndex) : '', _extends5['aria-autocomplete'] = 'list', _extends5['aria-controls'] = elementIds.menuId, _extends5['aria-expanded'] = latestState.isOpen, _extends5['aria-labelledby'] = rest && rest['aria-label'] ? undefined : \"\" + elementIds.labelId, _extends5.autoComplete = 'off', _extends5.id = elementIds.inputId, _extends5.role = 'combobox', _extends5.value = latestState.inputValue, _extends5), eventHandlers, rest);\n  }, [setGetterPropCallInfo, latest, elementIds, inputKeyDownHandlers, dispatch, mouseAndTouchTrackersRef, environment]);\n\n  // returns\n  var toggleMenu = useCallback(function () {\n    dispatch({\n      type: FunctionToggleMenu\n    });\n  }, [dispatch]);\n  var closeMenu = useCallback(function () {\n    dispatch({\n      type: FunctionCloseMenu\n    });\n  }, [dispatch]);\n  var openMenu = useCallback(function () {\n    dispatch({\n      type: FunctionOpenMenu\n    });\n  }, [dispatch]);\n  var setHighlightedIndex = useCallback(function (newHighlightedIndex) {\n    dispatch({\n      type: FunctionSetHighlightedIndex,\n      highlightedIndex: newHighlightedIndex\n    });\n  }, [dispatch]);\n  var selectItem = useCallback(function (newSelectedItem) {\n    dispatch({\n      type: FunctionSelectItem,\n      selectedItem: newSelectedItem\n    });\n  }, [dispatch]);\n  var setInputValue = useCallback(function (newInputValue) {\n    dispatch({\n      type: FunctionSetInputValue,\n      inputValue: newInputValue\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset$1\n    });\n  }, [dispatch]);\n  return {\n    // prop getters.\n    getItemProps: getItemProps,\n    getLabelProps: getLabelProps,\n    getMenuProps: getMenuProps,\n    getInputProps: getInputProps,\n    getToggleButtonProps: getToggleButtonProps,\n    // actions.\n    toggleMenu: toggleMenu,\n    openMenu: openMenu,\n    closeMenu: closeMenu,\n    setHighlightedIndex: setHighlightedIndex,\n    setInputValue: setInputValue,\n    selectItem: selectItem,\n    reset: reset,\n    // state.\n    highlightedIndex: highlightedIndex,\n    isOpen: isOpen,\n    selectedItem: selectedItem,\n    inputValue: inputValue\n  };\n}\n\nvar defaultStateValues = {\n  activeIndex: -1,\n  selectedItems: []\n};\n\n/**\n * Returns the initial value for a state key in the following order:\n * 1. controlled prop, 2. initial prop, 3. default prop, 4. default\n * value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getInitialValue(props, propKey) {\n  return getInitialValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Returns the default value for a state key in the following order:\n * 1. controlled prop, 2. default prop, 3. default value from Downshift.\n *\n * @param {Object} props Props passed to the hook.\n * @param {string} propKey Props key to generate the value for.\n * @returns {any} The initial value for that prop.\n */\nfunction getDefaultValue(props, propKey) {\n  return getDefaultValue$1(props, propKey, defaultStateValues);\n}\n\n/**\n * Gets the initial state based on the provided props. It uses initial, default\n * and controlled props related to state in order to compute the initial value.\n *\n * @param {Object} props Props passed to the hook.\n * @returns {Object} The initial state.\n */\nfunction getInitialState(props) {\n  var activeIndex = getInitialValue(props, 'activeIndex');\n  var selectedItems = getInitialValue(props, 'selectedItems');\n  return {\n    activeIndex: activeIndex,\n    selectedItems: selectedItems\n  };\n}\n\n/**\n * Returns true if dropdown keydown operation is permitted. Should not be\n * allowed on keydown with modifier keys (ctrl, alt, shift, meta), on\n * input element with text content that is either highlighted or selection\n * cursor is not at the starting position.\n *\n * @param {KeyboardEvent} event The event from keydown.\n * @returns {boolean} Whether the operation is allowed.\n */\nfunction isKeyDownOperationPermitted(event) {\n  if (event.shiftKey || event.metaKey || event.ctrlKey || event.altKey) {\n    return false;\n  }\n  var element = event.target;\n  if (element instanceof HTMLInputElement &&\n  // if element is a text input\n  element.value !== '' && (\n  // and we have text in it\n  // and cursor is either not at the start or is currently highlighting text.\n  element.selectionStart !== 0 || element.selectionEnd !== 0)) {\n    return false;\n  }\n  return true;\n}\n\n/**\n * Returns a message to be added to aria-live region when item is removed.\n *\n * @param {Object} selectionParameters Parameters required to build the message.\n * @returns {string} The a11y message.\n */\nfunction getA11yRemovalMessage(selectionParameters) {\n  var removedSelectedItem = selectionParameters.removedSelectedItem,\n    itemToStringLocal = selectionParameters.itemToString;\n  return itemToStringLocal(removedSelectedItem) + \" has been removed.\";\n}\nvar propTypes = {\n  selectedItems: PropTypes.array,\n  initialSelectedItems: PropTypes.array,\n  defaultSelectedItems: PropTypes.array,\n  itemToString: PropTypes.func,\n  getA11yRemovalMessage: PropTypes.func,\n  stateReducer: PropTypes.func,\n  activeIndex: PropTypes.number,\n  initialActiveIndex: PropTypes.number,\n  defaultActiveIndex: PropTypes.number,\n  onActiveIndexChange: PropTypes.func,\n  onSelectedItemsChange: PropTypes.func,\n  keyNavigationNext: PropTypes.string,\n  keyNavigationPrevious: PropTypes.string,\n  environment: PropTypes.shape({\n    addEventListener: PropTypes.func,\n    removeEventListener: PropTypes.func,\n    document: PropTypes.shape({\n      getElementById: PropTypes.func,\n      activeElement: PropTypes.any,\n      body: PropTypes.any\n    })\n  })\n};\nvar defaultProps = {\n  itemToString: defaultProps$3.itemToString,\n  stateReducer: defaultProps$3.stateReducer,\n  environment: defaultProps$3.environment,\n  getA11yRemovalMessage: getA11yRemovalMessage,\n  keyNavigationNext: 'ArrowRight',\n  keyNavigationPrevious: 'ArrowLeft'\n};\n\n// eslint-disable-next-line import/no-mutable-exports\nvar validatePropTypes = noop;\n/* istanbul ignore next */\nif (process.env.NODE_ENV !== 'production') {\n  validatePropTypes = function validatePropTypes(options, caller) {\n    PropTypes.checkPropTypes(propTypes, options, 'prop', caller.name);\n  };\n}\n\nvar SelectedItemClick = process.env.NODE_ENV !== \"production\" ? '__selected_item_click__' : 0;\nvar SelectedItemKeyDownDelete = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_delete__' : 1;\nvar SelectedItemKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_backspace__' : 2;\nvar SelectedItemKeyDownNavigationNext = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_next__' : 3;\nvar SelectedItemKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__selected_item_keydown_navigation_previous__' : 4;\nvar DropdownKeyDownNavigationPrevious = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_navigation_previous__' : 5;\nvar DropdownKeyDownBackspace = process.env.NODE_ENV !== \"production\" ? '__dropdown_keydown_backspace__' : 6;\nvar DropdownClick = process.env.NODE_ENV !== \"production\" ? '__dropdown_click__' : 7;\nvar FunctionAddSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_add_selected_item__' : 8;\nvar FunctionRemoveSelectedItem = process.env.NODE_ENV !== \"production\" ? '__function_remove_selected_item__' : 9;\nvar FunctionSetSelectedItems = process.env.NODE_ENV !== \"production\" ? '__function_set_selected_items__' : 10;\nvar FunctionSetActiveIndex = process.env.NODE_ENV !== \"production\" ? '__function_set_active_index__' : 11;\nvar FunctionReset = process.env.NODE_ENV !== \"production\" ? '__function_reset__' : 12;\n\nvar stateChangeTypes = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  SelectedItemClick: SelectedItemClick,\n  SelectedItemKeyDownDelete: SelectedItemKeyDownDelete,\n  SelectedItemKeyDownBackspace: SelectedItemKeyDownBackspace,\n  SelectedItemKeyDownNavigationNext: SelectedItemKeyDownNavigationNext,\n  SelectedItemKeyDownNavigationPrevious: SelectedItemKeyDownNavigationPrevious,\n  DropdownKeyDownNavigationPrevious: DropdownKeyDownNavigationPrevious,\n  DropdownKeyDownBackspace: DropdownKeyDownBackspace,\n  DropdownClick: DropdownClick,\n  FunctionAddSelectedItem: FunctionAddSelectedItem,\n  FunctionRemoveSelectedItem: FunctionRemoveSelectedItem,\n  FunctionSetSelectedItems: FunctionSetSelectedItems,\n  FunctionSetActiveIndex: FunctionSetActiveIndex,\n  FunctionReset: FunctionReset\n});\n\n/* eslint-disable complexity */\nfunction downshiftMultipleSelectionReducer(state, action) {\n  var type = action.type,\n    index = action.index,\n    props = action.props,\n    selectedItem = action.selectedItem;\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n  var changes;\n  switch (type) {\n    case SelectedItemClick:\n      changes = {\n        activeIndex: index\n      };\n      break;\n    case SelectedItemKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: activeIndex - 1 < 0 ? 0 : activeIndex - 1\n      };\n      break;\n    case SelectedItemKeyDownNavigationNext:\n      changes = {\n        activeIndex: activeIndex + 1 >= selectedItems.length ? -1 : activeIndex + 1\n      };\n      break;\n    case SelectedItemKeyDownBackspace:\n    case SelectedItemKeyDownDelete:\n      {\n        if (activeIndex < 0) {\n          break;\n        }\n        var newActiveIndex = activeIndex;\n        if (selectedItems.length === 1) {\n          newActiveIndex = -1;\n        } else if (activeIndex === selectedItems.length - 1) {\n          newActiveIndex = selectedItems.length - 2;\n        }\n        changes = _extends({\n          selectedItems: [].concat(selectedItems.slice(0, activeIndex), selectedItems.slice(activeIndex + 1))\n        }, {\n          activeIndex: newActiveIndex\n        });\n        break;\n      }\n    case DropdownKeyDownNavigationPrevious:\n      changes = {\n        activeIndex: selectedItems.length - 1\n      };\n      break;\n    case DropdownKeyDownBackspace:\n      changes = {\n        selectedItems: selectedItems.slice(0, selectedItems.length - 1)\n      };\n      break;\n    case FunctionAddSelectedItem:\n      changes = {\n        selectedItems: [].concat(selectedItems, [selectedItem])\n      };\n      break;\n    case DropdownClick:\n      changes = {\n        activeIndex: -1\n      };\n      break;\n    case FunctionRemoveSelectedItem:\n      {\n        var _newActiveIndex = activeIndex;\n        var selectedItemIndex = selectedItems.indexOf(selectedItem);\n        if (selectedItemIndex < 0) {\n          break;\n        }\n        if (selectedItems.length === 1) {\n          _newActiveIndex = -1;\n        } else if (selectedItemIndex === selectedItems.length - 1) {\n          _newActiveIndex = selectedItems.length - 2;\n        }\n        changes = {\n          selectedItems: [].concat(selectedItems.slice(0, selectedItemIndex), selectedItems.slice(selectedItemIndex + 1)),\n          activeIndex: _newActiveIndex\n        };\n        break;\n      }\n    case FunctionSetSelectedItems:\n      {\n        var newSelectedItems = action.selectedItems;\n        changes = {\n          selectedItems: newSelectedItems\n        };\n        break;\n      }\n    case FunctionSetActiveIndex:\n      {\n        var _newActiveIndex2 = action.activeIndex;\n        changes = {\n          activeIndex: _newActiveIndex2\n        };\n        break;\n      }\n    case FunctionReset:\n      changes = {\n        activeIndex: getDefaultValue(props, 'activeIndex'),\n        selectedItems: getDefaultValue(props, 'selectedItems')\n      };\n      break;\n    default:\n      throw new Error('Reducer called without proper action type.');\n  }\n  return _extends({}, state, changes);\n}\n\nvar _excluded = [\"refKey\", \"ref\", \"onClick\", \"onKeyDown\", \"selectedItem\", \"index\"],\n  _excluded2 = [\"refKey\", \"ref\", \"onKeyDown\", \"onClick\", \"preventKeyAction\"];\nuseMultipleSelection.stateChangeTypes = stateChangeTypes;\nfunction useMultipleSelection(userProps) {\n  if (userProps === void 0) {\n    userProps = {};\n  }\n  validatePropTypes(userProps, useMultipleSelection);\n  // Props defaults and destructuring.\n  var props = _extends({}, defaultProps, userProps);\n  var getA11yRemovalMessage = props.getA11yRemovalMessage,\n    itemToString = props.itemToString,\n    environment = props.environment,\n    keyNavigationNext = props.keyNavigationNext,\n    keyNavigationPrevious = props.keyNavigationPrevious;\n\n  // Reducer init.\n  var _useControlledReducer = useControlledReducer$1(downshiftMultipleSelectionReducer, getInitialState(props), props),\n    state = _useControlledReducer[0],\n    dispatch = _useControlledReducer[1];\n  var activeIndex = state.activeIndex,\n    selectedItems = state.selectedItems;\n\n  // Refs.\n  var isInitialMountRef = useRef(true);\n  var dropdownRef = useRef(null);\n  var previousSelectedItemsRef = useRef(selectedItems);\n  var selectedItemRefs = useRef();\n  selectedItemRefs.current = [];\n  var latest = useLatestRef({\n    state: state,\n    props: props\n  });\n\n  // Effects.\n  /* Sets a11y status message on changes in selectedItem. */\n  useEffect(function () {\n    if (isInitialMountRef.current || false) {\n      return;\n    }\n    if (selectedItems.length < previousSelectedItemsRef.current.length) {\n      var removedSelectedItem = previousSelectedItemsRef.current.find(function (item) {\n        return selectedItems.indexOf(item) < 0;\n      });\n      setStatus(getA11yRemovalMessage({\n        itemToString: itemToString,\n        resultCount: selectedItems.length,\n        removedSelectedItem: removedSelectedItem,\n        activeIndex: activeIndex,\n        activeSelectedItem: selectedItems[activeIndex]\n      }), environment.document);\n    }\n    previousSelectedItemsRef.current = selectedItems;\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedItems.length]);\n  // Sets focus on active item.\n  useEffect(function () {\n    if (isInitialMountRef.current) {\n      return;\n    }\n    if (activeIndex === -1 && dropdownRef.current) {\n      dropdownRef.current.focus();\n    } else if (selectedItemRefs.current[activeIndex]) {\n      selectedItemRefs.current[activeIndex].focus();\n    }\n  }, [activeIndex]);\n  useControlPropsValidator({\n    isInitialMount: isInitialMountRef.current,\n    props: props,\n    state: state\n  });\n  var setGetterPropCallInfo = useGetterPropsCalledChecker('getDropdownProps');\n  // Make initial ref false.\n  useEffect(function () {\n    isInitialMountRef.current = false;\n    return function () {\n      isInitialMountRef.current = true;\n    };\n  }, []);\n\n  // Event handler functions.\n  var selectedItemKeyDownHandlers = useMemo(function () {\n    var _ref;\n    return _ref = {}, _ref[keyNavigationPrevious] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationPrevious\n      });\n    }, _ref[keyNavigationNext] = function () {\n      dispatch({\n        type: SelectedItemKeyDownNavigationNext\n      });\n    }, _ref.Delete = function Delete() {\n      dispatch({\n        type: SelectedItemKeyDownDelete\n      });\n    }, _ref.Backspace = function Backspace() {\n      dispatch({\n        type: SelectedItemKeyDownBackspace\n      });\n    }, _ref;\n  }, [dispatch, keyNavigationNext, keyNavigationPrevious]);\n  var dropdownKeyDownHandlers = useMemo(function () {\n    var _ref2;\n    return _ref2 = {}, _ref2[keyNavigationPrevious] = function (event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownNavigationPrevious\n        });\n      }\n    }, _ref2.Backspace = function Backspace(event) {\n      if (isKeyDownOperationPermitted(event)) {\n        dispatch({\n          type: DropdownKeyDownBackspace\n        });\n      }\n    }, _ref2;\n  }, [dispatch, keyNavigationPrevious]);\n\n  // Getter props.\n  var getSelectedItemProps = useCallback(function (_temp) {\n    var _extends2;\n    var _ref3 = _temp === void 0 ? {} : _temp,\n      _ref3$refKey = _ref3.refKey,\n      refKey = _ref3$refKey === void 0 ? 'ref' : _ref3$refKey,\n      ref = _ref3.ref,\n      onClick = _ref3.onClick,\n      onKeyDown = _ref3.onKeyDown,\n      selectedItemProp = _ref3.selectedItem,\n      indexProp = _ref3.index,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n    var latestState = latest.current.state;\n    var _getItemAndIndex = getItemAndIndex(selectedItemProp, indexProp, latestState.selectedItems, 'Pass either item or index to getSelectedItemProps!'),\n      index = _getItemAndIndex[1];\n    var isFocusable = index > -1 && index === latestState.activeIndex;\n    var selectedItemHandleClick = function selectedItemHandleClick() {\n      dispatch({\n        type: SelectedItemClick,\n        index: index\n      });\n    };\n    var selectedItemHandleKeyDown = function selectedItemHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && selectedItemKeyDownHandlers[key]) {\n        selectedItemKeyDownHandlers[key](event);\n      }\n    };\n    return _extends((_extends2 = {}, _extends2[refKey] = handleRefs(ref, function (selectedItemNode) {\n      if (selectedItemNode) {\n        selectedItemRefs.current.push(selectedItemNode);\n      }\n    }), _extends2.tabIndex = isFocusable ? 0 : -1, _extends2.onClick = callAllEventHandlers(onClick, selectedItemHandleClick), _extends2.onKeyDown = callAllEventHandlers(onKeyDown, selectedItemHandleKeyDown), _extends2), rest);\n  }, [dispatch, latest, selectedItemKeyDownHandlers]);\n  var getDropdownProps = useCallback(function (_temp2, _temp3) {\n    var _extends3;\n    var _ref4 = _temp2 === void 0 ? {} : _temp2,\n      _ref4$refKey = _ref4.refKey,\n      refKey = _ref4$refKey === void 0 ? 'ref' : _ref4$refKey,\n      ref = _ref4.ref,\n      onKeyDown = _ref4.onKeyDown,\n      onClick = _ref4.onClick,\n      _ref4$preventKeyActio = _ref4.preventKeyAction,\n      preventKeyAction = _ref4$preventKeyActio === void 0 ? false : _ref4$preventKeyActio,\n      rest = _objectWithoutPropertiesLoose(_ref4, _excluded2);\n    var _ref5 = _temp3 === void 0 ? {} : _temp3,\n      _ref5$suppressRefErro = _ref5.suppressRefError,\n      suppressRefError = _ref5$suppressRefErro === void 0 ? false : _ref5$suppressRefErro;\n    setGetterPropCallInfo('getDropdownProps', suppressRefError, refKey, dropdownRef);\n    var dropdownHandleKeyDown = function dropdownHandleKeyDown(event) {\n      var key = normalizeArrowKey(event);\n      if (key && dropdownKeyDownHandlers[key]) {\n        dropdownKeyDownHandlers[key](event);\n      }\n    };\n    var dropdownHandleClick = function dropdownHandleClick() {\n      dispatch({\n        type: DropdownClick\n      });\n    };\n    return _extends((_extends3 = {}, _extends3[refKey] = handleRefs(ref, function (dropdownNode) {\n      if (dropdownNode) {\n        dropdownRef.current = dropdownNode;\n      }\n    }), _extends3), !preventKeyAction && {\n      onKeyDown: callAllEventHandlers(onKeyDown, dropdownHandleKeyDown),\n      onClick: callAllEventHandlers(onClick, dropdownHandleClick)\n    }, rest);\n  }, [dispatch, dropdownKeyDownHandlers, setGetterPropCallInfo]);\n\n  // returns\n  var addSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionAddSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var removeSelectedItem = useCallback(function (selectedItem) {\n    dispatch({\n      type: FunctionRemoveSelectedItem,\n      selectedItem: selectedItem\n    });\n  }, [dispatch]);\n  var setSelectedItems = useCallback(function (newSelectedItems) {\n    dispatch({\n      type: FunctionSetSelectedItems,\n      selectedItems: newSelectedItems\n    });\n  }, [dispatch]);\n  var setActiveIndex = useCallback(function (newActiveIndex) {\n    dispatch({\n      type: FunctionSetActiveIndex,\n      activeIndex: newActiveIndex\n    });\n  }, [dispatch]);\n  var reset = useCallback(function () {\n    dispatch({\n      type: FunctionReset\n    });\n  }, [dispatch]);\n  return {\n    getSelectedItemProps: getSelectedItemProps,\n    getDropdownProps: getDropdownProps,\n    addSelectedItem: addSelectedItem,\n    removeSelectedItem: removeSelectedItem,\n    setSelectedItems: setSelectedItems,\n    setActiveIndex: setActiveIndex,\n    reset: reset,\n    selectedItems: selectedItems,\n    activeIndex: activeIndex\n  };\n}\n\nexport { Downshift$1 as default, resetIdCounter, useCombobox, useMultipleSelection, useSelect };\n"],"mappings":"AAAA,OAAOA,6BAAP,MAA0C,yDAA1C;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,sBAAP,MAAmC,kDAAnC;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAkCC,MAAlC,EAA0CC,SAA1C,EAAqDC,WAArD,EAAkEC,eAAlE,EAAmFC,UAAnF,EAA+FC,OAA/F,QAA8G,OAA9G;AACA,SAASC,YAAT,QAA6B,UAA7B;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAASC,QAAT,QAAyB,OAAzB;AAEA,IAAIC,SAAS,GAAG,CAAhB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,MAAT,CAAgBC,EAAhB,EAAoB;EAClB,OAAO,OAAOA,EAAP,KAAc,UAAd,GAA2BA,EAA3B,GAAgCC,IAAvC;AACD;;AACD,SAASA,IAAT,GAAgB,CAAE;AAElB;AACA;AACA;AACA;AACA;;;AACA,SAASC,cAAT,CAAwBC,IAAxB,EAA8BC,QAA9B,EAAwC;EACtC,IAAI,CAACD,IAAL,EAAW;IACT;EACD;;EACD,IAAIE,OAAO,GAAGT,OAAO,CAACO,IAAD,EAAO;IAC1BG,QAAQ,EAAEF,QADgB;IAE1BG,KAAK,EAAE,SAFmB;IAG1BC,UAAU,EAAE;EAHc,CAAP,CAArB;EAKAH,OAAO,CAACI,OAAR,CAAgB,UAAUC,IAAV,EAAgB;IAC9B,IAAIC,EAAE,GAAGD,IAAI,CAACC,EAAd;IAAA,IACEC,GAAG,GAAGF,IAAI,CAACE,GADb;IAAA,IAEEC,IAAI,GAAGH,IAAI,CAACG,IAFd;IAGAF,EAAE,CAACG,SAAH,GAAeF,GAAf;IACAD,EAAE,CAACI,UAAH,GAAgBF,IAAhB;EACD,CAND;AAOD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASG,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyCC,WAAzC,EAAsD;EACpD,IAAIC,MAAM,GAAGH,MAAM,KAAKC,KAAX,IAAoBA,KAAK,YAAYC,WAAW,CAACE,IAA7B,IAAqCJ,MAAM,CAACK,QAA5C,IAAwDL,MAAM,CAACK,QAAP,CAAgBJ,KAAhB,CAAzF;EACA,OAAOE,MAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASG,QAAT,CAAkBC,EAAlB,EAAsBC,IAAtB,EAA4B;EAC1B,IAAIC,SAAJ;;EACA,SAASC,MAAT,GAAkB;IAChB,IAAID,SAAJ,EAAe;MACbE,YAAY,CAACF,SAAD,CAAZ;IACD;EACF;;EACD,SAASG,OAAT,GAAmB;IACjB,KAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;MACvFF,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;IACD;;IACDR,MAAM;IACND,SAAS,GAAGU,UAAU,CAAC,YAAY;MACjCV,SAAS,GAAG,IAAZ;MACAF,EAAE,CAACa,KAAH,CAAS,KAAK,CAAd,EAAiBJ,IAAjB;IACD,CAHqB,EAGnBR,IAHmB,CAAtB;EAID;;EACDI,OAAO,CAACF,MAAR,GAAiBA,MAAjB;EACA,OAAOE,OAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASS,oBAAT,GAAgC;EAC9B,KAAK,IAAIC,KAAK,GAAGR,SAAS,CAACC,MAAtB,EAA8BQ,GAAG,GAAG,IAAIN,KAAJ,CAAUK,KAAV,CAApC,EAAsDE,KAAK,GAAG,CAAnE,EAAsEA,KAAK,GAAGF,KAA9E,EAAqFE,KAAK,EAA1F,EAA8F;IAC5FD,GAAG,CAACC,KAAD,CAAH,GAAaV,SAAS,CAACU,KAAD,CAAtB;EACD;;EACD,OAAO,UAAUC,KAAV,EAAiB;IACtB,KAAK,IAAIC,KAAK,GAAGZ,SAAS,CAACC,MAAtB,EAA8BC,IAAI,GAAG,IAAIC,KAAJ,CAAUS,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAlC,CAArC,EAA2EC,KAAK,GAAG,CAAxF,EAA2FA,KAAK,GAAGD,KAAnG,EAA0GC,KAAK,EAA/G,EAAmH;MACjHX,IAAI,CAACW,KAAK,GAAG,CAAT,CAAJ,GAAkBb,SAAS,CAACa,KAAD,CAA3B;IACD;;IACD,OAAOJ,GAAG,CAACK,IAAJ,CAAS,UAAUrB,EAAV,EAAc;MAC5B,IAAIA,EAAJ,EAAQ;QACNA,EAAE,CAACa,KAAH,CAAS,KAAK,CAAd,EAAiB,CAACK,KAAD,EAAQI,MAAR,CAAeb,IAAf,CAAjB;MACD;;MACD,OAAOS,KAAK,CAACK,uBAAN,IAAiCL,KAAK,CAACM,cAAN,CAAqB,aAArB,KAAuCN,KAAK,CAACO,WAAN,CAAkBF,uBAAjG;IACD,CALM,CAAP;EAMD,CAVD;AAWD;;AACD,SAASG,UAAT,GAAsB;EACpB,KAAK,IAAIC,KAAK,GAAGpB,SAAS,CAACC,MAAtB,EAA8BoB,IAAI,GAAG,IAAIlB,KAAJ,CAAUiB,KAAV,CAArC,EAAuDE,KAAK,GAAG,CAApE,EAAuEA,KAAK,GAAGF,KAA/E,EAAsFE,KAAK,EAA3F,EAA+F;IAC7FD,IAAI,CAACC,KAAD,CAAJ,GAActB,SAAS,CAACsB,KAAD,CAAvB;EACD;;EACD,OAAO,UAAUlD,IAAV,EAAgB;IACrBiD,IAAI,CAAC3C,OAAL,CAAa,UAAU6C,GAAV,EAAe;MAC1B,IAAI,OAAOA,GAAP,KAAe,UAAnB,EAA+B;QAC7BA,GAAG,CAACnD,IAAD,CAAH;MACD,CAFD,MAEO,IAAImD,GAAJ,EAAS;QACdA,GAAG,CAACC,OAAJ,GAAcpD,IAAd;MACD;IACF,CAND;EAOD,CARD;AASD;AAED;AACA;AACA;AACA;;;AACA,SAASqD,UAAT,GAAsB;EACpB,OAAOC,MAAM,CAAC3D,SAAS,EAAV,CAAb;AACD;AAED;AACA;AACA;;;AACA,SAAS4D,cAAT,GAA0B;EACxB5D,SAAS,GAAG,CAAZ;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS6D,sBAAT,CAAgCC,KAAhC,EAAuC;EACrC,IAAIC,MAAM,GAAGD,KAAK,CAACC,MAAnB;EAAA,IACEC,WAAW,GAAGF,KAAK,CAACE,WADtB;EAAA,IAEEC,mBAAmB,GAAGH,KAAK,CAACG,mBAF9B;;EAGA,IAAI,CAACF,MAAL,EAAa;IACX,OAAO,EAAP;EACD;;EACD,IAAI,CAACC,WAAL,EAAkB;IAChB,OAAO,2BAAP;EACD;;EACD,IAAIA,WAAW,KAAKC,mBAApB,EAAyC;IACvC,OAAOD,WAAW,GAAG,SAAd,IAA2BA,WAAW,KAAK,CAAhB,GAAoB,KAApB,GAA4B,OAAvD,IAAkE,gFAAzE;EACD;;EACD,OAAO,EAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,WAAT,CAAqBC,GAArB,EAA0BC,YAA1B,EAAwC;EACtCD,GAAG,GAAG/B,KAAK,CAACiC,OAAN,CAAcF,GAAd;EAAqB;EAAmCA,GAAG,CAAC,CAAD,CAA3D,GAAiEA,GAAvE;;EACA,IAAI,CAACA,GAAD,IAAQC,YAAZ,EAA0B;IACxB,OAAOA,YAAP;EACD,CAFD,MAEO;IACL,OAAOD,GAAP;EACD;AACF;AAED;AACA;AACA;AACA;;;AACA,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;EAE7B;EACA,OAAO,OAAOA,OAAO,CAACC,IAAf,KAAwB,QAA/B;AACD;AAED;AACA;AACA;AACA;;;AACA,SAASC,eAAT,CAAyBF,OAAzB,EAAkC;EAChC,OAAOA,OAAO,CAACG,KAAf;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,QAA9B,EAAwC;EACtC;EACAC,OAAO,CAACC,KAAR,CAAc,oBAAoBF,QAApB,GAA+B,sBAA/B,GAAwDD,MAAxD,GAAiE,IAA/E;AACD;;AACD,IAAII,SAAS,GAAG,CAAC,kBAAD,EAAqB,YAArB,EAAmC,QAAnC,EAA6C,cAA7C,EAA6D,MAA7D,CAAhB;AACA;AACA;AACA;AACA;;AACA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;EACxB,IAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;IACpBA,KAAK,GAAG,EAAR;EACD;;EACD,IAAI5D,MAAM,GAAG,EAAb;EACA0D,SAAS,CAACrE,OAAV,CAAkB,UAAUwE,CAAV,EAAa;IAC7B,IAAID,KAAK,CAAChC,cAAN,CAAqBiC,CAArB,CAAJ,EAA6B;MAC3B7D,MAAM,CAAC6D,CAAD,CAAN,GAAYD,KAAK,CAACC,CAAD,CAAjB;IACD;EACF,CAJD;EAKA,OAAO7D,MAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS8D,QAAT,CAAkBF,KAAlB,EAAyBR,KAAzB,EAAgC;EAC9B,OAAOW,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBK,MAAnB,CAA0B,UAAUC,SAAV,EAAqBC,GAArB,EAA0B;IACzDD,SAAS,CAACC,GAAD,CAAT,GAAiBC,gBAAgB,CAAChB,KAAD,EAAQe,GAAR,CAAhB,GAA+Bf,KAAK,CAACe,GAAD,CAApC,GAA4CP,KAAK,CAACO,GAAD,CAAlE;IACA,OAAOD,SAAP;EACD,CAHM,EAGJ,EAHI,CAAP;AAID;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASE,gBAAT,CAA0BhB,KAA1B,EAAiCe,GAAjC,EAAsC;EACpC,OAAOf,KAAK,CAACe,GAAD,CAAL,KAAeE,SAAtB;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASC,iBAAT,CAA2BhD,KAA3B,EAAkC;EAChC,IAAI6C,GAAG,GAAG7C,KAAK,CAAC6C,GAAhB;EAAA,IACEI,OAAO,GAAGjD,KAAK,CAACiD,OADlB;EAEA;;EACA,IAAIA,OAAO,IAAI,EAAX,IAAiBA,OAAO,IAAI,EAA5B,IAAkCJ,GAAG,CAACK,OAAJ,CAAY,OAAZ,MAAyB,CAA/D,EAAkE;IAChE,OAAO,UAAUL,GAAjB;EACD;;EACD,OAAOA,GAAP;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASM,aAAT,CAAuBC,GAAvB,EAA4B;EAC1B,OAAOX,MAAM,CAACY,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BH,GAA/B,MAAwC,iBAA/C;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASI,oBAAT,CAA8BC,UAA9B,EAA0CC,SAA1C,EAAqDC,SAArD,EAAgEC,oBAAhE,EAAsFC,QAAtF,EAAgG;EAC9F,IAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;IACvBA,QAAQ,GAAG,IAAX;EACD;;EACD,IAAIF,SAAS,KAAK,CAAlB,EAAqB;IACnB,OAAO,CAAC,CAAR;EACD;;EACD,IAAIG,cAAc,GAAGH,SAAS,GAAG,CAAjC;;EACA,IAAI,OAAOD,SAAP,KAAqB,QAArB,IAAiCA,SAAS,GAAG,CAA7C,IAAkDA,SAAS,IAAIC,SAAnE,EAA8E;IAC5ED,SAAS,GAAGD,UAAU,GAAG,CAAb,GAAiB,CAAC,CAAlB,GAAsBK,cAAc,GAAG,CAAnD;EACD;;EACD,IAAIC,QAAQ,GAAGL,SAAS,GAAGD,UAA3B;;EACA,IAAIM,QAAQ,GAAG,CAAf,EAAkB;IAChBA,QAAQ,GAAGF,QAAQ,GAAGC,cAAH,GAAoB,CAAvC;EACD,CAFD,MAEO,IAAIC,QAAQ,GAAGD,cAAf,EAA+B;IACpCC,QAAQ,GAAGF,QAAQ,GAAG,CAAH,GAAOC,cAA1B;EACD;;EACD,IAAIE,mBAAmB,GAAGC,uBAAuB,CAACR,UAAD,EAAaM,QAAb,EAAuBJ,SAAvB,EAAkCC,oBAAlC,EAAwDC,QAAxD,CAAjD;;EACA,IAAIG,mBAAmB,KAAK,CAAC,CAA7B,EAAgC;IAC9B,OAAON,SAAS,IAAIC,SAAb,GAAyB,CAAC,CAA1B,GAA8BD,SAArC;EACD;;EACD,OAAOM,mBAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,uBAAT,CAAiCR,UAAjC,EAA6CC,SAA7C,EAAwDC,SAAxD,EAAmEC,oBAAnE,EAAyFC,QAAzF,EAAmG;EACjG,IAAIK,kBAAkB,GAAGN,oBAAoB,CAACF,SAAD,CAA7C;;EACA,IAAI,CAACQ,kBAAD,IAAuB,CAACA,kBAAkB,CAACC,YAAnB,CAAgC,UAAhC,CAA5B,EAAyE;IACvE,OAAOT,SAAP;EACD;;EACD,IAAID,UAAU,GAAG,CAAjB,EAAoB;IAClB,KAAK,IAAIW,KAAK,GAAGV,SAAS,GAAG,CAA7B,EAAgCU,KAAK,GAAGT,SAAxC,EAAmDS,KAAK,EAAxD,EAA4D;MAC1D,IAAI,CAACR,oBAAoB,CAACQ,KAAD,CAApB,CAA4BD,YAA5B,CAAyC,UAAzC,CAAL,EAA2D;QACzD,OAAOC,KAAP;MACD;IACF;EACF,CAND,MAMO;IACL,KAAK,IAAIC,MAAM,GAAGX,SAAS,GAAG,CAA9B,EAAiCW,MAAM,IAAI,CAA3C,EAA8CA,MAAM,EAApD,EAAwD;MACtD,IAAI,CAACT,oBAAoB,CAACS,MAAD,CAApB,CAA6BF,YAA7B,CAA0C,UAA1C,CAAL,EAA4D;QAC1D,OAAOE,MAAP;MACD;IACF;EACF;;EACD,IAAIR,QAAJ,EAAc;IACZ,OAAOJ,UAAU,GAAG,CAAb,GAAiBQ,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAON,SAAP,EAAkBC,oBAAlB,EAAwC,KAAxC,CAAxC,GAAyFK,uBAAuB,CAAC,CAAC,CAAF,EAAKN,SAAS,GAAG,CAAjB,EAAoBA,SAApB,EAA+BC,oBAA/B,EAAqD,KAArD,CAAvH;EACD;;EACD,OAAO,CAAC,CAAR;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASU,qBAAT,CAA+BC,MAA/B,EAAuCC,iBAAvC,EAA0D/F,WAA1D,EAAuEgG,kBAAvE,EAA2F;EACzF,IAAIA,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;IACjCA,kBAAkB,GAAG,IAArB;EACD;;EACD,OAAOD,iBAAiB,CAACrE,IAAlB,CAAuB,UAAUuE,WAAV,EAAuB;IACnD,OAAOA,WAAW,KAAKpG,gBAAgB,CAACoG,WAAD,EAAcH,MAAd,EAAsB9F,WAAtB,CAAhB,IAAsDgG,kBAAkB,IAAInG,gBAAgB,CAACoG,WAAD,EAAcjG,WAAW,CAACkG,QAAZ,CAAqBC,aAAnC,EAAkDnG,WAAlD,CAAjG,CAAlB;EACD,CAFM,CAAP;AAGD,C,CAED;;;AACA,IAAIoG,2BAA2B,GAAGtH,IAAlC;AACA;;AACA,IAAIuH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACzCH,2BAA2B,GAAG,SAASA,2BAAT,CAAqCvC,KAArC,EAA4C2C,SAA5C,EAAuDC,SAAvD,EAAkE;IAC9F,IAAIC,kBAAkB,GAAG,wPAAzB;IACA1C,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBvE,OAAnB,CAA2B,UAAUqH,OAAV,EAAmB;MAC5C,IAAIH,SAAS,CAACG,OAAD,CAAT,KAAuBrC,SAAvB,IAAoCmC,SAAS,CAACE,OAAD,CAAT,KAAuBrC,SAA/D,EAA0E;QACxE;QACAb,OAAO,CAACC,KAAR,CAAc,8DAA8DiD,OAA9D,GAAwE,yBAAxE,GAAoGD,kBAAlH;MACD,CAHD,MAGO,IAAIF,SAAS,CAACG,OAAD,CAAT,KAAuBrC,SAAvB,IAAoCmC,SAAS,CAACE,OAAD,CAAT,KAAuBrC,SAA/D,EAA0E;QAC/E;QACAb,OAAO,CAACC,KAAR,CAAc,gEAAgEiD,OAAhE,GAA0E,uBAA1E,GAAoGD,kBAAlH;MACD;IACF,CARD;EASD,CAXD;AAYD;;AAED,IAAIE,aAAa,GAAGxG,QAAQ,CAAC,UAAUyG,YAAV,EAAwB;EACnDC,YAAY,CAACD,YAAD,CAAZ,CAA2BE,WAA3B,GAAyC,EAAzC;AACD,CAF2B,EAEzB,GAFyB,CAA5B;AAIA;AACA;AACA;AACA;;AACA,SAASC,SAAT,CAAmBC,MAAnB,EAA2BJ,YAA3B,EAAyC;EACvC,IAAIK,GAAG,GAAGJ,YAAY,CAACD,YAAD,CAAtB;;EACA,IAAI,CAACI,MAAL,EAAa;IACX;EACD;;EACDC,GAAG,CAACH,WAAJ,GAAkBE,MAAlB;EACAL,aAAa,CAACC,YAAD,CAAb;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASC,YAAT,CAAsBD,YAAtB,EAAoC;EAClC,IAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;IAC3BA,YAAY,GAAGX,QAAf;EACD;;EACD,IAAIiB,SAAS,GAAGN,YAAY,CAACO,cAAb,CAA4B,qBAA5B,CAAhB;;EACA,IAAID,SAAJ,EAAe;IACb,OAAOA,SAAP;EACD;;EACDA,SAAS,GAAGN,YAAY,CAACQ,aAAb,CAA2B,KAA3B,CAAZ;EACAF,SAAS,CAACG,YAAV,CAAuB,IAAvB,EAA6B,qBAA7B;EACAH,SAAS,CAACG,YAAV,CAAuB,MAAvB,EAA+B,QAA/B;EACAH,SAAS,CAACG,YAAV,CAAuB,WAAvB,EAAoC,QAApC;EACAH,SAAS,CAACG,YAAV,CAAuB,eAAvB,EAAwC,gBAAxC;EACAtD,MAAM,CAACuD,MAAP,CAAcJ,SAAS,CAACK,KAAxB,EAA+B;IAC7BC,MAAM,EAAE,GADqB;IAE7BC,IAAI,EAAE,eAFuB;IAG7BC,MAAM,EAAE,KAHqB;IAI7BC,MAAM,EAAE,MAJqB;IAK7BC,QAAQ,EAAE,QALmB;IAM7BC,OAAO,EAAE,GANoB;IAO7BC,QAAQ,EAAE,UAPmB;IAQ7BC,KAAK,EAAE;EARsB,CAA/B;EAUAnB,YAAY,CAACoB,IAAb,CAAkBC,WAAlB,CAA8Bf,SAA9B;EACA,OAAOA,SAAP;AACD;;AAED,IAAIgB,OAAO,GAAG9B,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,CAAnF;AACA,IAAI6B,OAAO,GAAG/B,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,CAAnF;AACA,IAAI8B,cAAc,GAAGhC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kCAAxC,GAA6E,CAAlG;AACA,IAAI+B,cAAc,GAAGjC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,mCAAxC,GAA8E,CAAnG;AACA,IAAIgC,gBAAgB,GAAGlC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qCAAxC,GAAgF,CAAvG;AACA,IAAIiC,aAAa,GAAGnC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,iCAAxC,GAA4E,CAAhG;AACA,IAAIkC,YAAY,GAAGpC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAA9F;AACA,IAAImC,WAAW,GAAGrC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,CAA5F;AACA,IAAIoC,UAAU,GAAGtC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,CAA1F;AACA,IAAIqC,SAAS,GAAGvC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,CAAxF;AACA,IAAIsC,SAAS,GAAGxC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,EAAxF;AACA,IAAIuC,WAAW,GAAGzC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,EAA5F;AACA,IAAIwC,kBAAkB,GAAG1C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uCAAxC,GAAkF,EAA3G;AACA,IAAIyC,WAAW,GAAG3C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,EAA5F;AACA,IAAI0C,UAAU,GAAG5C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,EAA1F;AACA,IAAI2C,iCAAiC,GAAG7C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wDAAxC,GAAmG,EAA3I;AACA,IAAI4C,QAAQ,GAAG9C,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2BAAxC,GAAsE,EAArF;AAEA,IAAI6C,kBAAkB,GAAG,aAAapF,MAAM,CAACqF,MAAP,CAAc;EAClDC,SAAS,EAAE,IADuC;EAElDnB,OAAO,EAAEA,OAFyC;EAGlDC,OAAO,EAAEA,OAHyC;EAIlDC,cAAc,EAAEA,cAJkC;EAKlDC,cAAc,EAAEA,cALkC;EAMlDC,gBAAgB,EAAEA,gBANgC;EAOlDC,aAAa,EAAEA,aAPmC;EAQlDC,YAAY,EAAEA,YARoC;EASlDC,WAAW,EAAEA,WATqC;EAUlDC,UAAU,EAAEA,UAVsC;EAWlDC,SAAS,EAAEA,SAXuC;EAYlDC,SAAS,EAAEA,SAZuC;EAalDC,WAAW,EAAEA,WAbqC;EAclDC,kBAAkB,EAAEA,kBAd8B;EAelDC,WAAW,EAAEA,WAfqC;EAgBlDC,UAAU,EAAEA,UAhBsC;EAiBlDC,iCAAiC,EAAEA,iCAjBe;EAkBlDC,QAAQ,EAAEA;AAlBwC,CAAd,CAAtC;AAqBA,IAAII,WAAW,GAAG,CAAC,QAAD,EAAW,KAAX,CAAlB;AAAA,IACEC,YAAY,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,WAAvB,EAAoC,SAApC,EAA+C,QAA/C,CADjB;AAAA,IAEEC,YAAY,GAAG,CAAC,WAAD,EAAc,QAAd,EAAwB,UAAxB,EAAoC,SAApC,EAA+C,cAA/C,CAFjB;AAAA,IAGEC,YAAY,GAAG,CAAC,QAAD,EAAW,KAAX,CAHjB;AAAA,IAIEC,UAAU,GAAG,CAAC,aAAD,EAAgB,aAAhB,EAA+B,SAA/B,EAA0C,SAA1C,EAAqD,OAArD,EAA8D,MAA9D,CAJf;;AAKA,IAAIC,SAAS,GAAG,aAAa,YAAY;EACvC,IAAIA,SAAS,GAAG,aAAa,UAAUC,UAAV,EAAsB;IACjD/L,cAAc,CAAC8L,SAAD,EAAYC,UAAZ,CAAd;;IACA,SAASD,SAAT,CAAmBE,MAAnB,EAA2B;MACzB,IAAIC,KAAJ;;MACAA,KAAK,GAAGF,UAAU,CAAC/E,IAAX,CAAgB,IAAhB,EAAsBgF,MAAtB,KAAiC,IAAzC,CAFyB,CAGzB;MACA;MACA;;MACAC,KAAK,CAACC,EAAN,GAAWD,KAAK,CAAC1G,KAAN,CAAY2G,EAAZ,IAAkB,eAAe3H,UAAU,EAAtD;MACA0H,KAAK,CAACE,MAAN,GAAeF,KAAK,CAAC1G,KAAN,CAAY4G,MAAZ,IAAsBF,KAAK,CAACC,EAAN,GAAW,OAAhD;MACAD,KAAK,CAACG,OAAN,GAAgBH,KAAK,CAAC1G,KAAN,CAAY6G,OAAZ,IAAuBH,KAAK,CAACC,EAAN,GAAW,QAAlD;MACAD,KAAK,CAACI,OAAN,GAAgBJ,KAAK,CAAC1G,KAAN,CAAY8G,OAAZ,IAAuBJ,KAAK,CAACC,EAAN,GAAW,QAAlD;;MACAD,KAAK,CAACK,SAAN,GAAkBL,KAAK,CAAC1G,KAAN,CAAY+G,SAAZ,IAAyB,UAAUzE,KAAV,EAAiB;QAC1D,OAAOoE,KAAK,CAACC,EAAN,GAAW,QAAX,GAAsBrE,KAA7B;MACD,CAFD;;MAGAoE,KAAK,CAACM,KAAN,GAAc,IAAd;MACAN,KAAK,CAACO,KAAN,GAAc,EAAd,CAdyB,CAezB;MACA;MACA;MACA;MACA;;MACAP,KAAK,CAAC7E,SAAN,GAAkB,IAAlB;MACA6E,KAAK,CAACnH,mBAAN,GAA4B,CAA5B;MACAmH,KAAK,CAACQ,UAAN,GAAmB,EAAnB;MACA;AACN;AACA;AACA;;MACMR,KAAK,CAACS,kBAAN,GAA2B,UAAUnK,EAAV,EAAcC,IAAd,EAAoB;QAC7C,IAAI0J,EAAE,GAAG/I,UAAU,CAAC,YAAY;UAC9B8I,KAAK,CAACQ,UAAN,GAAmBR,KAAK,CAACQ,UAAN,CAAiBE,MAAjB,CAAwB,UAAUC,CAAV,EAAa;YACtD,OAAOA,CAAC,KAAKV,EAAb;UACD,CAFkB,CAAnB;UAGA3J,EAAE;QACH,CALkB,EAKhBC,IALgB,CAAnB;;QAMAyJ,KAAK,CAACQ,UAAN,CAAiBI,IAAjB,CAAsBX,EAAtB;MACD,CARD;;MASAD,KAAK,CAACa,YAAN,GAAqB,UAAUC,KAAV,EAAiB;QACpCd,KAAK,CAAC7E,SAAN,GAAkB2F,KAAlB;MACD,CAFD;;MAGAd,KAAK,CAACe,cAAN,GAAuB,YAAY;QACjCf,KAAK,CAAC7E,SAAN,GAAkB,IAAlB;MACD,CAFD;;MAGA6E,KAAK,CAACgB,mBAAN,GAA4B,UAAUC,gBAAV,EAA4BC,eAA5B,EAA6C;QACvE,IAAID,gBAAgB,KAAK,KAAK,CAA9B,EAAiC;UAC/BA,gBAAgB,GAAGjB,KAAK,CAAC1G,KAAN,CAAY6H,uBAA/B;QACD;;QACD,IAAID,eAAe,KAAK,KAAK,CAA7B,EAAgC;UAC9BA,eAAe,GAAG,EAAlB;QACD;;QACDA,eAAe,GAAGrH,SAAS,CAACqH,eAAD,CAA3B;;QACAlB,KAAK,CAACoB,gBAAN,CAAuBvN,QAAQ,CAAC;UAC9BoN,gBAAgB,EAAEA;QADY,CAAD,EAE5BC,eAF4B,CAA/B;MAGD,CAXD;;MAYAlB,KAAK,CAACqB,cAAN,GAAuB,UAAUvM,EAAV,EAAc;QACnCkL,KAAK,CAACoB,gBAAN,CAAuB;UACrBE,YAAY,EAAE,IADO;UAErBC,UAAU,EAAE,EAFS;UAGrBN,gBAAgB,EAAEjB,KAAK,CAAC1G,KAAN,CAAY6H,uBAHT;UAIrBxI,MAAM,EAAEqH,KAAK,CAAC1G,KAAN,CAAYkI;QAJC,CAAvB,EAKG1M,EALH;MAMD,CAPD;;MAQAkL,KAAK,CAACyB,UAAN,GAAmB,UAAUC,IAAV,EAAgBR,eAAhB,EAAiCpM,EAAjC,EAAqC;QACtDoM,eAAe,GAAGrH,SAAS,CAACqH,eAAD,CAA3B;;QACAlB,KAAK,CAACoB,gBAAN,CAAuBvN,QAAQ,CAAC;UAC9B8E,MAAM,EAAEqH,KAAK,CAAC1G,KAAN,CAAYkI,aADU;UAE9BP,gBAAgB,EAAEjB,KAAK,CAAC1G,KAAN,CAAY6H,uBAFA;UAG9BG,YAAY,EAAEI,IAHgB;UAI9BH,UAAU,EAAEvB,KAAK,CAAC1G,KAAN,CAAYqI,YAAZ,CAAyBD,IAAzB;QAJkB,CAAD,EAK5BR,eAL4B,CAA/B,EAKqBpM,EALrB;MAMD,CARD;;MASAkL,KAAK,CAAC4B,iBAAN,GAA0B,UAAUC,SAAV,EAAqBX,eAArB,EAAsCpM,EAAtC,EAA0C;QAClE,IAAI4M,IAAI,GAAG1B,KAAK,CAACO,KAAN,CAAYsB,SAAZ,CAAX;;QACA,IAAIH,IAAI,IAAI,IAAZ,EAAkB;UAChB;QACD;;QACD1B,KAAK,CAACyB,UAAN,CAAiBC,IAAjB,EAAuBR,eAAvB,EAAwCpM,EAAxC;MACD,CAND;;MAOAkL,KAAK,CAAC8B,qBAAN,GAA8B,UAAUZ,eAAV,EAA2BpM,EAA3B,EAA+B;QAC3D,OAAOkL,KAAK,CAAC4B,iBAAN,CAAwB5B,KAAK,CAAChG,QAAN,GAAiBiH,gBAAzC,EAA2DC,eAA3D,EAA4EpM,EAA5E,CAAP;MACD,CAFD,CA9EyB,CAiFzB;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;;MACAkL,KAAK,CAACoB,gBAAN,GAAyB,UAAUW,UAAV,EAAsBjN,EAAtB,EAA0B;QACjD,IAAIkN,cAAJ,EAAoBC,WAApB;QACA,IAAIC,gBAAgB,GAAG,EAAvB;QACA,IAAIC,oBAAoB,GAAG,OAAOJ,UAAP,KAAsB,UAAjD,CAHiD,CAKjD;QACA;QACA;QACA;QACA;;QACA,IAAI,CAACI,oBAAD,IAAyBJ,UAAU,CAACjK,cAAX,CAA0B,YAA1B,CAA7B,EAAsE;UACpEkI,KAAK,CAAC1G,KAAN,CAAY8I,kBAAZ,CAA+BL,UAAU,CAACR,UAA1C,EAAsD1N,QAAQ,CAAC,EAAD,EAAKmM,KAAK,CAACqC,kBAAN,EAAL,EAAiCN,UAAjC,CAA9D;QACD;;QACD,OAAO/B,KAAK,CAACsC,QAAN,CAAe,UAAUxI,KAAV,EAAiB;UACrCA,KAAK,GAAGkG,KAAK,CAAChG,QAAN,CAAeF,KAAf,CAAR;UACA,IAAIyI,aAAa,GAAGJ,oBAAoB,GAAGJ,UAAU,CAACjI,KAAD,CAAb,GAAuBiI,UAA/D,CAFqC,CAIrC;;UACAQ,aAAa,GAAGvC,KAAK,CAAC1G,KAAN,CAAYkJ,YAAZ,CAAyB1I,KAAzB,EAAgCyI,aAAhC,CAAhB,CALqC,CAOrC;UACA;UACA;;UACAP,cAAc,GAAGO,aAAa,CAACzK,cAAd,CAA6B,cAA7B,CAAjB,CAVqC,CAWrC;;UACA,IAAI2K,SAAS,GAAG,EAAhB,CAZqC,CAarC;UACA;UACA;;UACA,IAAIT,cAAc,IAAIO,aAAa,CAACjB,YAAd,KAA+BxH,KAAK,CAACwH,YAA3D,EAAyE;YACvEW,WAAW,GAAGM,aAAa,CAACjB,YAA5B;UACD;;UACDiB,aAAa,CAACnJ,IAAd,GAAqBmJ,aAAa,CAACnJ,IAAd,IAAsBgF,OAA3C;UACAnE,MAAM,CAACC,IAAP,CAAYqI,aAAZ,EAA2BhN,OAA3B,CAAmC,UAAU8E,GAAV,EAAe;YAChD;YACA;YACA,IAAIP,KAAK,CAACO,GAAD,CAAL,KAAekI,aAAa,CAAClI,GAAD,CAAhC,EAAuC;cACrC6H,gBAAgB,CAAC7H,GAAD,CAAhB,GAAwBkI,aAAa,CAAClI,GAAD,CAArC;YACD,CAL+C,CAMhD;YACA;YACA;YACA;YACA;YACA;;;YACA,IAAIA,GAAG,KAAK,MAAZ,EAAoB;cAClB;YACD;;YACDkI,aAAa,CAAClI,GAAD,CAAb,CAfgD,CAgBhD;;YACA,IAAI,CAACC,gBAAgB,CAAC0F,KAAK,CAAC1G,KAAP,EAAce,GAAd,CAArB,EAAyC;cACvCoI,SAAS,CAACpI,GAAD,CAAT,GAAiBkI,aAAa,CAAClI,GAAD,CAA9B;YACD;UACF,CApBD,EApBqC,CA0CrC;UACA;;UACA,IAAI8H,oBAAoB,IAAII,aAAa,CAACzK,cAAd,CAA6B,YAA7B,CAA5B,EAAwE;YACtEkI,KAAK,CAAC1G,KAAN,CAAY8I,kBAAZ,CAA+BG,aAAa,CAAChB,UAA7C,EAAyD1N,QAAQ,CAAC,EAAD,EAAKmM,KAAK,CAACqC,kBAAN,EAAL,EAAiCE,aAAjC,CAAjE;UACD;;UACD,OAAOE,SAAP;QACD,CAhDM,EAgDJ,YAAY;UACb;UACA5N,MAAM,CAACC,EAAD,CAAN,GAFa,CAIb;UACA;;UACA,IAAI4N,oBAAoB,GAAGzI,MAAM,CAACC,IAAP,CAAYgI,gBAAZ,EAA8BpL,MAA9B,GAAuC,CAAlE;;UACA,IAAI4L,oBAAJ,EAA0B;YACxB1C,KAAK,CAAC1G,KAAN,CAAYqJ,aAAZ,CAA0BT,gBAA1B,EAA4ClC,KAAK,CAACqC,kBAAN,EAA5C;UACD;;UACD,IAAIL,cAAJ,EAAoB;YAClBhC,KAAK,CAAC1G,KAAN,CAAYsJ,QAAZ,CAAqBb,UAAU,CAACT,YAAhC,EAA8CtB,KAAK,CAACqC,kBAAN,EAA9C;UACD;;UACD,IAAIJ,WAAW,KAAK1H,SAApB,EAA+B;YAC7ByF,KAAK,CAAC1G,KAAN,CAAYuJ,QAAZ,CAAqBZ,WAArB,EAAkCjC,KAAK,CAACqC,kBAAN,EAAlC;UACD,CAfY,CAgBb;UACA;;;UACArC,KAAK,CAAC1G,KAAN,CAAYwJ,YAAZ,CAAyBZ,gBAAzB,EAA2ClC,KAAK,CAACqC,kBAAN,EAA3C;QACD,CAnEM,CAAP;MAoED,CAjFD,CAzFyB,CA2KzB;;;MACArC,KAAK,CAAC+C,OAAN,GAAgB,UAAU9N,IAAV,EAAgB;QAC9B,OAAO+K,KAAK,CAACgD,SAAN,GAAkB/N,IAAzB;MACD,CAFD;;MAGA+K,KAAK,CAACiD,YAAN,GAAqB,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;QAC5C,IAAIC,SAAJ;;QACA,IAAI5N,IAAI,GAAG0N,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;QAAA,IACEG,WAAW,GAAG7N,IAAI,CAAC8N,MADrB;QAAA,IAEEA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAF5C;QAAA,IAGEjL,GAAG,GAAG5C,IAAI,CAAC4C,GAHb;QAAA,IAIEmL,IAAI,GAAG3P,6BAA6B,CAAC4B,IAAD,EAAOgK,WAAP,CAJtC;;QAKA,IAAI9G,KAAK,GAAGyK,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACEK,qBAAqB,GAAG9K,KAAK,CAAC+K,gBADhC;QAAA,IAEEA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE,CAP4C,CAU5C;QACA;;;QACAxD,KAAK,CAACiD,YAAN,CAAmBS,MAAnB,GAA4B,IAA5B;QACA1D,KAAK,CAACiD,YAAN,CAAmBK,MAAnB,GAA4BA,MAA5B;QACAtD,KAAK,CAACiD,YAAN,CAAmBQ,gBAAnB,GAAsCA,gBAAtC;;QACA,IAAIE,cAAc,GAAG3D,KAAK,CAAChG,QAAN,EAArB;QAAA,IACErB,MAAM,GAAGgL,cAAc,CAAChL,MAD1B;;QAEA,OAAO9E,QAAQ,EAAEuP,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM4H,KAAK,CAAC+C,OAAZ,CAA9C,EAAoEK,SAAS,CAACQ,IAAV,GAAiB,UAArF,EAAiGR,SAAS,CAAC,eAAD,CAAT,GAA6BzK,MAA9H,EAAsIyK,SAAS,CAAC,eAAD,CAAT,GAA6B,SAAnK,EAA8KA,SAAS,CAAC,WAAD,CAAT,GAAyBzK,MAAM,GAAGqH,KAAK,CAACE,MAAT,GAAkB,IAA/N,EAAqOkD,SAAS,CAAC,iBAAD,CAAT,GAA+BpD,KAAK,CAACG,OAA1Q,EAAmRiD,SAArR,GAAiSG,IAAjS,CAAf;MACD,CAlBD,CA/KyB,CAkMzB;;;MACAvD,KAAK,CAAC6D,eAAN,GAAwB;QACtBC,SAAS,EAAE,SAASA,SAAT,CAAmBtM,KAAnB,EAA0B;UACnC,IAAIuM,MAAM,GAAG,IAAb;;UACAvM,KAAK,CAACwM,cAAN;;UACA,IAAI,KAAKhK,QAAL,GAAgBrB,MAApB,EAA4B;YAC1B,IAAIsL,MAAM,GAAGzM,KAAK,CAAC0M,QAAN,GAAiB,CAAjB,GAAqB,CAAlC;YACA,KAAKC,oBAAL,CAA0BF,MAA1B,EAAkC;cAChC7K,IAAI,EAAEoF;YAD0B,CAAlC;UAGD,CALD,MAKO;YACL,KAAK4C,gBAAL,CAAsB;cACpBzI,MAAM,EAAE,IADY;cAEpBS,IAAI,EAAEoF;YAFc,CAAtB,EAGG,YAAY;cACb,IAAIrD,SAAS,GAAG4I,MAAM,CAACK,YAAP,EAAhB;;cACA,IAAIjJ,SAAS,GAAG,CAAhB,EAAmB;gBACjB,IAAIkJ,eAAe,GAAGN,MAAM,CAAC/J,QAAP,EAAtB;gBAAA,IACEiH,gBAAgB,GAAGoD,eAAe,CAACpD,gBADrC;;gBAEA,IAAIqD,oBAAoB,GAAGtJ,oBAAoB,CAAC,CAAD,EAAIiG,gBAAJ,EAAsB9F,SAAtB,EAAiC,UAAUS,KAAV,EAAiB;kBAC/F,OAAOmI,MAAM,CAAC3I,oBAAP,CAA4BQ,KAA5B,CAAP;gBACD,CAF8C,CAA/C;;gBAGAmI,MAAM,CAAC/C,mBAAP,CAA2BsD,oBAA3B,EAAiD;kBAC/ClL,IAAI,EAAEoF;gBADyC,CAAjD;cAGD;YACF,CAfD;UAgBD;QACF,CA3BqB;QA4BtB+F,OAAO,EAAE,SAASA,OAAT,CAAiB/M,KAAjB,EAAwB;UAC/B,IAAIgN,MAAM,GAAG,IAAb;;UACAhN,KAAK,CAACwM,cAAN;;UACA,IAAI,KAAKhK,QAAL,GAAgBrB,MAApB,EAA4B;YAC1B,IAAIsL,MAAM,GAAGzM,KAAK,CAAC0M,QAAN,GAAiB,CAAC,CAAlB,GAAsB,CAAC,CAApC;YACA,KAAKC,oBAAL,CAA0BF,MAA1B,EAAkC;cAChC7K,IAAI,EAAEmF;YAD0B,CAAlC;UAGD,CALD,MAKO;YACL,KAAK6C,gBAAL,CAAsB;cACpBzI,MAAM,EAAE,IADY;cAEpBS,IAAI,EAAEmF;YAFc,CAAtB,EAGG,YAAY;cACb,IAAIpD,SAAS,GAAGqJ,MAAM,CAACJ,YAAP,EAAhB;;cACA,IAAIjJ,SAAS,GAAG,CAAhB,EAAmB;gBACjB,IAAIsJ,eAAe,GAAGD,MAAM,CAACxK,QAAP,EAAtB;gBAAA,IACEiH,gBAAgB,GAAGwD,eAAe,CAACxD,gBADrC;;gBAEA,IAAIqD,oBAAoB,GAAGtJ,oBAAoB,CAAC,CAAC,CAAF,EAAKiG,gBAAL,EAAuB9F,SAAvB,EAAkC,UAAUS,KAAV,EAAiB;kBAChG,OAAO4I,MAAM,CAACpJ,oBAAP,CAA4BQ,KAA5B,CAAP;gBACD,CAF8C,CAA/C;;gBAGA4I,MAAM,CAACxD,mBAAP,CAA2BsD,oBAA3B,EAAiD;kBAC/ClL,IAAI,EAAEmF;gBADyC,CAAjD;cAGD;YACF,CAfD;UAgBD;QACF,CAtDqB;QAuDtBmG,KAAK,EAAE,SAASA,KAAT,CAAelN,KAAf,EAAsB;UAC3B,IAAIA,KAAK,CAACmN,KAAN,KAAgB,GAApB,EAAyB;YACvB;UACD;;UACD,IAAIC,eAAe,GAAG,KAAK5K,QAAL,EAAtB;UAAA,IACErB,MAAM,GAAGiM,eAAe,CAACjM,MAD3B;UAAA,IAEEsI,gBAAgB,GAAG2D,eAAe,CAAC3D,gBAFrC;;UAGA,IAAItI,MAAM,IAAIsI,gBAAgB,IAAI,IAAlC,EAAwC;YACtCzJ,KAAK,CAACwM,cAAN;YACA,IAAItC,IAAI,GAAG,KAAKnB,KAAL,CAAWU,gBAAX,CAAX;YACA,IAAI4D,QAAQ,GAAG,KAAKzJ,oBAAL,CAA0B6F,gBAA1B,CAAf;;YACA,IAAIS,IAAI,IAAI,IAAR,IAAgBmD,QAAQ,IAAIA,QAAQ,CAAClJ,YAAT,CAAsB,UAAtB,CAAhC,EAAmE;cACjE;YACD;;YACD,KAAKmG,qBAAL,CAA2B;cACzB1I,IAAI,EAAEsF;YADmB,CAA3B;UAGD;QACF,CAzEqB;QA0EtBoG,MAAM,EAAE,SAASA,MAAT,CAAgBtN,KAAhB,EAAuB;UAC7BA,KAAK,CAACwM,cAAN;UACA,KAAKe,KAAL,CAAWlR,QAAQ,CAAC;YAClBuF,IAAI,EAAEqF;UADY,CAAD,EAEhB,CAAC,KAAK3E,KAAL,CAAWnB,MAAZ,IAAsB;YACvB2I,YAAY,EAAE,IADS;YAEvBC,UAAU,EAAE;UAFW,CAFN,CAAnB;QAMD;MAlFqB,CAAxB,CAnMyB,CAuRzB;;MACAvB,KAAK,CAACgF,qBAAN,GAA8BnR,QAAQ,CAAC,EAAD,EAAKmM,KAAK,CAAC6D,eAAX,EAA4B;QAChE,KAAK,SAASoB,CAAT,CAAWzN,KAAX,EAAkB;UACrBA,KAAK,CAACwM,cAAN;UACA,KAAKkB,UAAL,CAAgB;YACd9L,IAAI,EAAE4F;UADQ,CAAhB;QAGD;MAN+D,CAA5B,CAAtC;MAQAgB,KAAK,CAACmF,oBAAN,GAA6BtR,QAAQ,CAAC,EAAD,EAAKmM,KAAK,CAAC6D,eAAX,EAA4B;QAC/DuB,IAAI,EAAE,SAASA,IAAT,CAAc5N,KAAd,EAAqB;UACzB,IAAI6N,MAAM,GAAG,IAAb;;UACA,IAAIC,eAAe,GAAG,KAAKtL,QAAL,EAAtB;UAAA,IACErB,MAAM,GAAG2M,eAAe,CAAC3M,MAD3B;;UAEA,IAAI,CAACA,MAAL,EAAa;YACX;UACD;;UACDnB,KAAK,CAACwM,cAAN;UACA,IAAI7I,SAAS,GAAG,KAAKiJ,YAAL,EAAhB;;UACA,IAAIjJ,SAAS,IAAI,CAAb,IAAkB,CAACxC,MAAvB,EAA+B;YAC7B;UACD,CAXwB,CAazB;;;UACA,IAAI4M,mBAAmB,GAAG9J,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAON,SAAP,EAAkB,UAAUS,KAAV,EAAiB;YAClF,OAAOyJ,MAAM,CAACjK,oBAAP,CAA4BQ,KAA5B,CAAP;UACD,CAFgD,EAE9C,KAF8C,CAAjD;UAGA,KAAKoF,mBAAL,CAAyBuE,mBAAzB,EAA8C;YAC5CnM,IAAI,EAAEuF;UADsC,CAA9C;QAGD,CArB8D;QAsB/D6G,GAAG,EAAE,SAASA,GAAT,CAAahO,KAAb,EAAoB;UACvB,IAAIiO,MAAM,GAAG,IAAb;;UACA,IAAIC,eAAe,GAAG,KAAK1L,QAAL,EAAtB;UAAA,IACErB,MAAM,GAAG+M,eAAe,CAAC/M,MAD3B;;UAEA,IAAI,CAACA,MAAL,EAAa;YACX;UACD;;UACDnB,KAAK,CAACwM,cAAN;UACA,IAAI7I,SAAS,GAAG,KAAKiJ,YAAL,EAAhB;;UACA,IAAIjJ,SAAS,IAAI,CAAb,IAAkB,CAACxC,MAAvB,EAA+B;YAC7B;UACD,CAXsB,CAavB;;;UACA,IAAI4M,mBAAmB,GAAG9J,uBAAuB,CAAC,CAAC,CAAF,EAAKN,SAAS,GAAG,CAAjB,EAAoBA,SAApB,EAA+B,UAAUS,KAAV,EAAiB;YAC/F,OAAO6J,MAAM,CAACrK,oBAAP,CAA4BQ,KAA5B,CAAP;UACD,CAFgD,EAE9C,KAF8C,CAAjD;UAGA,KAAKoF,mBAAL,CAAyBuE,mBAAzB,EAA8C;YAC5CnM,IAAI,EAAEwF;UADsC,CAA9C;QAGD;MA1C8D,CAA5B,CAArC;;MA4CAoB,KAAK,CAAC2F,oBAAN,GAA6B,UAAUC,MAAV,EAAkB;QAC7C,IAAIC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACEE,OAAO,GAAGD,KAAK,CAACC,OADlB;;QAEED,KAAK,CAACE,OAAN;;QACA,IAAIC,SAAS,GAAGH,KAAK,CAACG,SAAtB;QAAA,IACAC,OAAO,GAAGJ,KAAK,CAACI,OADhB;QAAA,IAEAC,MAAM,GAAGL,KAAK,CAACK,MAFf;QAAA,IAGA3C,IAAI,GAAG3P,6BAA6B,CAACiS,KAAD,EAAQpG,YAAR,CAHpC;;QAIF,IAAI0G,eAAe,GAAGnG,KAAK,CAAChG,QAAN,EAAtB;QAAA,IACErB,MAAM,GAAGwN,eAAe,CAACxN,MAD3B;;QAEA,IAAIyN,oBAAoB,GAAG;UACzBN,OAAO,EAAE1O,oBAAoB,CAAC0O,OAAD,EAAU9F,KAAK,CAACqG,iBAAhB,CADJ;UAEzBL,SAAS,EAAE5O,oBAAoB,CAAC4O,SAAD,EAAYhG,KAAK,CAACsG,mBAAlB,CAFN;UAGzBL,OAAO,EAAE7O,oBAAoB,CAAC6O,OAAD,EAAUjG,KAAK,CAACuG,iBAAhB,CAHJ;UAIzBL,MAAM,EAAE9O,oBAAoB,CAAC8O,MAAD,EAASlG,KAAK,CAACwG,gBAAf;QAJH,CAA3B;QAMA,IAAIC,aAAa,GAAGlD,IAAI,CAACmD,QAAL,GAAgB,EAAhB,GAAqBN,oBAAzC;QACA,OAAOvS,QAAQ,CAAC;UACduF,IAAI,EAAE,QADQ;UAEdwK,IAAI,EAAE,QAFQ;UAGd,cAAcjL,MAAM,GAAG,YAAH,GAAkB,WAHxB;UAId,iBAAiB,IAJH;UAKd,eAAe;QALD,CAAD,EAMZ8N,aANY,EAMGlD,IANH,CAAf;MAOD,CAxBD;;MAyBAvD,KAAK,CAACuG,iBAAN,GAA0B,UAAU/O,KAAV,EAAiB;QACzC;QACAA,KAAK,CAACwM,cAAN;MACD,CAHD;;MAIAhE,KAAK,CAACsG,mBAAN,GAA4B,UAAU9O,KAAV,EAAiB;QAC3C,IAAI6C,GAAG,GAAGG,iBAAiB,CAAChD,KAAD,CAA3B;;QACA,IAAIwI,KAAK,CAACgF,qBAAN,CAA4B3K,GAA5B,CAAJ,EAAsC;UACpC2F,KAAK,CAACgF,qBAAN,CAA4B3K,GAA5B,EAAiCU,IAAjC,CAAsCjH,sBAAsB,CAACkM,KAAD,CAA5D,EAAqExI,KAArE;QACD;MACF,CALD;;MAMAwI,KAAK,CAACqG,iBAAN,GAA0B,UAAU7O,KAAV,EAAiB;QACzCA,KAAK,CAACwM,cAAN,GADyC,CAEzC;QACA;;QACA;;QACA,IAAIhE,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAjC,KAAmD4D,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiC+B,IAAxF,EAA8F;UAC5F1G,KAAK,CAACuE,MAAN,CAAa4K,KAAb;QACD,CAPwC,CAQzC;QACA;QACA;;;QACA,IAAIrK,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;UACnCwD,KAAK,CAACkF,UAAN,CAAiB;YACf9L,IAAI,EAAE6F;UADS,CAAjB;QAGD,CAJD,MAIO;UACL;UACAe,KAAK,CAACS,kBAAN,CAAyB,YAAY;YACnC,OAAOT,KAAK,CAACkF,UAAN,CAAiB;cACtB9L,IAAI,EAAE6F;YADgB,CAAjB,CAAP;UAGD,CAJD;QAKD;MACF,CAvBD;;MAwBAe,KAAK,CAACwG,gBAAN,GAAyB,UAAUhP,KAAV,EAAiB;QACxC,IAAIoP,UAAU,GAAGpP,KAAK,CAACuE,MAAvB,CADwC,CACT;QAC/B;;QACAiE,KAAK,CAACS,kBAAN,CAAyB,YAAY;UACnC,IAAI,CAACT,KAAK,CAAC6G,WAAP,KAAuB7G,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAjC,IAAkD,IAAlD,IAA0D4D,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAjC,CAA+C6D,EAA/C,KAAsDD,KAAK,CAACI,OAA7I,KAAyJJ,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAjC,KAAmDwK,UAAhN,CAA2N;UAA3N,EACE;YACA5G,KAAK,CAAC+E,KAAN,CAAY;cACV3L,IAAI,EAAE8F;YADI,CAAZ;UAGD;QACF,CAPD;MAQD,CAXD,CAvYyB,CAmZzB;MACA;;;MACAc,KAAK,CAAC8G,aAAN,GAAsB,UAAUxN,KAAV,EAAiB;QACrC,OAAOzF,QAAQ,CAAC;UACdkT,OAAO,EAAE/G,KAAK,CAACI,OADD;UAEdH,EAAE,EAAED,KAAK,CAACG;QAFI,CAAD,EAGZ7G,KAHY,CAAf;MAID,CALD,CArZyB,CA2ZzB;MACA;;;MACA0G,KAAK,CAACgH,aAAN,GAAsB,UAAUC,MAAV,EAAkB;QACtC,IAAIC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACEjB,SAAS,GAAGkB,KAAK,CAAClB,SADpB;QAAA,IAEEE,MAAM,GAAGgB,KAAK,CAAChB,MAFjB;QAAA,IAGErD,QAAQ,GAAGqE,KAAK,CAACrE,QAHnB;QAAA,IAIEsE,OAAO,GAAGD,KAAK,CAACC,OAJlB;;QAKED,KAAK,CAACE,YAAN;;QACA,IAAI7D,IAAI,GAAG3P,6BAA6B,CAACsT,KAAD,EAAQxH,YAAR,CAAxC;;QACF,IAAI2H,WAAJ;QACA,IAAIZ,aAAa,GAAG,EAApB;QAEA;;QACA;UACEY,WAAW,GAAG,UAAd;QACD;;QACD,IAAIC,eAAe,GAAGtH,KAAK,CAAChG,QAAN,EAAtB;QAAA,IACEuH,UAAU,GAAG+F,eAAe,CAAC/F,UAD/B;QAAA,IAEE5I,MAAM,GAAG2O,eAAe,CAAC3O,MAF3B;QAAA,IAGEsI,gBAAgB,GAAGqG,eAAe,CAACrG,gBAHrC;;QAIA,IAAI,CAACsC,IAAI,CAACmD,QAAV,EAAoB;UAClB,IAAIa,cAAJ;;UACAd,aAAa,IAAIc,cAAc,GAAG,EAAjB,EAAqBA,cAAc,CAACF,WAAD,CAAd,GAA8BjQ,oBAAoB,CAACyL,QAAD,EAAWsE,OAAX,EAAoBnH,KAAK,CAACwH,iBAA1B,CAAvE,EAAqHD,cAAc,CAACvB,SAAf,GAA2B5O,oBAAoB,CAAC4O,SAAD,EAAYhG,KAAK,CAACyH,kBAAlB,CAApK,EAA2MF,cAAc,CAACrB,MAAf,GAAwB9O,oBAAoB,CAAC8O,MAAD,EAASlG,KAAK,CAAC0H,eAAf,CAAvP,EAAwRH,cAA5R,CAAb;QACD;;QACD,OAAO1T,QAAQ,CAAC;UACd,qBAAqB,MADP;UAEd,yBAAyB8E,MAAM,IAAI,OAAOsI,gBAAP,KAA4B,QAAtC,IAAkDA,gBAAgB,IAAI,CAAtE,GAA0EjB,KAAK,CAACK,SAAN,CAAgBY,gBAAhB,CAA1E,GAA8G,IAFzH;UAGd,iBAAiBtI,MAAM,GAAGqH,KAAK,CAACE,MAAT,GAAkB,IAH3B;UAId,mBAAmBqD,IAAI,IAAIA,IAAI,CAAC,YAAD,CAAZ,GAA6BhJ,SAA7B,GAAyCyF,KAAK,CAACG,OAJpD;UAKd;UACA;UACAwH,YAAY,EAAE,KAPA;UAQdC,KAAK,EAAErG,UARO;UASdtB,EAAE,EAAED,KAAK,CAACI;QATI,CAAD,EAUZqG,aAVY,EAUGlD,IAVH,CAAf;MAWD,CAlCD;;MAmCAvD,KAAK,CAACyH,kBAAN,GAA2B,UAAUjQ,KAAV,EAAiB;QAC1C,IAAI6C,GAAG,GAAGG,iBAAiB,CAAChD,KAAD,CAA3B;;QACA,IAAI6C,GAAG,IAAI2F,KAAK,CAACmF,oBAAN,CAA2B9K,GAA3B,CAAX,EAA4C;UAC1C2F,KAAK,CAACmF,oBAAN,CAA2B9K,GAA3B,EAAgCU,IAAhC,CAAqCjH,sBAAsB,CAACkM,KAAD,CAA3D,EAAoExI,KAApE;QACD;MACF,CALD;;MAMAwI,KAAK,CAACwH,iBAAN,GAA0B,UAAUhQ,KAAV,EAAiB;QACzCwI,KAAK,CAACoB,gBAAN,CAAuB;UACrBhI,IAAI,EAAE2F,WADe;UAErBpG,MAAM,EAAE,IAFa;UAGrB4I,UAAU,EAAE/J,KAAK,CAACuE,MAAN,CAAa6L,KAHJ;UAIrB3G,gBAAgB,EAAEjB,KAAK,CAAC1G,KAAN,CAAY6H;QAJT,CAAvB;MAMD,CAPD;;MAQAnB,KAAK,CAAC0H,eAAN,GAAwB,YAAY;QAClC;QACA1H,KAAK,CAACS,kBAAN,CAAyB,YAAY;UACnC,IAAIoH,uBAAuB,GAAG7H,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,IAAoC,CAAC,CAAC6D,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAvE,IAAwF,CAAC,CAAC4D,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAjC,CAA+C0L,OAAzI,IAAoJ9H,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAAjC,CAA+C0L,OAA/C,CAAuDC,MAA3M,IAAqN/H,KAAK,CAACgD,SAA3N,IAAwOhD,KAAK,CAACgD,SAAN,CAAgB5M,QAAhB,CAAyB4J,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAxB,CAAiCC,aAA1D,CAAtQ;;UACA,IAAI,CAAC4D,KAAK,CAAC6G,WAAP,IAAsB,CAACgB,uBAA3B,EAAoD;YAClD7H,KAAK,CAAC+E,KAAN,CAAY;cACV3L,IAAI,EAAE0F;YADI,CAAZ;UAGD;QACF,CAPD;MAQD,CAVD,CA9cyB,CAydzB;MACA;;;MACAkB,KAAK,CAACgI,OAAN,GAAgB,UAAU/S,IAAV,EAAgB;QAC9B+K,KAAK,CAACiI,SAAN,GAAkBhT,IAAlB;MACD,CAFD;;MAGA+K,KAAK,CAACkI,YAAN,GAAqB,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;QAC7C,IAAIC,SAAJ;;QACA,IAAIC,KAAK,GAAGH,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACEI,YAAY,GAAGD,KAAK,CAAChF,MADvB;QAAA,IAEEA,MAAM,GAAGiF,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF7C;QAAA,IAGEnQ,GAAG,GAAGkQ,KAAK,CAAClQ,GAHd;QAAA,IAIEkB,KAAK,GAAG1F,6BAA6B,CAAC0U,KAAD,EAAQ3I,YAAR,CAJvC;;QAKA,IAAI6I,KAAK,GAAGJ,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACEK,qBAAqB,GAAGD,KAAK,CAAC/E,gBADhC;QAAA,IAEEA,gBAAgB,GAAGgF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE;;QAGAzI,KAAK,CAACkI,YAAN,CAAmBxE,MAAnB,GAA4B,IAA5B;QACA1D,KAAK,CAACkI,YAAN,CAAmB5E,MAAnB,GAA4BA,MAA5B;QACAtD,KAAK,CAACkI,YAAN,CAAmBzE,gBAAnB,GAAsCA,gBAAtC;QACA,OAAO5P,QAAQ,EAAEwU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAC/E,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM4H,KAAK,CAACgI,OAAZ,CAA9C,EAAoEK,SAAS,CAACzE,IAAV,GAAiB,SAArF,EAAgGyE,SAAS,CAAC,iBAAD,CAAT,GAA+B/O,KAAK,IAAIA,KAAK,CAAC,YAAD,CAAd,GAA+B,IAA/B,GAAsC0G,KAAK,CAACG,OAA3K,EAAoLkI,SAAS,CAACpI,EAAV,GAAeD,KAAK,CAACE,MAAzM,EAAiNmI,SAAnN,GAA+N/O,KAA/N,CAAf;MACD,CAdD,CA9dyB,CA6ezB;MACA;;;MACA0G,KAAK,CAAC0I,YAAN,GAAqB,UAAUC,MAAV,EAAkB;QACrC,IAAIC,qBAAJ;;QACA,IAAIC,KAAK,GAAGF,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;QAAA,IACEG,WAAW,GAAGD,KAAK,CAACC,WADtB;QAAA,IAEEC,WAAW,GAAGF,KAAK,CAACE,WAFtB;QAAA,IAGEjD,OAAO,GAAG+C,KAAK,CAAC/C,OAHlB;;QAIE+C,KAAK,CAAC9C,OAAN;;QACA,IAAInK,KAAK,GAAGiN,KAAK,CAACjN,KAAlB;QAAA,IACAoN,UAAU,GAAGH,KAAK,CAACnH,IADnB;QAAA,IAEAA,IAAI,GAAGsH,UAAU,KAAK,KAAK,CAApB,GAAwB1M,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB;QAAwC;QAA0BjC,SAAlE,GAA8EhB,YAAY,CAAC,cAAD,EAAiB,MAAjB,CAAlH,GAA6IyP,UAFpJ;QAAA,IAGAzF,IAAI,GAAG3P,6BAA6B,CAACiV,KAAD,EAAQjJ,UAAR,CAHpC;;QAIF,IAAIhE,KAAK,KAAKrB,SAAd,EAAyB;UACvByF,KAAK,CAACO,KAAN,CAAYK,IAAZ,CAAiBc,IAAjB;;UACA9F,KAAK,GAAGoE,KAAK,CAACO,KAAN,CAAY7F,OAAZ,CAAoBgH,IAApB,CAAR;QACD,CAHD,MAGO;UACL1B,KAAK,CAACO,KAAN,CAAY3E,KAAZ,IAAqB8F,IAArB;QACD;;QACD,IAAIuH,WAAW,GAAG,SAAlB;QACA,IAAIC,kBAAkB,GAAGpD,OAAzB;QACA,IAAIM,oBAAoB,IAAIwC,qBAAqB,GAAG;UAClD;UACA;UACA;UACAE,WAAW,EAAE1R,oBAAoB,CAAC0R,WAAD,EAAc,YAAY;YACzD,IAAIlN,KAAK,KAAKoE,KAAK,CAAChG,QAAN,GAAiBiH,gBAA/B,EAAiD;cAC/C;YACD;;YACDjB,KAAK,CAACgB,mBAAN,CAA0BpF,KAA1B,EAAiC;cAC/BxC,IAAI,EAAEkF;YADyB,CAAjC,EAJyD,CAQzD;YACA;YACA;YACA;;;YACA0B,KAAK,CAACmJ,cAAN,GAAuB,IAAvB;;YACAnJ,KAAK,CAACS,kBAAN,CAAyB,YAAY;cACnC,OAAOT,KAAK,CAACmJ,cAAN,GAAuB,KAA9B;YACD,CAFD,EAEG,GAFH;UAGD,CAhBgC,CAJiB;UAqBlDJ,WAAW,EAAE3R,oBAAoB,CAAC2R,WAAD,EAAc,UAAUvR,KAAV,EAAiB;YAC9D;YACA;YACA;YACAA,KAAK,CAACwM,cAAN;UACD,CALgC;QArBiB,CAAxB,EA2BzB4E,qBAAqB,CAACK,WAAD,CAArB,GAAqC7R,oBAAoB,CAAC8R,kBAAD,EAAqB,YAAY;UAC3FlJ,KAAK,CAAC4B,iBAAN,CAAwBhG,KAAxB,EAA+B;YAC7BxC,IAAI,EAAEyF;UADuB,CAA/B;QAGD,CAJ2D,CA3BhC,EA+BxB+J,qBA/BoB,CAAxB,CAnBqC,CAoDrC;QACA;;QACA,IAAInC,aAAa,GAAGlD,IAAI,CAACmD,QAAL,GAAgB;UAClCqC,WAAW,EAAE3C,oBAAoB,CAAC2C;QADA,CAAhB,GAEhB3C,oBAFJ;QAGA,OAAOvS,QAAQ,CAAC;UACdoM,EAAE,EAAED,KAAK,CAACK,SAAN,CAAgBzE,KAAhB,CADU;UAEdgI,IAAI,EAAE,QAFQ;UAGd,iBAAiB5D,KAAK,CAAChG,QAAN,GAAiBiH,gBAAjB,KAAsCrF;QAHzC,CAAD,EAIZ6K,aAJY,EAIGlD,IAJH,CAAf;MAKD,CA9DD,CA/eyB,CA8iBzB;;;MACAvD,KAAK,CAACoJ,UAAN,GAAmB,YAAY;QAC7BpJ,KAAK,CAACO,KAAN,GAAc,EAAd;MACD,CAFD;;MAGAP,KAAK,CAAC+E,KAAN,GAAc,UAAU7D,eAAV,EAA2BpM,EAA3B,EAA+B;QAC3C,IAAIoM,eAAe,KAAK,KAAK,CAA7B,EAAgC;UAC9BA,eAAe,GAAG,EAAlB;QACD;;QACDA,eAAe,GAAGrH,SAAS,CAACqH,eAAD,CAA3B;;QACAlB,KAAK,CAACoB,gBAAN,CAAuB,UAAUiI,KAAV,EAAiB;UACtC,IAAI/H,YAAY,GAAG+H,KAAK,CAAC/H,YAAzB;UACA,OAAOzN,QAAQ,CAAC;YACd8E,MAAM,EAAEqH,KAAK,CAAC1G,KAAN,CAAYkI,aADN;YAEdP,gBAAgB,EAAEjB,KAAK,CAAC1G,KAAN,CAAY6H,uBAFhB;YAGdI,UAAU,EAAEvB,KAAK,CAAC1G,KAAN,CAAYqI,YAAZ,CAAyBL,YAAzB;UAHE,CAAD,EAIZJ,eAJY,CAAf;QAKD,CAPD,EAOGpM,EAPH;MAQD,CAbD;;MAcAkL,KAAK,CAACkF,UAAN,GAAmB,UAAUhE,eAAV,EAA2BpM,EAA3B,EAA+B;QAChD,IAAIoM,eAAe,KAAK,KAAK,CAA7B,EAAgC;UAC9BA,eAAe,GAAG,EAAlB;QACD;;QACDA,eAAe,GAAGrH,SAAS,CAACqH,eAAD,CAA3B;;QACAlB,KAAK,CAACoB,gBAAN,CAAuB,UAAUkI,KAAV,EAAiB;UACtC,IAAI3Q,MAAM,GAAG2Q,KAAK,CAAC3Q,MAAnB;UACA,OAAO9E,QAAQ,CAAC;YACd8E,MAAM,EAAE,CAACA;UADK,CAAD,EAEZA,MAAM,IAAI;YACXsI,gBAAgB,EAAEjB,KAAK,CAAC1G,KAAN,CAAY6H;UADnB,CAFE,EAIZD,eAJY,CAAf;QAKD,CAPD,EAOG,YAAY;UACb,IAAIqI,eAAe,GAAGvJ,KAAK,CAAChG,QAAN,EAAtB;UAAA,IACErB,MAAM,GAAG4Q,eAAe,CAAC5Q,MAD3B;UAAA,IAEEsI,gBAAgB,GAAGsI,eAAe,CAACtI,gBAFrC;;UAGA,IAAItI,MAAJ,EAAY;YACV,IAAIqH,KAAK,CAACoE,YAAN,KAAuB,CAAvB,IAA4B,OAAOnD,gBAAP,KAA4B,QAA5D,EAAsE;cACpEjB,KAAK,CAACgB,mBAAN,CAA0BC,gBAA1B,EAA4CC,eAA5C;YACD;UACF;;UACDrM,MAAM,CAACC,EAAD,CAAN;QACD,CAjBD;MAkBD,CAvBD;;MAwBAkL,KAAK,CAACwJ,QAAN,GAAiB,UAAU1U,EAAV,EAAc;QAC7BkL,KAAK,CAACoB,gBAAN,CAAuB;UACrBzI,MAAM,EAAE;QADa,CAAvB,EAEG7D,EAFH;MAGD,CAJD;;MAKAkL,KAAK,CAACyJ,SAAN,GAAkB,UAAU3U,EAAV,EAAc;QAC9BkL,KAAK,CAACoB,gBAAN,CAAuB;UACrBzI,MAAM,EAAE;QADa,CAAvB,EAEG7D,EAFH;MAGD,CAJD;;MAKAkL,KAAK,CAAC0J,YAAN,GAAqBrT,QAAQ,CAAC,YAAY;QACxC,IAAIyD,KAAK,GAAGkG,KAAK,CAAChG,QAAN,EAAZ;;QACA,IAAI0H,IAAI,GAAG1B,KAAK,CAACO,KAAN,CAAYzG,KAAK,CAACmH,gBAAlB,CAAX;;QACA,IAAIrI,WAAW,GAAGoH,KAAK,CAACoE,YAAN,EAAlB;;QACA,IAAIlH,MAAM,GAAG8C,KAAK,CAAC1G,KAAN,CAAYqQ,oBAAZ,CAAiC9V,QAAQ,CAAC;UACrD8N,YAAY,EAAE3B,KAAK,CAAC1G,KAAN,CAAYqI,YAD2B;UAErD9I,mBAAmB,EAAEmH,KAAK,CAACnH,mBAF0B;UAGrDD,WAAW,EAAEA,WAHwC;UAIrDgR,eAAe,EAAElI;QAJoC,CAAD,EAKnD5H,KALmD,CAAzC,CAAb;;QAMAkG,KAAK,CAACnH,mBAAN,GAA4BD,WAA5B;QACAqE,SAAS,CAACC,MAAD,EAAS8C,KAAK,CAAC1G,KAAN,CAAYrD,WAAZ,CAAwBkG,QAAjC,CAAT;MACD,CAZ4B,EAY1B,GAZ0B,CAA7B;;MAaA,IAAI0N,WAAW,GAAG7J,KAAK,CAAC1G,KAAxB;MAAA,IACE6H,uBAAuB,GAAG0I,WAAW,CAAC1I,uBADxC;MAAA,IAEE2I,qBAAqB,GAAGD,WAAW,CAACE,uBAFtC;MAAA,IAGEC,iBAAiB,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC3I,uBAAnC,GAA6D2I,qBAHnF;MAAA,IAIEtI,aAAa,GAAGqI,WAAW,CAACrI,aAJ9B;MAAA,IAKEyI,qBAAqB,GAAGJ,WAAW,CAACK,aALtC;MAAA,IAMEC,OAAO,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmCzI,aAAnC,GAAmDyI,qBAN/D;MAAA,IAOEG,qBAAqB,GAAGP,WAAW,CAACQ,iBAPtC;MAAA,IAQEC,WAAW,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBARxD;MAAA,IASEG,qBAAqB,GAAGV,WAAW,CAACW,mBATtC;MAAA,IAUEC,aAAa,GAAGF,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,IAAnC,GAA0CA,qBAV5D;;MAWA,IAAIG,MAAM,GAAG1K,KAAK,CAAChG,QAAN,CAAe;QAC1BiH,gBAAgB,EAAE+I,iBADQ;QAE1BrR,MAAM,EAAEwR,OAFkB;QAG1B5I,UAAU,EAAE+I,WAHc;QAI1BhJ,YAAY,EAAEmJ;MAJY,CAAf,CAAb;;MAMA,IAAIC,MAAM,CAACpJ,YAAP,IAAuB,IAAvB,IAA+BtB,KAAK,CAAC1G,KAAN,CAAY+Q,iBAAZ,KAAkC9P,SAArE,EAAgF;QAC9EmQ,MAAM,CAACnJ,UAAP,GAAoBvB,KAAK,CAAC1G,KAAN,CAAYqI,YAAZ,CAAyB+I,MAAM,CAACpJ,YAAhC,CAApB;MACD;;MACDtB,KAAK,CAAClG,KAAN,GAAc4Q,MAAd;MACA,OAAO1K,KAAP;IACD;;IACD,IAAI2K,MAAM,GAAG9K,SAAS,CAAChF,SAAvB;IACA;AACJ;AACA;;IACI8P,MAAM,CAACC,qBAAP,GAA+B,SAASA,qBAAT,GAAiC;MAC9D,KAAKpK,UAAL,CAAgBjL,OAAhB,CAAwB,UAAU0K,EAAV,EAAc;QACpCvJ,YAAY,CAACuJ,EAAD,CAAZ;MACD,CAFD;MAGA,KAAKO,UAAL,GAAkB,EAAlB;IACD;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IAfI;;IAgBAmK,MAAM,CAAC3Q,QAAP,GAAkB,SAAS6Q,UAAT,CAAoBC,YAApB,EAAkC;MAClD,IAAIA,YAAY,KAAK,KAAK,CAA1B,EAA6B;QAC3BA,YAAY,GAAG,KAAKhR,KAApB;MACD;;MACD,OAAOE,QAAQ,CAAC8Q,YAAD,EAAe,KAAKxR,KAApB,CAAf;IACD,CALD;;IAMAqR,MAAM,CAACvG,YAAP,GAAsB,SAASA,YAAT,GAAwB;MAC5C;MACA;MACA;MACA;MACA,IAAIjJ,SAAS,GAAG,KAAKoF,KAAL,CAAWzJ,MAA3B;;MACA,IAAI,KAAKqE,SAAL,IAAkB,IAAtB,EAA4B;QAC1BA,SAAS,GAAG,KAAKA,SAAjB;MACD,CAFD,MAEO,IAAI,KAAK7B,KAAL,CAAW6B,SAAX,KAAyBZ,SAA7B,EAAwC;QAC7CY,SAAS,GAAG,KAAK7B,KAAL,CAAW6B,SAAvB;MACD;;MACD,OAAOA,SAAP;IACD,CAZD;;IAaAwP,MAAM,CAACvP,oBAAP,GAA8B,SAASA,oBAAT,CAA8BQ,KAA9B,EAAqC;MACjE,OAAO,KAAKtC,KAAL,CAAWrD,WAAX,CAAuBkG,QAAvB,CAAgCkB,cAAhC,CAA+C,KAAKgD,SAAL,CAAezE,KAAf,CAA/C,CAAP;IACD,CAFD;;IAGA+O,MAAM,CAACI,6BAAP,GAAuC,SAASA,6BAAT,GAAyC;MAC9E;MACA;QACE,IAAI9V,IAAI,GAAG,KAAKmG,oBAAL,CAA0B,KAAKpB,QAAL,GAAgBiH,gBAA1C,CAAX;QACA,KAAK3H,KAAL,CAAWtE,cAAX,CAA0BC,IAA1B,EAAgC,KAAKgT,SAArC;MACD;IACF,CAND;;IAOA0C,MAAM,CAACxG,oBAAP,GAA8B,SAASA,oBAAT,CAA8BF,MAA9B,EAAsC/C,eAAtC,EAAuD;MACnF,IAAI8J,MAAM,GAAG,IAAb;;MACA,IAAI7P,SAAS,GAAG,KAAKiJ,YAAL,EAAhB;;MACA,IAAI6G,eAAe,GAAG,KAAKjR,QAAL,EAAtB;MAAA,IACEiH,gBAAgB,GAAGgK,eAAe,CAAChK,gBADrC;;MAEA,IAAI9F,SAAS,GAAG,CAAhB,EAAmB;QACjB,IAAImJ,oBAAoB,GAAGtJ,oBAAoB,CAACiJ,MAAD,EAAShD,gBAAT,EAA2B9F,SAA3B,EAAsC,UAAUS,KAAV,EAAiB;UACpG,OAAOoP,MAAM,CAAC5P,oBAAP,CAA4BQ,KAA5B,CAAP;QACD,CAF8C,CAA/C;QAGA,KAAKoF,mBAAL,CAAyBsD,oBAAzB,EAA+CpD,eAA/C;MACD;IACF,CAXD;;IAYAyJ,MAAM,CAACtI,kBAAP,GAA4B,SAASA,kBAAT,GAA8B;MACxD,IAAI6I,eAAe,GAAG,KAAKlR,QAAL,EAAtB;MAAA,IACEiH,gBAAgB,GAAGiK,eAAe,CAACjK,gBADrC;MAAA,IAEEM,UAAU,GAAG2J,eAAe,CAAC3J,UAF/B;MAAA,IAGED,YAAY,GAAG4J,eAAe,CAAC5J,YAHjC;MAAA,IAIE3I,MAAM,GAAGuS,eAAe,CAACvS,MAJ3B;;MAKA,IAAIgJ,YAAY,GAAG,KAAKrI,KAAL,CAAWqI,YAA9B;MACA,IAAI1B,EAAE,GAAG,KAAKA,EAAd;MACA,IAAIgD,YAAY,GAAG,KAAKA,YAAxB;MAAA,IACE0C,oBAAoB,GAAG,KAAKA,oBAD9B;MAAA,IAEEmB,aAAa,GAAG,KAAKA,aAFvB;MAAA,IAGEoB,YAAY,GAAG,KAAKA,YAHtB;MAAA,IAIElB,aAAa,GAAG,KAAKA,aAJvB;MAAA,IAKE0B,YAAY,GAAG,KAAKA,YALtB;MAAA,IAMEc,QAAQ,GAAG,KAAKA,QANlB;MAAA,IAOEC,SAAS,GAAG,KAAKA,SAPnB;MAAA,IAQEvE,UAAU,GAAG,KAAKA,UARpB;MAAA,IASEzD,UAAU,GAAG,KAAKA,UATpB;MAAA,IAUEG,iBAAiB,GAAG,KAAKA,iBAV3B;MAAA,IAWEE,qBAAqB,GAAG,KAAKA,qBAX/B;MAAA,IAYEd,mBAAmB,GAAG,KAAKA,mBAZ7B;MAAA,IAaEK,cAAc,GAAG,KAAKA,cAbxB;MAAA,IAcE+H,UAAU,GAAG,KAAKA,UAdpB;MAAA,IAeErE,KAAK,GAAG,KAAKA,KAff;MAAA,IAgBElE,YAAY,GAAG,KAAKA,YAhBtB;MAAA,IAiBEE,cAAc,GAAG,KAAKA,cAjBxB;MAAA,IAkBEuB,QAAQ,GAAG,KAAKlB,gBAlBlB;MAmBA,OAAO;QACL;QACA6B,YAAY,EAAEA,YAFT;QAGL0C,oBAAoB,EAAEA,oBAHjB;QAILmB,aAAa,EAAEA,aAJV;QAKLoB,YAAY,EAAEA,YALT;QAMLlB,aAAa,EAAEA,aANV;QAOL0B,YAAY,EAAEA,YAPT;QAQL;QACA3D,KAAK,EAAEA,KATF;QAULyE,QAAQ,EAAEA,QAVL;QAWLC,SAAS,EAAEA,SAXN;QAYLvE,UAAU,EAAEA,UAZP;QAaLzD,UAAU,EAAEA,UAbP;QAcLG,iBAAiB,EAAEA,iBAdd;QAeLE,qBAAqB,EAAEA,qBAflB;QAgBLd,mBAAmB,EAAEA,mBAhBhB;QAiBLK,cAAc,EAAEA,cAjBX;QAkBL+H,UAAU,EAAEA,UAlBP;QAmBLvI,YAAY,EAAEA,YAnBT;QAoBLE,cAAc,EAAEA,cApBX;QAqBLuB,QAAQ,EAAEA,QArBL;QAsBL;QACAX,YAAY,EAAEA,YAvBT;QAwBL;QACA1B,EAAE,EAAEA,EAzBC;QA0BL;QACAgB,gBAAgB,EAAEA,gBA3Bb;QA4BLM,UAAU,EAAEA,UA5BP;QA6BL5I,MAAM,EAAEA,MA7BH;QA8BL2I,YAAY,EAAEA;MA9BT,CAAP;IAgCD,CA3DD;;IA4DAqJ,MAAM,CAACQ,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;MACtD,IAAIC,MAAM,GAAG,IAAb;MACA;;;MACA,IAAI9O,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,CAAC,KAA1C,IAAmD,KAAK0L,YAAL,CAAkBxE,MAArE,IAA+E,CAAC,KAAKwE,YAAL,CAAkBzE,gBAAtG,EAAwH;QACtH4H,mCAAmC,CAAC,KAAKpD,SAAN,EAAiB,KAAKC,YAAtB,CAAnC;MACD;MAED;;;MACA;QACE;QACA;QACA;QACA;QACA;QACA,IAAIa,WAAW,GAAG,SAASA,WAAT,GAAuB;UACvCqC,MAAM,CAACvE,WAAP,GAAqB,IAArB;QACD,CAFD;;QAGA,IAAIyE,SAAS,GAAG,SAASA,SAAT,CAAmB9T,KAAnB,EAA0B;UACxC4T,MAAM,CAACvE,WAAP,GAAqB,KAArB,CADwC,CAExC;UACA;;UACA,IAAI0E,sBAAsB,GAAGzP,qBAAqB,CAACtE,KAAK,CAACuE,MAAP,EAAe,CAACqP,MAAM,CAACpI,SAAR,EAAmBoI,MAAM,CAACnD,SAA1B,CAAf,EAAqDmD,MAAM,CAAC9R,KAAP,CAAarD,WAAlE,CAAlD;;UACA,IAAI,CAACsV,sBAAD,IAA2BH,MAAM,CAACpR,QAAP,GAAkBrB,MAAjD,EAAyD;YACvDyS,MAAM,CAACrG,KAAP,CAAa;cACX3L,IAAI,EAAEiF;YADK,CAAb,EAEG,YAAY;cACb,OAAO+M,MAAM,CAAC9R,KAAP,CAAakS,YAAb,CAA0BJ,MAAM,CAAC/I,kBAAP,EAA1B,CAAP;YACD,CAJD;UAKD;QACF,CAZD,CATF,CAsBE;QACA;QACA;QACA;QACA;QACA;;;QACA,IAAIoJ,YAAY,GAAG,SAASA,YAAT,GAAwB;UACzCL,MAAM,CAACM,WAAP,GAAqB,KAArB;QACD,CAFD;;QAGA,IAAIC,WAAW,GAAG,SAASA,WAAT,GAAuB;UACvCP,MAAM,CAACM,WAAP,GAAqB,IAArB;QACD,CAFD;;QAGA,IAAIE,UAAU,GAAG,SAASA,UAAT,CAAoBpU,KAApB,EAA2B;UAC1C,IAAI+T,sBAAsB,GAAGzP,qBAAqB,CAACtE,KAAK,CAACuE,MAAP,EAAe,CAACqP,MAAM,CAACpI,SAAR,EAAmBoI,MAAM,CAACnD,SAA1B,CAAf,EAAqDmD,MAAM,CAAC9R,KAAP,CAAarD,WAAlE,EAA+E,KAA/E,CAAlD;;UACA,IAAI,CAACmV,MAAM,CAACM,WAAR,IAAuB,CAACH,sBAAxB,IAAkDH,MAAM,CAACpR,QAAP,GAAkBrB,MAAxE,EAAgF;YAC9EyS,MAAM,CAACrG,KAAP,CAAa;cACX3L,IAAI,EAAEgG;YADK,CAAb,EAEG,YAAY;cACb,OAAOgM,MAAM,CAAC9R,KAAP,CAAakS,YAAb,CAA0BJ,MAAM,CAAC/I,kBAAP,EAA1B,CAAP;YACD,CAJD;UAKD;QACF,CATD;;QAUA,IAAIpM,WAAW,GAAG,KAAKqD,KAAL,CAAWrD,WAA7B;QACAA,WAAW,CAAC4V,gBAAZ,CAA6B,WAA7B,EAA0C9C,WAA1C;QACA9S,WAAW,CAAC4V,gBAAZ,CAA6B,SAA7B,EAAwCP,SAAxC;QACArV,WAAW,CAAC4V,gBAAZ,CAA6B,YAA7B,EAA2CJ,YAA3C;QACAxV,WAAW,CAAC4V,gBAAZ,CAA6B,WAA7B,EAA0CF,WAA1C;QACA1V,WAAW,CAAC4V,gBAAZ,CAA6B,UAA7B,EAAyCD,UAAzC;;QACA,KAAKE,OAAL,GAAe,YAAY;UACzBV,MAAM,CAACR,qBAAP;;UACAQ,MAAM,CAAC1B,YAAP,CAAoBjT,MAApB;;UACAR,WAAW,CAAC8V,mBAAZ,CAAgC,WAAhC,EAA6ChD,WAA7C;UACA9S,WAAW,CAAC8V,mBAAZ,CAAgC,SAAhC,EAA2CT,SAA3C;UACArV,WAAW,CAAC8V,mBAAZ,CAAgC,YAAhC,EAA8CN,YAA9C;UACAxV,WAAW,CAAC8V,mBAAZ,CAAgC,WAAhC,EAA6CJ,WAA7C;UACA1V,WAAW,CAAC8V,mBAAZ,CAAgC,UAAhC,EAA4CH,UAA5C;QACD,CARD;MASD;IACF,CApED;;IAqEAjB,MAAM,CAACqB,YAAP,GAAsB,SAASA,YAAT,CAAsB5R,SAAtB,EAAiCqC,SAAjC,EAA4C;MAChE,IAAIwP,MAAM,GAAG,KAAK3S,KAAL,CAAW2H,gBAAX,KAAgC1G,SAAhC,GAA4C,KAAKP,QAAL,EAA5C,GAA8D,KAAKV,KAAhF;MAAA,IACE4S,uBAAuB,GAAGD,MAAM,CAAChL,gBADnC;;MAEA,IAAIkL,MAAM,GAAG1P,SAAS,CAACwE,gBAAV,KAA+B1G,SAA/B,GAA2CH,SAA3C,GAAuDqC,SAApE;MAAA,IACE2P,oBAAoB,GAAGD,MAAM,CAAClL,gBADhC;;MAEA,IAAIoL,cAAc,GAAGH,uBAAuB,IAAI,KAAKlS,QAAL,GAAgBrB,MAA3C,IAAqD,CAACyB,SAAS,CAACzB,MAArF;MACA,IAAI2T,oBAAoB,GAAGJ,uBAAuB,KAAKE,oBAAvD;MACA,OAAOC,cAAc,IAAIC,oBAAzB;IACD,CARD;;IASA3B,MAAM,CAAC4B,kBAAP,GAA4B,SAASA,kBAAT,CAA4B9P,SAA5B,EAAuCrC,SAAvC,EAAkD;MAC5E,IAAIkC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;QACzCH,2BAA2B,CAAC,KAAKvC,KAAN,EAAa2C,SAAb,EAAwB,KAAKnD,KAA7B,CAA3B;QACA;;QACA,IAAI,KAAK4O,YAAL,CAAkBxE,MAAlB,IAA4B,CAAC,KAAKwE,YAAL,CAAkBzE,gBAAnD,EAAqE;UACnE4H,mCAAmC,CAAC,KAAKpD,SAAN,EAAiB,KAAKC,YAAtB,CAAnC;QACD;MACF;;MACD,IAAI5N,gBAAgB,CAAC,KAAKhB,KAAN,EAAa,cAAb,CAAhB,IAAgD,KAAKA,KAAL,CAAWkT,mBAAX,CAA+B/P,SAAS,CAAC6E,YAAzC,EAAuD,KAAKhI,KAAL,CAAWgI,YAAlE,CAApD,EAAqI;QACnI,KAAKF,gBAAL,CAAsB;UACpBhI,IAAI,EAAE+F,iCADc;UAEpBoC,UAAU,EAAE,KAAKjI,KAAL,CAAWqI,YAAX,CAAwB,KAAKrI,KAAL,CAAWgI,YAAnC;QAFQ,CAAtB;MAID;;MACD,IAAI,CAAC,KAAK6H,cAAN,IAAwB,KAAK6C,YAAL,CAAkB5R,SAAlB,EAA6BqC,SAA7B,CAA5B,EAAqE;QACnE,KAAKsO,6BAAL;MACD;MAED;;;MACA;QACE,KAAKrB,YAAL;MACD;IACF,CAtBD;;IAuBAiB,MAAM,CAAC8B,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;MAC5D,KAAKX,OAAL,GAD4D,CAC5C;IACjB,CAFD;;IAGAnB,MAAM,CAAC+B,MAAP,GAAgB,SAASA,MAAT,GAAkB;MAChC,IAAIC,QAAQ,GAAG7T,WAAW,CAAC,KAAKQ,KAAL,CAAWqT,QAAZ,EAAsB5X,IAAtB,CAA1B,CADgC,CAEhC;MACA;MACA;;MACA,KAAKqU,UAAL,GALgC,CAMhC;MACA;MACA;MACA;;MACA,KAAKnG,YAAL,CAAkBS,MAAlB,GAA2B,KAA3B;MACA,KAAKT,YAAL,CAAkBK,MAAlB,GAA2B/I,SAA3B;MACA,KAAK0I,YAAL,CAAkBQ,gBAAlB,GAAqClJ,SAArC,CAZgC,CAahC;;MACA,KAAK2N,YAAL,CAAkBxE,MAAlB,GAA2B,KAA3B;MACA,KAAKwE,YAAL,CAAkB5E,MAAlB,GAA2B/I,SAA3B;MACA,KAAK2N,YAAL,CAAkBzE,gBAAlB,GAAqClJ,SAArC,CAhBgC,CAiBhC;;MACA,KAAKuM,aAAL,CAAmBpD,MAAnB,GAA4B,KAA5B,CAlBgC,CAmBhC;;MACA,KAAKsD,aAAL,CAAmBtD,MAAnB,GAA4B,KAA5B;MACA,IAAIvK,OAAO,GAAGL,WAAW,CAAC6T,QAAQ,CAAC,KAAKtK,kBAAL,EAAD,CAAT,CAAzB;;MACA,IAAI,CAAClJ,OAAL,EAAc;QACZ,OAAO,IAAP;MACD;;MACD,IAAI,KAAK8J,YAAL,CAAkBS,MAAlB,IAA4B,KAAKpK,KAAL,CAAWmK,gBAA3C,EAA6D;QAC3D,IAAInH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC,CAAC,KAAKyG,YAAL,CAAkBQ,gBAA5D,IAAgF,CAAC,KAAKnK,KAAL,CAAWmK,gBAAhG,EAAkH;UAChHmJ,mCAAmC,CAACzT,OAAD,EAAU,KAAK8J,YAAf,CAAnC;QACD;;QACD,OAAO9J,OAAP;MACD,CALD,MAKO,IAAID,YAAY,CAACC,OAAD,CAAhB,EAA2B;QAChC;QACA;QACA,OAAO,aAAalF,YAAY,CAACkF,OAAD,EAAU,KAAK8J,YAAL,CAAkB5J,eAAe,CAACF,OAAD,CAAjC,CAAV,CAAhC;MACD;MAED;;;MACA,IAAImD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;QACzC;QACA;QAEA,MAAM,IAAIqQ,KAAJ,CAAU,sFAAV,CAAN;MACD;MAED;;;MACA,OAAOtS,SAAP;IACD,CA9CD;;IA+CA,OAAOsF,SAAP;EACD,CAz5B4B,CAy5B3B3L,SAz5B2B,CAA7B;;EA05BA2L,SAAS,CAACiN,YAAV,GAAyB;IACvB3L,uBAAuB,EAAE,IADF;IAEvBK,aAAa,EAAE,KAFQ;IAGvBmI,oBAAoB,EAAElR,sBAHC;IAIvBkJ,YAAY,EAAE,SAASA,YAAT,CAAsBhB,CAAtB,EAAyB;MACrC,IAAIA,CAAC,IAAI,IAAT,EAAe;QACb,OAAO,EAAP;MACD;;MACD,IAAIrE,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyC7B,aAAa,CAACgG,CAAD,CAAtD,IAA6D,CAACA,CAAC,CAAC7I,cAAF,CAAiB,UAAjB,CAAlE,EAAgG;QAC9F;QACA4B,OAAO,CAACqT,IAAR,CAAa,4MAAb,EAA2N,6BAA3N,EAA0PpM,CAA1P;MACD;;MACD,OAAOpI,MAAM,CAACoI,CAAD,CAAb;IACD,CAbsB;IAcvBgC,aAAa,EAAE5N,IAdQ;IAevBqN,kBAAkB,EAAErN,IAfG;IAgBvB+N,YAAY,EAAE/N,IAhBS;IAiBvB8N,QAAQ,EAAE9N,IAjBa;IAkBvB6N,QAAQ,EAAE7N,IAlBa;IAmBvByW,YAAY,EAAEzW,IAnBS;IAoBvByX,mBAAmB,EAAE,SAASA,mBAAT,CAA6BQ,QAA7B,EAAuCtL,IAAvC,EAA6C;MAChE,OAAOsL,QAAQ,KAAKtL,IAApB;IACD,CAtBsB;IAuBvBzL,WAAW;IAAE;IACb,OAAOgX,MAAP,KAAkB,WAAlB,GAAgC,EAAhC,GAAqCA,MAxBd;IAyBvBzK,YAAY,EAAE,SAASA,YAAT,CAAsB1I,KAAtB,EAA6BiI,UAA7B,EAAyC;MACrD,OAAOA,UAAP;IACD,CA3BsB;IA4BvB0B,gBAAgB,EAAE,KA5BK;IA6BvBzO,cAAc,EAAEA;EA7BO,CAAzB;EA+BA6K,SAAS,CAACqN,gBAAV,GAA6B7N,kBAA7B;EACA,OAAOQ,SAAP;AACD,CA57B4B,EAA7B;;AA67BAvD,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCqD,SAAS,CAACsN,SAAV,GAAsB;EAC5DR,QAAQ,EAAE3Y,SAAS,CAACoZ,IADwC;EAE5DjM,uBAAuB,EAAEnN,SAAS,CAACqZ,MAFyB;EAG5D7L,aAAa,EAAExN,SAAS,CAACsZ,IAHmC;EAI5DvD,uBAAuB,EAAE/V,SAAS,CAACqZ,MAJyB;EAK5D7C,mBAAmB,EAAExW,SAAS,CAACuZ,GAL6B;EAM5DlD,iBAAiB,EAAErW,SAAS,CAACwZ,MAN+B;EAO5DtD,aAAa,EAAElW,SAAS,CAACsZ,IAPmC;EAQ5D3D,oBAAoB,EAAE3V,SAAS,CAACoZ,IAR4B;EAS5DzL,YAAY,EAAE3N,SAAS,CAACoZ,IAToC;EAU5DvK,QAAQ,EAAE7O,SAAS,CAACoZ,IAVwC;EAW5DxK,QAAQ,EAAE5O,SAAS,CAACoZ,IAXwC;EAY5DzK,aAAa,EAAE3O,SAAS,CAACoZ,IAZmC;EAa5DhL,kBAAkB,EAAEpO,SAAS,CAACoZ,IAb8B;EAc5DtK,YAAY,EAAE9O,SAAS,CAACoZ,IAdoC;EAe5D5B,YAAY,EAAExX,SAAS,CAACoZ,IAfoC;EAgB5DZ,mBAAmB,EAAExY,SAAS,CAACoZ,IAhB6B;EAiB5D5K,YAAY,EAAExO,SAAS,CAACoZ,IAjBoC;EAkB5DjS,SAAS,EAAEnH,SAAS,CAACqZ,MAlBuC;EAmB5DpN,EAAE,EAAEjM,SAAS,CAACwZ,MAnB8C;EAoB5DvX,WAAW,EAAEjC,SAAS,CAACyZ,KAAV,CAAgB;IAC3B5B,gBAAgB,EAAE7X,SAAS,CAACoZ,IADD;IAE3BrB,mBAAmB,EAAE/X,SAAS,CAACoZ,IAFJ;IAG3BjR,QAAQ,EAAEnI,SAAS,CAACyZ,KAAV,CAAgB;MACxBpQ,cAAc,EAAErJ,SAAS,CAACoZ,IADF;MAExBhR,aAAa,EAAEpI,SAAS,CAACuZ,GAFD;MAGxBrP,IAAI,EAAElK,SAAS,CAACuZ;IAHQ,CAAhB;EAHiB,CAAhB,CApB+C;EA6B5D9J,gBAAgB,EAAEzP,SAAS,CAACsZ,IA7BgC;EA8B5DtY,cAAc,EAAEhB,SAAS,CAACoZ,IA9BkC;EA+B5D;EACA;;EACA;EACA9L,YAAY,EAAEtN,SAAS,CAACuZ,GAlCoC;EAmC5D5U,MAAM,EAAE3E,SAAS,CAACsZ,IAnC0C;EAoC5D/L,UAAU,EAAEvN,SAAS,CAACwZ,MApCsC;EAqC5DvM,gBAAgB,EAAEjN,SAAS,CAACqZ,MArCgC;EAsC5DlN,OAAO,EAAEnM,SAAS,CAACwZ,MAtCyC;EAuC5DpN,OAAO,EAAEpM,SAAS,CAACwZ,MAvCyC;EAwC5DtN,MAAM,EAAElM,SAAS,CAACwZ,MAxC0C;EAyC5DnN,SAAS,EAAErM,SAAS,CAACoZ;EACrB;;AA1C4D,CAA9D,GA2CI,KAAK,CA3CT;AA4CA,IAAIM,WAAW,GAAG7N,SAAlB;;AACA,SAASwL,mCAAT,CAA6CpW,IAA7C,EAAmD0Y,MAAnD,EAA2D;EACzD,IAAIrK,MAAM,GAAGqK,MAAM,CAACrK,MAApB;;EACA,IAAI,CAACrO,IAAL,EAAW;IACT;IACAyE,OAAO,CAACC,KAAR,CAAc,+BAA+B2J,MAA/B,GAAwC,sEAAtD;EACD;AACF;;AACD,SAASsJ,mCAAT,CAA6CzT,OAA7C,EAAsDyU,MAAtD,EAA8D;EAC5D,IAAItK,MAAM,GAAGsK,MAAM,CAACtK,MAApB;EACA,IAAIuK,eAAe,GAAGvK,MAAM,KAAK,KAAjC;EACA,IAAIwK,WAAW,GAAG,CAAC5U,YAAY,CAACC,OAAD,CAA/B;;EACA,IAAI2U,WAAW,IAAI,CAACD,eAAhB,IAAmC,CAACpZ,YAAY,CAAC0E,OAAD,CAApD,EAA+D;IAC7D;IACAO,OAAO,CAACC,KAAR,CAAc,sFAAd;EACD,CAHD,MAGO,IAAI,CAACmU,WAAD,IAAgBD,eAApB,EAAqC;IAC1C;IACAnU,OAAO,CAACC,KAAR,CAAc,6GAA6G2J,MAA7G,GAAsH,IAApI;EACD;;EACD,IAAI,CAAC7O,YAAY,CAAC0E,OAAD,CAAb,IAA0B,CAACE,eAAe,CAACF,OAAD,CAAf,CAAyBmK,MAAzB,CAA/B,EAAiE;IAC/D;IACA5J,OAAO,CAACC,KAAR,CAAc,8CAA8C2J,MAA9C,GAAuD,8CAArE;EACD;AACF;;AAED,IAAIyK,WAAW,GAAG,CAAC,gBAAD,EAAmB,kBAAnB,EAAuC,OAAvC,EAAgD,aAAhD,CAAlB;AACA,IAAIC,0BAA0B,GAAG;EAC/B/M,gBAAgB,EAAE,CAAC,CADY;EAE/BtI,MAAM,EAAE,KAFuB;EAG/B2I,YAAY,EAAE,IAHiB;EAI/BC,UAAU,EAAE;AAJmB,CAAjC;;AAMA,SAAS0M,iBAAT,CAA2BC,MAA3B,EAAmCpU,KAAnC,EAA0CqU,QAA1C,EAAoD;EAClD,IAAI7U,KAAK,GAAG4U,MAAM,CAAC5U,KAAnB;EAAA,IACEF,IAAI,GAAG8U,MAAM,CAAC9U,IADhB;EAEA,IAAIgV,OAAO,GAAG,EAAd;EACAnU,MAAM,CAACC,IAAP,CAAYJ,KAAZ,EAAmBvE,OAAnB,CAA2B,UAAU8E,GAAV,EAAe;IACxCgU,qBAAqB,CAAChU,GAAD,EAAM6T,MAAN,EAAcpU,KAAd,EAAqBqU,QAArB,CAArB;;IACA,IAAIA,QAAQ,CAAC9T,GAAD,CAAR,KAAkBP,KAAK,CAACO,GAAD,CAA3B,EAAkC;MAChC+T,OAAO,CAAC/T,GAAD,CAAP,GAAe8T,QAAQ,CAAC9T,GAAD,CAAvB;IACD;EACF,CALD;;EAMA,IAAIf,KAAK,CAACqJ,aAAN,IAAuB1I,MAAM,CAACC,IAAP,CAAYkU,OAAZ,EAAqBtX,MAAhD,EAAwD;IACtDwC,KAAK,CAACqJ,aAAN,CAAoB9O,QAAQ,CAAC;MAC3BuF,IAAI,EAAEA;IADqB,CAAD,EAEzBgV,OAFyB,CAA5B;EAGD;AACF;;AACD,SAASC,qBAAT,CAA+BhU,GAA/B,EAAoC6T,MAApC,EAA4CpU,KAA5C,EAAmDqU,QAAnD,EAA6D;EAC3D,IAAI7U,KAAK,GAAG4U,MAAM,CAAC5U,KAAnB;EAAA,IACEF,IAAI,GAAG8U,MAAM,CAAC9U,IADhB;EAEA,IAAIkV,OAAO,GAAG,OAAOC,gBAAgB,CAAClU,GAAD,CAAvB,GAA+B,QAA7C;;EACA,IAAIf,KAAK,CAACgV,OAAD,CAAL,IAAkBH,QAAQ,CAAC9T,GAAD,CAAR,KAAkBE,SAApC,IAAiD4T,QAAQ,CAAC9T,GAAD,CAAR,KAAkBP,KAAK,CAACO,GAAD,CAA5E,EAAmF;IACjFf,KAAK,CAACgV,OAAD,CAAL,CAAeza,QAAQ,CAAC;MACtBuF,IAAI,EAAEA;IADgB,CAAD,EAEpB+U,QAFoB,CAAvB;EAGD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS3L,YAAT,CAAsBgM,CAAtB,EAAyBC,CAAzB,EAA4B;EAC1B,OAAOA,CAAC,CAACL,OAAT;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASM,uBAAT,CAAiCC,mBAAjC,EAAsD;EACpD,IAAIrN,YAAY,GAAGqN,mBAAmB,CAACrN,YAAvC;EAAA,IACEsN,iBAAiB,GAAGD,mBAAmB,CAAChN,YAD1C;EAEA,OAAOL,YAAY,GAAGsN,iBAAiB,CAACtN,YAAD,CAAjB,GAAkC,qBAArC,GAA6D,EAAhF;AACD;AAED;AACA;AACA;;;AACA,IAAIuN,gBAAgB,GAAGxY,QAAQ,CAAC,UAAUyY,cAAV,EAA0B3S,QAA1B,EAAoC;EAClEc,SAAS,CAAC6R,cAAc,EAAf,EAAmB3S,QAAnB,CAAT;AACD,CAF8B,EAE5B,GAF4B,CAA/B,C,CAIA;;AACA,IAAI4S,yBAAyB,GAAG,OAAO9B,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAAC9Q,QAAd,KAA2B,WAA5D,IAA2E,OAAO8Q,MAAM,CAAC9Q,QAAP,CAAgBmB,aAAvB,KAAyC,WAApH,GAAkIhJ,eAAlI,GAAoJF,SAApL;;AACA,SAAS4a,aAAT,CAAuBxZ,IAAvB,EAA6B;EAC3B,IAAIyZ,OAAO,GAAGzZ,IAAI,CAACyK,EAAnB;EAAA,IACEA,EAAE,GAAGgP,OAAO,KAAK,KAAK,CAAjB,GAAqB,eAAe3W,UAAU,EAA9C,GAAmD2W,OAD1D;EAAA,IAEE9O,OAAO,GAAG3K,IAAI,CAAC2K,OAFjB;EAAA,IAGED,MAAM,GAAG1K,IAAI,CAAC0K,MAHhB;EAAA,IAIEG,SAAS,GAAG7K,IAAI,CAAC6K,SAJnB;EAAA,IAKE6O,cAAc,GAAG1Z,IAAI,CAAC0Z,cALxB;EAAA,IAME9O,OAAO,GAAG5K,IAAI,CAAC4K,OANjB;EAOA,IAAI+O,aAAa,GAAGhb,MAAM,CAAC;IACzBgM,OAAO,EAAEA,OAAO,IAAIF,EAAE,GAAG,QADA;IAEzBC,MAAM,EAAEA,MAAM,IAAID,EAAE,GAAG,OAFE;IAGzBI,SAAS,EAAEA,SAAS,IAAI,UAAUzE,KAAV,EAAiB;MACvC,OAAOqE,EAAE,GAAG,QAAL,GAAgBrE,KAAvB;IACD,CALwB;IAMzBsT,cAAc,EAAEA,cAAc,IAAIjP,EAAE,GAAG,gBANd;IAOzBG,OAAO,EAAEA,OAAO,IAAIH,EAAE,GAAG;EAPA,CAAD,CAA1B;EASA,OAAOkP,aAAa,CAAC9W,OAArB;AACD;;AACD,SAAS+W,eAAT,CAAyBC,QAAzB,EAAmCC,SAAnC,EAA8C/O,KAA9C,EAAqDgP,YAArD,EAAmE;EACjE,IAAI7N,IAAJ,EAAU9F,KAAV;;EACA,IAAIyT,QAAQ,KAAK9U,SAAjB,EAA4B;IAC1B,IAAI+U,SAAS,KAAK/U,SAAlB,EAA6B;MAC3B,MAAM,IAAIsS,KAAJ,CAAU0C,YAAV,CAAN;IACD;;IACD7N,IAAI,GAAGnB,KAAK,CAAC+O,SAAD,CAAZ;IACA1T,KAAK,GAAG0T,SAAR;EACD,CAND,MAMO;IACL1T,KAAK,GAAG0T,SAAS,KAAK/U,SAAd,GAA0BgG,KAAK,CAAC7F,OAAN,CAAc2U,QAAd,CAA1B,GAAoDC,SAA5D;IACA5N,IAAI,GAAG2N,QAAP;EACD;;EACD,OAAO,CAAC3N,IAAD,EAAO9F,KAAP,CAAP;AACD;;AACD,SAAS+F,YAAT,CAAsBD,IAAtB,EAA4B;EAC1B,OAAOA,IAAI,GAAGnJ,MAAM,CAACmJ,IAAD,CAAT,GAAkB,EAA7B;AACD;;AACD,SAAS8N,sBAAT,CAAgCnV,GAAhC,EAAqC;EACnC,OAAO,UAAUoV,IAAV,CAAepV,GAAf,CAAP;AACD;;AACD,SAASkU,gBAAT,CAA0Bf,MAA1B,EAAkC;EAChC,OAAO,KAAKA,MAAM,CAACkC,KAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmBC,WAAnB,EAAL,GAAwCnC,MAAM,CAACkC,KAAP,CAAa,CAAb,CAA/C;AACD;;AACD,SAASE,YAAT,CAAsBC,GAAtB,EAA2B;EACzB,IAAIzX,GAAG,GAAGjE,MAAM,CAAC0b,GAAD,CAAhB,CADyB,CAEzB;EACA;EACA;EACA;EACA;;EACAzX,GAAG,CAACC,OAAJ,GAAcwX,GAAd;EACA,OAAOzX,GAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS0X,kBAAT,CAA4BC,OAA5B,EAAqCC,YAArC,EAAmD1W,KAAnD,EAA0D;EACxD,IAAI2W,YAAY,GAAG9b,MAAM,EAAzB;EACA,IAAI+b,SAAS,GAAG/b,MAAM,EAAtB;EACA,IAAIgc,eAAe,GAAG9b,WAAW,CAAC,UAAUyF,KAAV,EAAiBoU,MAAjB,EAAyB;IACzDgC,SAAS,CAAC7X,OAAV,GAAoB6V,MAApB;IACApU,KAAK,GAAGE,QAAQ,CAACF,KAAD,EAAQoU,MAAM,CAAC5U,KAAf,CAAhB;IACA,IAAI8U,OAAO,GAAG2B,OAAO,CAACjW,KAAD,EAAQoU,MAAR,CAArB;IACA,IAAIC,QAAQ,GAAGD,MAAM,CAAC5U,KAAP,CAAakJ,YAAb,CAA0B1I,KAA1B,EAAiCjG,QAAQ,CAAC,EAAD,EAAKqa,MAAL,EAAa;MACnEE,OAAO,EAAEA;IAD0D,CAAb,CAAzC,CAAf;IAGA,OAAOD,QAAP;EACD,CARgC,EAQ9B,CAAC4B,OAAD,CAR8B,CAAjC;;EASA,IAAIK,WAAW,GAAG7b,UAAU,CAAC4b,eAAD,EAAkBH,YAAlB,CAA5B;EAAA,IACElW,KAAK,GAAGsW,WAAW,CAAC,CAAD,CADrB;EAAA,IAEEC,QAAQ,GAAGD,WAAW,CAAC,CAAD,CAFxB;;EAGA,IAAIE,QAAQ,GAAGV,YAAY,CAACtW,KAAD,CAA3B;EACA,IAAIiX,iBAAiB,GAAGlc,WAAW,CAAC,UAAU6Z,MAAV,EAAkB;IACpD,OAAOmC,QAAQ,CAACxc,QAAQ,CAAC;MACvByF,KAAK,EAAEgX,QAAQ,CAACjY;IADO,CAAD,EAErB6V,MAFqB,CAAT,CAAf;EAGD,CAJkC,EAIhC,CAACoC,QAAD,CAJgC,CAAnC;EAKA,IAAIpC,MAAM,GAAGgC,SAAS,CAAC7X,OAAvB;EACAjE,SAAS,CAAC,YAAY;IACpB,IAAI8Z,MAAM,IAAI+B,YAAY,CAAC5X,OAAvB,IAAkC4X,YAAY,CAAC5X,OAAb,KAAyByB,KAA/D,EAAsE;MACpEmU,iBAAiB,CAACC,MAAD,EAASlU,QAAQ,CAACiW,YAAY,CAAC5X,OAAd,EAAuB6V,MAAM,CAAC5U,KAA9B,CAAjB,EAAuDQ,KAAvD,CAAjB;IACD;;IACDmW,YAAY,CAAC5X,OAAb,GAAuByB,KAAvB;EACD,CALQ,EAKN,CAACA,KAAD,EAAQR,KAAR,EAAe4U,MAAf,CALM,CAAT;EAMA,OAAO,CAACpU,KAAD,EAAQyW,iBAAR,CAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,sBAAT,CAAgCT,OAAhC,EAAyCC,YAAzC,EAAuD1W,KAAvD,EAA8D;EAC5D,IAAImX,mBAAmB,GAAGX,kBAAkB,CAACC,OAAD,EAAUC,YAAV,EAAwB1W,KAAxB,CAA5C;EAAA,IACEQ,KAAK,GAAG2W,mBAAmB,CAAC,CAAD,CAD7B;EAAA,IAEEJ,QAAQ,GAAGI,mBAAmB,CAAC,CAAD,CAFhC;;EAGA,OAAO,CAACzW,QAAQ,CAACF,KAAD,EAAQR,KAAR,CAAT,EAAyB+W,QAAzB,CAAP;AACD;;AACD,IAAIK,cAAc,GAAG;EACnB/O,YAAY,EAAEA,YADK;EAEnBa,YAAY,EAAEA,YAFK;EAGnBkM,uBAAuB,EAAEA,uBAHN;EAInB1Z,cAAc,EAAEA,cAJG;EAKnBiB,WAAW;EAAE;EACb,OAAOgX,MAAP,KAAkB,WAAlB,GAAgC,EAAhC,GAAqCA;AANlB,CAArB;;AAQA,SAAS0D,iBAAT,CAA2BrX,KAA3B,EAAkCsD,OAAlC,EAA2CgU,kBAA3C,EAA+D;EAC7D,IAAIA,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;IACjCA,kBAAkB,GAAG5C,0BAArB;EACD;;EACD,IAAIhV,YAAY,GAAGM,KAAK,CAAC,YAAYiV,gBAAgB,CAAC3R,OAAD,CAA7B,CAAxB;;EACA,IAAI5D,YAAY,KAAKuB,SAArB,EAAgC;IAC9B,OAAOvB,YAAP;EACD;;EACD,OAAO4X,kBAAkB,CAAChU,OAAD,CAAzB;AACD;;AACD,SAASiU,iBAAT,CAA2BvX,KAA3B,EAAkCsD,OAAlC,EAA2CgU,kBAA3C,EAA+D;EAC7D,IAAIA,kBAAkB,KAAK,KAAK,CAAhC,EAAmC;IACjCA,kBAAkB,GAAG5C,0BAArB;EACD;;EACD,IAAIpG,KAAK,GAAGtO,KAAK,CAACsD,OAAD,CAAjB;;EACA,IAAIgL,KAAK,KAAKrN,SAAd,EAAyB;IACvB,OAAOqN,KAAP;EACD;;EACD,IAAIkJ,YAAY,GAAGxX,KAAK,CAAC,YAAYiV,gBAAgB,CAAC3R,OAAD,CAA7B,CAAxB;;EACA,IAAIkU,YAAY,KAAKvW,SAArB,EAAgC;IAC9B,OAAOuW,YAAP;EACD;;EACD,OAAOH,iBAAiB,CAACrX,KAAD,EAAQsD,OAAR,EAAiBgU,kBAAjB,CAAxB;AACD;;AACD,SAASG,iBAAT,CAA2BzX,KAA3B,EAAkC;EAChC,IAAIgI,YAAY,GAAGuP,iBAAiB,CAACvX,KAAD,EAAQ,cAAR,CAApC;EACA,IAAIX,MAAM,GAAGkY,iBAAiB,CAACvX,KAAD,EAAQ,QAAR,CAA9B;EACA,IAAI2H,gBAAgB,GAAG4P,iBAAiB,CAACvX,KAAD,EAAQ,kBAAR,CAAxC;EACA,IAAIiI,UAAU,GAAGsP,iBAAiB,CAACvX,KAAD,EAAQ,YAAR,CAAlC;EACA,OAAO;IACL2H,gBAAgB,EAAEA,gBAAgB,GAAG,CAAnB,IAAwBK,YAAxB,IAAwC3I,MAAxC,GAAiDW,KAAK,CAACiH,KAAN,CAAY7F,OAAZ,CAAoB4G,YAApB,CAAjD,GAAqFL,gBADlG;IAELtI,MAAM,EAAEA,MAFH;IAGL2I,YAAY,EAAEA,YAHT;IAILC,UAAU,EAAEA;EAJP,CAAP;AAMD;;AACD,SAASyP,yBAAT,CAAmC1X,KAAnC,EAA0CQ,KAA1C,EAAiDmX,MAAjD,EAAyD;EACvD,IAAI1Q,KAAK,GAAGjH,KAAK,CAACiH,KAAlB;EAAA,IACEwJ,uBAAuB,GAAGzQ,KAAK,CAACyQ,uBADlC;EAAA,IAEE5I,uBAAuB,GAAG7H,KAAK,CAAC6H,uBAFlC;EAGA,IAAIG,YAAY,GAAGxH,KAAK,CAACwH,YAAzB;EAAA,IACEL,gBAAgB,GAAGnH,KAAK,CAACmH,gBAD3B;;EAEA,IAAIV,KAAK,CAACzJ,MAAN,KAAiB,CAArB,EAAwB;IACtB,OAAO,CAAC,CAAR;EACD,CARsD,CAUvD;;;EACA,IAAIiT,uBAAuB,KAAKxP,SAA5B,IAAyC0G,gBAAgB,KAAK8I,uBAAlE,EAA2F;IACzF,OAAOA,uBAAP;EACD;;EACD,IAAI5I,uBAAuB,KAAK5G,SAAhC,EAA2C;IACzC,OAAO4G,uBAAP;EACD;;EACD,IAAIG,YAAJ,EAAkB;IAChB,OAAOf,KAAK,CAAC7F,OAAN,CAAc4G,YAAd,CAAP;EACD;;EACD,IAAI2P,MAAM,KAAK,CAAf,EAAkB;IAChB,OAAO,CAAC,CAAR;EACD;;EACD,OAAOA,MAAM,GAAG,CAAT,GAAa1Q,KAAK,CAACzJ,MAAN,GAAe,CAA5B,GAAgC,CAAvC;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASoa,uBAAT,CAAiCvY,MAAjC,EAAyCwY,oBAAzC,EAA+Dlb,WAA/D,EAA4Emb,UAA5E,EAAwF;EACtF,IAAIC,wBAAwB,GAAGld,MAAM,CAAC;IACpC0S,WAAW,EAAE,KADuB;IAEpC6E,WAAW,EAAE;EAFuB,CAAD,CAArC;EAIAtX,SAAS,CAAC,YAAY;IACpB,IAAI,CAAC6B,WAAW,IAAI,IAAf,GAAsB,KAAK,CAA3B,GAA+BA,WAAW,CAAC4V,gBAA5C,KAAiE,IAArE,EAA2E;MACzE;IACD,CAHmB,CAKpB;IACA;;;IACA,IAAI9C,WAAW,GAAG,SAASA,WAAT,GAAuB;MACvCsI,wBAAwB,CAAChZ,OAAzB,CAAiCwO,WAAjC,GAA+C,IAA/C;IACD,CAFD;;IAGA,IAAIyE,SAAS,GAAG,SAASA,SAAT,CAAmB9T,KAAnB,EAA0B;MACxC6Z,wBAAwB,CAAChZ,OAAzB,CAAiCwO,WAAjC,GAA+C,KAA/C;;MACA,IAAIlO,MAAM,IAAI,CAACmD,qBAAqB,CAACtE,KAAK,CAACuE,MAAP,EAAeoV,oBAAoB,CAACG,GAArB,CAAyB,UAAUlZ,GAAV,EAAe;QACzF,OAAOA,GAAG,CAACC,OAAX;MACD,CAFkD,CAAf,EAEhCpC,WAFgC,CAApC,EAEkB;QAChBmb,UAAU;MACX;IACF,CAPD;;IAQA,IAAI3F,YAAY,GAAG,SAASA,YAAT,GAAwB;MACzC4F,wBAAwB,CAAChZ,OAAzB,CAAiCqT,WAAjC,GAA+C,KAA/C;IACD,CAFD;;IAGA,IAAIC,WAAW,GAAG,SAASA,WAAT,GAAuB;MACvC0F,wBAAwB,CAAChZ,OAAzB,CAAiCqT,WAAjC,GAA+C,IAA/C;IACD,CAFD;;IAGA,IAAIE,UAAU,GAAG,SAASA,UAAT,CAAoBpU,KAApB,EAA2B;MAC1C,IAAImB,MAAM,IAAI,CAAC0Y,wBAAwB,CAAChZ,OAAzB,CAAiCqT,WAA5C,IAA2D,CAAC5P,qBAAqB,CAACtE,KAAK,CAACuE,MAAP,EAAeoV,oBAAoB,CAACG,GAArB,CAAyB,UAAUlZ,GAAV,EAAe;QAC1I,OAAOA,GAAG,CAACC,OAAX;MACD,CAFmG,CAAf,EAEjFpC,WAFiF,EAEpE,KAFoE,CAArF,EAEyB;QACvBmb,UAAU;MACX;IACF,CAND;;IAOAnb,WAAW,CAAC4V,gBAAZ,CAA6B,WAA7B,EAA0C9C,WAA1C;IACA9S,WAAW,CAAC4V,gBAAZ,CAA6B,SAA7B,EAAwCP,SAAxC;IACArV,WAAW,CAAC4V,gBAAZ,CAA6B,YAA7B,EAA2CJ,YAA3C;IACAxV,WAAW,CAAC4V,gBAAZ,CAA6B,WAA7B,EAA0CF,WAA1C;IACA1V,WAAW,CAAC4V,gBAAZ,CAA6B,UAA7B,EAAyCD,UAAzC,EAnCoB,CAqCpB;;IACA,OAAO,SAASE,OAAT,GAAmB;MACxB7V,WAAW,CAAC8V,mBAAZ,CAAgC,WAAhC,EAA6ChD,WAA7C;MACA9S,WAAW,CAAC8V,mBAAZ,CAAgC,SAAhC,EAA2CT,SAA3C;MACArV,WAAW,CAAC8V,mBAAZ,CAAgC,YAAhC,EAA8CN,YAA9C;MACAxV,WAAW,CAAC8V,mBAAZ,CAAgC,WAAhC,EAA6CJ,WAA7C;MACA1V,WAAW,CAAC8V,mBAAZ,CAAgC,UAAhC,EAA4CH,UAA5C;IACD,CAND,CAtCoB,CA6CpB;EACD,CA9CQ,EA8CN,CAACjT,MAAD,EAAS1C,WAAT,CA9CM,CAAT;EA+CA,OAAOob,wBAAP;AACD;AAED;AACA;;;AACA,IAAIE,2BAA2B,GAAG,SAASA,2BAAT,GAAuC;EACvE,OAAOxc,IAAP;AACD,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;;AACA;;;AACA,IAAIuH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACzC+U,2BAA2B,GAAG,SAASA,2BAAT,GAAuC;IACnE,IAAIC,iBAAiB,GAAGrd,MAAM,CAAC,IAAD,CAA9B;;IACA,KAAK,IAAIyC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6B2a,QAAQ,GAAG,IAAIza,KAAJ,CAAUJ,IAAV,CAAxC,EAAyDK,IAAI,GAAG,CAArE,EAAwEA,IAAI,GAAGL,IAA/E,EAAqFK,IAAI,EAAzF,EAA6F;MAC3Fwa,QAAQ,CAACxa,IAAD,CAAR,GAAiBJ,SAAS,CAACI,IAAD,CAA1B;IACD;;IACD,IAAIya,oBAAoB,GAAGvd,MAAM,CAACsd,QAAQ,CAACtX,MAAT,CAAgB,UAAUwX,GAAV,EAAe/U,OAAf,EAAwB;MACxE+U,GAAG,CAAC/U,OAAD,CAAH,GAAe,EAAf;MACA,OAAO+U,GAAP;IACD,CAHiC,EAG/B,EAH+B,CAAD,CAAjC;IAIAvd,SAAS,CAAC,YAAY;MACpB6F,MAAM,CAACC,IAAP,CAAYwX,oBAAoB,CAACrZ,OAAjC,EAA0C9C,OAA1C,CAAkD,UAAUqH,OAAV,EAAmB;QACnE,IAAIgV,YAAY,GAAGF,oBAAoB,CAACrZ,OAArB,CAA6BuE,OAA7B,CAAnB;;QACA,IAAI4U,iBAAiB,CAACnZ,OAAtB,EAA+B;UAC7B,IAAI,CAAC4B,MAAM,CAACC,IAAP,CAAY0X,YAAZ,EAA0B9a,MAA/B,EAAuC;YACrC;YACA4C,OAAO,CAACC,KAAR,CAAc,uCAAuCiD,OAAvC,GAAiD,+CAA/D;YACA;UACD;QACF;;QACD,IAAI6G,gBAAgB,GAAGmO,YAAY,CAACnO,gBAApC;QAAA,IACEH,MAAM,GAAGsO,YAAY,CAACtO,MADxB;QAAA,IAEEuO,UAAU,GAAGD,YAAY,CAACC,UAF5B;;QAGA,IAAI,CAAC,CAACA,UAAD,IAAe,CAACA,UAAU,CAACxZ,OAA5B,KAAwC,CAACoL,gBAA7C,EAA+D;UAC7D;UACA/J,OAAO,CAACC,KAAR,CAAc,+BAA+B2J,MAA/B,GAAwC,UAAxC,GAAqD1G,OAArD,GAA+D,6CAA7E;QACD;MACF,CAhBD;MAiBA4U,iBAAiB,CAACnZ,OAAlB,GAA4B,KAA5B;IACD,CAnBQ,CAAT;IAoBA,IAAIyZ,qBAAqB,GAAGzd,WAAW,CAAC,UAAUuI,OAAV,EAAmB6G,gBAAnB,EAAqCH,MAArC,EAA6CuO,UAA7C,EAAyD;MAC/FH,oBAAoB,CAACrZ,OAArB,CAA6BuE,OAA7B,IAAwC;QACtC6G,gBAAgB,EAAEA,gBADoB;QAEtCH,MAAM,EAAEA,MAF8B;QAGtCuO,UAAU,EAAEA;MAH0B,CAAxC;IAKD,CANsC,EAMpC,EANoC,CAAvC;IAOA,OAAOC,qBAAP;EACD,CArCD;AAsCD;;AACD,SAASC,oBAAT,CAA8BjD,cAA9B,EAA8CkD,eAA9C,EAA+DtZ,KAA/D,EAAsE;EACpE,IAAIuZ,cAAc,GAAGvZ,KAAK,CAACuZ,cAA3B;EAAA,IACEhR,gBAAgB,GAAGvI,KAAK,CAACuI,gBAD3B;EAAA,IAEEV,KAAK,GAAG7H,KAAK,CAAC6H,KAFhB;EAAA,IAGEtK,WAAW,GAAGyC,KAAK,CAACzC,WAHtB;EAAA,IAIEsN,IAAI,GAAG3P,6BAA6B,CAAC8E,KAAD,EAAQqV,WAAR,CAJtC,CADoE,CAMpE;;;EACA3Z,SAAS,CAAC,YAAY;IACpB,IAAI6d,cAAc,IAAI,KAAtB,EAA6B;MAC3B;IACD;;IACDpD,gBAAgB,CAAC,YAAY;MAC3B,OAAOC,cAAc,CAACjb,QAAQ,CAAC;QAC7BoN,gBAAgB,EAAEA,gBADW;QAE7B2I,eAAe,EAAErJ,KAAK,CAACU,gBAAD,CAFO;QAG7BrI,WAAW,EAAE2H,KAAK,CAACzJ;MAHU,CAAD,EAI3ByM,IAJ2B,CAAT,CAArB;IAKD,CANe,EAMbtN,WAAW,CAACkG,QANC,CAAhB,CAJoB,CAWpB;EACD,CAZQ,EAYN6V,eAZM,CAAT;AAaD;;AACD,SAASE,iBAAT,CAA2BrM,KAA3B,EAAkC;EAChC,IAAI5E,gBAAgB,GAAG4E,KAAK,CAAC5E,gBAA7B;EAAA,IACEtI,MAAM,GAAGkN,KAAK,CAAClN,MADjB;EAAA,IAEEwZ,QAAQ,GAAGtM,KAAK,CAACsM,QAFnB;EAAA,IAGE/W,oBAAoB,GAAGyK,KAAK,CAACzK,oBAH/B;EAAA,IAIEgX,WAAW,GAAGvM,KAAK,CAACuM,WAJtB;EAAA,IAKEC,kBAAkB,GAAGxM,KAAK,CAAC7Q,cAL7B,CADgC,CAOhC;;EACA,IAAIsd,eAAe,GAAGne,MAAM,CAAC,IAAD,CAA5B,CARgC,CAShC;;EACA4a,yBAAyB,CAAC,YAAY;IACpC,IAAI9N,gBAAgB,GAAG,CAAnB,IAAwB,CAACtI,MAAzB,IAAmC,CAACsB,MAAM,CAACC,IAAP,CAAYiY,QAAQ,CAAC9Z,OAArB,EAA8BvB,MAAtE,EAA8E;MAC5E;IACD;;IACD,IAAIwb,eAAe,CAACja,OAAhB,KAA4B,KAAhC,EAAuC;MACrCia,eAAe,CAACja,OAAhB,GAA0B,IAA1B;IACD,CAFD,MAEO;MACLga,kBAAkB,CAACjX,oBAAoB,CAAC6F,gBAAD,CAArB,EAAyCmR,WAAzC,CAAlB;IACD,CARmC,CASpC;;EACD,CAVwB,EAUtB,CAACnR,gBAAD,CAVsB,CAAzB;EAWA,OAAOqR,eAAP;AACD,C,CAED;;;AACA,IAAIC,wBAAwB,GAAGxd,IAA/B;AACA;;AACA,IAAIuH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACzC+V,wBAAwB,GAAG,SAASA,wBAAT,CAAkCrL,KAAlC,EAAyC;IAClE,IAAI+K,cAAc,GAAG/K,KAAK,CAAC+K,cAA3B;IAAA,IACE3Y,KAAK,GAAG4N,KAAK,CAAC5N,KADhB;IAAA,IAEEQ,KAAK,GAAGoN,KAAK,CAACpN,KAFhB,CADkE,CAIlE;;IACA,IAAI0Y,YAAY,GAAGre,MAAM,CAACmF,KAAD,CAAzB;IACAlF,SAAS,CAAC,YAAY;MACpB,IAAI6d,cAAJ,EAAoB;QAClB;MACD;;MACD5V,2BAA2B,CAACvC,KAAD,EAAQ0Y,YAAY,CAACna,OAArB,EAA8BiB,KAA9B,CAA3B;MACAkZ,YAAY,CAACna,OAAb,GAAuBiB,KAAvB;IACD,CANQ,EAMN,CAACQ,KAAD,EAAQR,KAAR,EAAe2Y,cAAf,CANM,CAAT;EAOD,CAbD;AAcD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASQ,qBAAT,CAA+BnZ,KAA/B,EAAsC2H,gBAAtC,EAAwDM,UAAxD,EAAoE;EAClE,IAAImR,YAAJ;;EACA,IAAInR,UAAU,KAAK,KAAK,CAAxB,EAA2B;IACzBA,UAAU,GAAG,IAAb;EACD;;EACD,IAAIoR,YAAY,GAAG,CAAC,CAACD,YAAY,GAAGpZ,KAAK,CAACiH,KAAtB,KAAgC,IAAhC,GAAuC,KAAK,CAA5C,GAAgDmS,YAAY,CAAC5b,MAA9D,KAAyEmK,gBAAgB,IAAI,CAAhH;EACA,OAAOpN,QAAQ,CAAC;IACd8E,MAAM,EAAE,KADM;IAEdsI,gBAAgB,EAAE,CAAC;EAFL,CAAD,EAGZ0R,YAAY,IAAI9e,QAAQ,CAAC;IAC1ByN,YAAY,EAAEhI,KAAK,CAACiH,KAAN,CAAYU,gBAAZ,CADY;IAE1BtI,MAAM,EAAEgY,iBAAiB,CAACrX,KAAD,EAAQ,QAAR,CAFC;IAG1B2H,gBAAgB,EAAE0P,iBAAiB,CAACrX,KAAD,EAAQ,kBAAR;EAHT,CAAD,EAIxBiI,UAAU,IAAI;IACfA,UAAU,EAAEjI,KAAK,CAACqI,YAAN,CAAmBrI,KAAK,CAACiH,KAAN,CAAYU,gBAAZ,CAAnB;EADG,CAJU,CAHZ,CAAf;AAUD;;AAED,SAAS2R,sBAAT,CAAgC9Y,KAAhC,EAAuCoU,MAAvC,EAA+ChB,gBAA/C,EAAiE;EAC/D,IAAI9T,IAAI,GAAG8U,MAAM,CAAC9U,IAAlB;EAAA,IACEE,KAAK,GAAG4U,MAAM,CAAC5U,KADjB;EAEA,IAAI8U,OAAJ;;EACA,QAAQhV,IAAR;IACE,KAAK8T,gBAAgB,CAAC2F,aAAtB;MACEzE,OAAO,GAAG;QACRnN,gBAAgB,EAAEiN,MAAM,CAACxH,QAAP,GAAkB,CAAC,CAAnB,GAAuBwH,MAAM,CAACtS;MADxC,CAAV;MAGA;;IACF,KAAKsR,gBAAgB,CAAC4F,cAAtB;MACE1E,OAAO,GAAG;QACRnN,gBAAgB,EAAE,CAAC;MADX,CAAV;MAGA;;IACF,KAAKiM,gBAAgB,CAAC6F,iBAAtB;IACA,KAAK7F,gBAAgB,CAAC8F,kBAAtB;MACE5E,OAAO,GAAG;QACRzV,MAAM,EAAE,CAACmB,KAAK,CAACnB,MADP;QAERsI,gBAAgB,EAAEnH,KAAK,CAACnB,MAAN,GAAe,CAAC,CAAhB,GAAoBqY,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFvD,CAAV;MAIA;;IACF,KAAKoT,gBAAgB,CAAC+F,gBAAtB;MACE7E,OAAO,GAAG;QACRzV,MAAM,EAAE,IADA;QAERsI,gBAAgB,EAAE+P,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFnC,CAAV;MAIA;;IACF,KAAKoT,gBAAgB,CAACgG,iBAAtB;MACE9E,OAAO,GAAG;QACRzV,MAAM,EAAE;MADA,CAAV;MAGA;;IACF,KAAKuU,gBAAgB,CAACiG,2BAAtB;MACE/E,OAAO,GAAG;QACRnN,gBAAgB,EAAEiN,MAAM,CAACjN;MADjB,CAAV;MAGA;;IACF,KAAKiM,gBAAgB,CAACkG,qBAAtB;MACEhF,OAAO,GAAG;QACR7M,UAAU,EAAE2M,MAAM,CAAC3M;MADX,CAAV;MAGA;;IACF,KAAK2L,gBAAgB,CAACmG,aAAtB;MACEjF,OAAO,GAAG;QACRnN,gBAAgB,EAAE0P,iBAAiB,CAACrX,KAAD,EAAQ,kBAAR,CAD3B;QAERX,MAAM,EAAEgY,iBAAiB,CAACrX,KAAD,EAAQ,QAAR,CAFjB;QAGRgI,YAAY,EAAEqP,iBAAiB,CAACrX,KAAD,EAAQ,cAAR,CAHvB;QAIRiI,UAAU,EAAEoP,iBAAiB,CAACrX,KAAD,EAAQ,YAAR;MAJrB,CAAV;MAMA;;IACF;MACE,MAAM,IAAIuT,KAAJ,CAAU,4CAAV,CAAN;EAhDJ;;EAkDA,OAAOhZ,QAAQ,CAAC,EAAD,EAAKiG,KAAL,EAAYsU,OAAZ,CAAf;AACD;AACD;;;AAEA,SAASkF,0BAAT,CAAoCC,EAApC,EAAwC;EACpC,IAAIC,SAAS,GAAGD,EAAE,CAACC,SAAnB;EAAA,IAA8BvS,gBAAgB,GAAGsS,EAAE,CAACtS,gBAApD;EAAA,IAAsEV,KAAK,GAAGgT,EAAE,CAAChT,KAAjF;EAAA,IAAwFoB,YAAY,GAAG4R,EAAE,CAAC5R,YAA1G;EAAA,IAAwHvG,oBAAoB,GAAGmY,EAAE,CAACnY,oBAAlJ;EACA,IAAIqY,mBAAmB,GAAGD,SAAS,CAACE,WAAV,EAA1B;;EACA,KAAK,IAAI9X,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG2E,KAAK,CAACzJ,MAAlC,EAA0C8E,KAAK,EAA/C,EAAmD;IAC/C;IACA,IAAI+X,WAAW,GAAG,CAAC/X,KAAK,GAAGqF,gBAAR,IAA4BuS,SAAS,CAAC1c,MAAV,GAAmB,CAAnB,GAAuB,CAAvB,GAA2B,CAAvD,CAAD,IAA8DyJ,KAAK,CAACzJ,MAAtF;IACA,IAAI4K,IAAI,GAAGnB,KAAK,CAACoT,WAAD,CAAhB;;IACA,IAAIjS,IAAI,KAAKnH,SAAT,IACAoH,YAAY,CAACD,IAAD,CAAZ,CAAmBgS,WAAnB,GAAiCE,UAAjC,CAA4CH,mBAA5C,CADJ,EACsE;MAClE,IAAIta,OAAO,GAAGiC,oBAAoB,CAACuY,WAAD,CAAlC;;MACA,IAAI,EAAExa,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,CAACwC,YAAR,CAAqB,UAArB,CAApD,CAAJ,EAA2F;QACvF,OAAOgY,WAAP;MACH;IACJ;EACJ;;EACD,OAAO1S,gBAAP;AACH;;AACD,IAAI4S,WAAW,GAAG;EACdtT,KAAK,EAAEvM,SAAS,CAAC8f,KAAV,CAAgBC,UADT;EAEdpS,YAAY,EAAE3N,SAAS,CAACoZ,IAFV;EAGdzD,oBAAoB,EAAE3V,SAAS,CAACoZ,IAHlB;EAIdsB,uBAAuB,EAAE1a,SAAS,CAACoZ,IAJrB;EAKdnM,gBAAgB,EAAEjN,SAAS,CAACqZ,MALd;EAMdlM,uBAAuB,EAAEnN,SAAS,CAACqZ,MANrB;EAOdtD,uBAAuB,EAAE/V,SAAS,CAACqZ,MAPrB;EAQd1U,MAAM,EAAE3E,SAAS,CAACsZ,IARJ;EASd9L,aAAa,EAAExN,SAAS,CAACsZ,IATX;EAUdpD,aAAa,EAAElW,SAAS,CAACsZ,IAVX;EAWdhM,YAAY,EAAEtN,SAAS,CAACuZ,GAXV;EAYd/C,mBAAmB,EAAExW,SAAS,CAACuZ,GAZjB;EAadyG,mBAAmB,EAAEhgB,SAAS,CAACuZ,GAbjB;EAcdtN,EAAE,EAAEjM,SAAS,CAACwZ,MAdA;EAedrN,OAAO,EAAEnM,SAAS,CAACwZ,MAfL;EAgBdtN,MAAM,EAAElM,SAAS,CAACwZ,MAhBJ;EAiBdnN,SAAS,EAAErM,SAAS,CAACoZ,IAjBP;EAkBd8B,cAAc,EAAElb,SAAS,CAACwZ,MAlBZ;EAmBdhL,YAAY,EAAExO,SAAS,CAACoZ,IAnBV;EAoBd6G,oBAAoB,EAAEjgB,SAAS,CAACoZ,IApBlB;EAqBd8G,wBAAwB,EAAElgB,SAAS,CAACoZ,IArBtB;EAsBdzK,aAAa,EAAE3O,SAAS,CAACoZ,IAtBX;EAuBd+G,cAAc,EAAEngB,SAAS,CAACoZ,IAvBZ;EAwBdnX,WAAW,EAAEjC,SAAS,CAACyZ,KAAV,CAAgB;IACzB5B,gBAAgB,EAAE7X,SAAS,CAACoZ,IADH;IAEzBrB,mBAAmB,EAAE/X,SAAS,CAACoZ,IAFN;IAGzBjR,QAAQ,EAAEnI,SAAS,CAACyZ,KAAV,CAAgB;MACtBpQ,cAAc,EAAErJ,SAAS,CAACoZ,IADJ;MAEtBhR,aAAa,EAAEpI,SAAS,CAACuZ,GAFH;MAGtBrP,IAAI,EAAElK,SAAS,CAACuZ;IAHM,CAAhB;EAHe,CAAhB;AAxBC,CAAlB;AAkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAS5D,oBAAT,CAA8B4J,EAA9B,EAAkC;EAC9B,IAAI5a,MAAM,GAAG4a,EAAE,CAAC5a,MAAhB;EAAA,IAAwBC,WAAW,GAAG2a,EAAE,CAAC3a,WAAzC;EAAA,IAAsDC,mBAAmB,GAAG0a,EAAE,CAAC1a,mBAA/E;;EACA,IAAI,CAACF,MAAL,EAAa;IACT,OAAO,EAAP;EACH;;EACD,IAAI,CAACC,WAAL,EAAkB;IACd,OAAO,2BAAP;EACH;;EACD,IAAIA,WAAW,KAAKC,mBAApB,EAAyC;IACrC,OAAO,GAAGjB,MAAH,CAAUgB,WAAV,EAAuB,SAAvB,EAAkChB,MAAlC,CAAyCgB,WAAW,KAAK,CAAhB,GAAoB,KAApB,GAA4B,OAArE,EAA8E,8FAA9E,CAAP;EACH;;EACD,OAAO,EAAP;AACH;;AACD,IAAIwb,cAAc,GAAGzf,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK+b,cAAL,CAAT,EAA+B;EAAE/G,oBAAoB,EAAEA;AAAxB,CAA/B,CAA7B,C,CACA;;;AACA,IAAI0K,mBAAmB,GAAGtf,IAA1B;AACA;;AACA,IAAIuH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACvC6X,mBAAmB,GAAG,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;IAC7CvgB,SAAS,CAACwgB,cAAV,CAAyBX,WAAzB,EAAsCS,OAAtC,EAA+C,MAA/C,EAAuDC,MAAM,CAACE,IAA9D;EACH,CAFD;AAGH;;AAED,IAAIC,mBAAmB,GAAGpY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,CAA7F;AACA,IAAImY,4BAA4B,GAAGrY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qCAAxC,GAAgF,CAAnH;AACA,IAAIoY,0BAA0B,GAAGtY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,mCAAxC,GAA8E,CAA/G;AACA,IAAIqY,4BAA4B,GAAGvY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,CAAlH;AACA,IAAIsY,yBAAyB,GAAGxY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,iCAAxC,GAA4E,CAA5G;AACA,IAAIuY,uBAAuB,GAAGzY,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,CAAxG;AACA,IAAIwY,sBAAsB,GAAG1Y,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,CAAtG;AACA,IAAIyY,wBAAwB,GAAG3Y,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAA1G;AACA,IAAI0Y,8BAA8B,GAAG5Y,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uCAAxC,GAAkF,CAAvH;AACA,IAAI2Y,yBAAyB,GAAG7Y,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kCAAxC,GAA6E,CAA7G;AACA,IAAI4Y,2BAA2B,GAAG9Y,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,EAAjH;AACA,IAAI6Y,gBAAgB,GAAG/Y,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uBAAxC,GAAkE,EAAzF;AACA,IAAI8Y,gBAAgB,GAAGhZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,sBAAxC,GAAiE,EAAxF;AACA,IAAI+Y,eAAe,GAAGjZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qBAAxC,GAAgE,EAAtF;AACA,IAAIgZ,WAAW,GAAGlZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D,EAA7E;AACA,IAAIiZ,oBAAoB,GAAGnZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAAhG;AACA,IAAIkZ,kBAAkB,GAAGpZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA5F;AACA,IAAImZ,mBAAmB,GAAGrZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,EAA9F;AACA,IAAIoZ,6BAA6B,GAAGtZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,EAAnH;AACA,IAAIqZ,oBAAoB,GAAGvZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAAhG;AACA,IAAIsZ,uBAAuB,GAAGxZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,EAAvG;AACA,IAAIuZ,eAAe,GAAGzZ,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,EAArF;AAEA,IAAIwZ,kBAAkB,GAAG,aAAa/b,MAAM,CAACqF,MAAP,CAAc;EAClDC,SAAS,EAAE,IADuC;EAElDwT,iBAAiB,EAAE2B,mBAF+B;EAGlDC,4BAA4B,EAAEA,4BAHoB;EAIlDC,0BAA0B,EAAEA,0BAJsB;EAKlDC,4BAA4B,EAAEA,4BALoB;EAMlDC,yBAAyB,EAAEA,yBANuB;EAOlDC,uBAAuB,EAAEA,uBAPyB;EAQlDC,sBAAsB,EAAEA,sBAR0B;EASlDC,wBAAwB,EAAEA,wBATwB;EAUlDC,8BAA8B,EAAEA,8BAVkB;EAWlDC,yBAAyB,EAAEA,yBAXuB;EAYlDC,2BAA2B,EAAEA,2BAZqB;EAalDC,gBAAgB,EAAEA,gBAbgC;EAclDvC,cAAc,EAAEwC,gBAdkC;EAelDzC,aAAa,EAAE0C,eAfmC;EAgBlDU,SAAS,EAAET,WAhBuC;EAiBlDxC,kBAAkB,EAAEyC,oBAjB8B;EAkBlDxC,gBAAgB,EAAEyC,kBAlBgC;EAmBlDxC,iBAAiB,EAAEyC,mBAnB+B;EAoBlDxC,2BAA2B,EAAEyC,6BApBqB;EAqBlDM,kBAAkB,EAAEL,oBArB8B;EAsBlDzC,qBAAqB,EAAE0C,uBAtB2B;EAuBlDzC,aAAa,EAAE0C;AAvBmC,CAAd,CAAtC;AA0BA;;AACA,SAASI,sBAAT,CAAgCrc,KAAhC,EAAuCoU,MAAvC,EAA+C;EAC7C,IAAIwE,YAAJ;;EACA,IAAItZ,IAAI,GAAG8U,MAAM,CAAC9U,IAAlB;EAAA,IACEE,KAAK,GAAG4U,MAAM,CAAC5U,KADjB;EAAA,IAEE8c,MAAM,GAAGlI,MAAM,CAACkI,MAFlB;EAGA,IAAIhI,OAAJ;;EACA,QAAQhV,IAAR;IACE,KAAKoc,WAAL;MACEpH,OAAO,GAAG;QACRzV,MAAM,EAAEgY,iBAAiB,CAACrX,KAAD,EAAQ,QAAR,CADjB;QAER2H,gBAAgB,EAAE0P,iBAAiB,CAACrX,KAAD,EAAQ,kBAAR,CAF3B;QAGRgI,YAAY,EAAEhI,KAAK,CAACiH,KAAN,CAAY2N,MAAM,CAACtS,KAAnB;MAHN,CAAV;MAKA;;IACF,KAAKiZ,4BAAL;MACE;QACE,IAAIwB,aAAa,GAAGnI,MAAM,CAAC7T,GAA3B;QACA,IAAIkH,UAAU,GAAG,KAAKzH,KAAK,CAACyH,UAAX,GAAwB8U,aAAzC;QACA,IAAIjK,oBAAoB,GAAG,CAACtS,KAAK,CAACnB,MAAP,IAAiBmB,KAAK,CAACwH,YAAvB,GAAsChI,KAAK,CAACiH,KAAN,CAAY7F,OAAZ,CAAoBZ,KAAK,CAACwH,YAA1B,CAAtC,GAAgFxH,KAAK,CAACmH,gBAAjH;QACA,IAAIA,gBAAgB,GAAGqS,0BAA0B,CAAC;UAChDE,SAAS,EAAEjS,UADqC;UAEhDN,gBAAgB,EAAEmL,oBAF8B;UAGhD7L,KAAK,EAAEjH,KAAK,CAACiH,KAHmC;UAIhDoB,YAAY,EAAErI,KAAK,CAACqI,YAJ4B;UAKhDvG,oBAAoB,EAAE8S,MAAM,CAAC9S;QALmB,CAAD,CAAjD;QAOAgT,OAAO,GAAG;UACR7M,UAAU,EAAEA,UADJ;UAERN,gBAAgB,EAAEA,gBAFV;UAGRtI,MAAM,EAAE;QAHA,CAAV;MAKD;MACD;;IACF,KAAKgc,4BAAL;MACE;QACE,IAAI3K,iBAAiB,GAAGlQ,KAAK,CAACnB,MAAN,GAAeqC,oBAAoB,CAAC,CAAD,EAAIlB,KAAK,CAACmH,gBAAV,EAA4B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAAxC,EAAgDoX,MAAM,CAAC9S,oBAAvD,EAA6E,KAA7E,CAAnC,GAAyHgb,MAAM,IAAItc,KAAK,CAACwH,YAAN,IAAsB,IAAhC,GAAuC,CAAC,CAAxC,GAA4C0P,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAf,CAAtN;;QACAsU,OAAO,GAAG;UACRnN,gBAAgB,EAAE+I,iBADV;UAERrR,MAAM,EAAE;QAFA,CAAV;MAID;MACD;;IACF,KAAKic,0BAAL;MACE,IAAI9a,KAAK,CAACnB,MAAN,IAAgByd,MAApB,EAA4B;QAC1BhI,OAAO,GAAGqE,qBAAqB,CAACnZ,KAAD,EAAQQ,KAAK,CAACmH,gBAAd,EAAgC,KAAhC,CAA/B;MACD,CAFD,MAEO;QACL,IAAIqV,kBAAkB,GAAGxc,KAAK,CAACnB,MAAN,GAAeqC,oBAAoB,CAAC,CAAC,CAAF,EAAKlB,KAAK,CAACmH,gBAAX,EAA6B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAAzC,EAAiDoX,MAAM,CAAC9S,oBAAxD,EAA8E,KAA9E,CAAnC,GAA0H4V,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAC,CAAhB,CAA5K;;QACAsU,OAAO,GAAG;UACRnN,gBAAgB,EAAEqV,kBADV;UAER3d,MAAM,EAAE;QAFA,CAAV;MAID;;MACD;IACF;;IACA,KAAKsc,wBAAL;IACA,KAAKC,8BAAL;MACE9G,OAAO,GAAGqE,qBAAqB,CAACnZ,KAAD,EAAQQ,KAAK,CAACmH,gBAAd,EAAgC,KAAhC,CAA/B;MACA;;IACF,KAAK8T,uBAAL;MACE3G,OAAO,GAAG;QACRnN,gBAAgB,EAAExF,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAOnC,KAAK,CAACiH,KAAN,CAAYzJ,MAAnB,EAA2BoX,MAAM,CAAC9S,oBAAlC,EAAwD,KAAxD,CADjC;QAERzC,MAAM,EAAE;MAFA,CAAV;MAIA;;IACF,KAAKqc,sBAAL;MACE5G,OAAO,GAAG;QACRnN,gBAAgB,EAAExF,uBAAuB,CAAC,CAAC,CAAF,EAAKnC,KAAK,CAACiH,KAAN,CAAYzJ,MAAZ,GAAqB,CAA1B,EAA6BwC,KAAK,CAACiH,KAAN,CAAYzJ,MAAzC,EAAiDoX,MAAM,CAAC9S,oBAAxD,EAA8E,KAA9E,CADjC;QAERzC,MAAM,EAAE;MAFA,CAAV;MAIA;;IACF,KAAKwc,yBAAL;MACE/G,OAAO,GAAG;QACRnN,gBAAgB,EAAEjG,oBAAoB,CAAC,CAAC,EAAF,EAAMlB,KAAK,CAACmH,gBAAZ,EAA8B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAA1C,EAAkDoX,MAAM,CAAC9S,oBAAzD,EAA+E,KAA/E;MAD9B,CAAV;MAGA;;IACF,KAAKga,2BAAL;MACEhH,OAAO,GAAG;QACRnN,gBAAgB,EAAEjG,oBAAoB,CAAC,EAAD,EAAKlB,KAAK,CAACmH,gBAAX,EAA6B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAAzC,EAAiDoX,MAAM,CAAC9S,oBAAxD,EAA8E,KAA9E;MAD9B,CAAV;MAGA;;IACF,KAAK0Z,yBAAL;MACE1G,OAAO,GAAG;QACRzV,MAAM,EAAE,KADA;QAERsI,gBAAgB,EAAE,CAAC;MAFX,CAAV;MAIA;;IACF,KAAKoU,gBAAL;MACEjH,OAAO,GAAGva,QAAQ,CAAC;QACjB8E,MAAM,EAAE,KADS;QAEjBsI,gBAAgB,EAAE,CAAC;MAFF,CAAD,EAGfnH,KAAK,CAACmH,gBAAN,IAA0B,CAA1B,KAAgC,CAACyR,YAAY,GAAGpZ,KAAK,CAACiH,KAAtB,KAAgC,IAAhC,GAAuC,KAAK,CAA5C,GAAgDmS,YAAY,CAAC5b,MAA7F,KAAwG;QACzGwK,YAAY,EAAEhI,KAAK,CAACiH,KAAN,CAAYzG,KAAK,CAACmH,gBAAlB;MAD2F,CAHzF,CAAlB;MAMA;;IACF,KAAK4U,oBAAL;MACEzH,OAAO,GAAG;QACR9M,YAAY,EAAE4M,MAAM,CAAC5M;MADb,CAAV;MAGA;;IACF;MACE,OAAOsR,sBAAsB,CAAC9Y,KAAD,EAAQoU,MAAR,EAAgB8H,kBAAhB,CAA7B;EA9FJ;;EAgGA,OAAOniB,QAAQ,CAAC,EAAD,EAAKiG,KAAL,EAAYsU,OAAZ,CAAf;AACD;AACD;;;AAEA,IAAImI,WAAW,GAAG,CAAC,cAAD,EAAiB,QAAjB,EAA2B,WAA3B,EAAwC,QAAxC,EAAkD,KAAlD,CAAlB;AAAA,IACEC,YAAY,GAAG,CAAC,QAAD,EAAW,SAAX,EAAsB,SAAtB,EAAiC,WAAjC,EAA8C,QAA9C,EAAwD,KAAxD,CADjB;AAAA,IAEEC,YAAY,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,aAAlB,EAAiC,SAAjC,EAA4C,SAA5C,EAAuD,QAAvD,EAAiE,KAAjE,EAAwE,UAAxE,CAFjB;AAGAC,SAAS,CAACxJ,gBAAV,GAA6B8I,kBAA7B;;AACA,SAASU,SAAT,CAAmBC,SAAnB,EAA8B;EAC5B,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IACxBA,SAAS,GAAG,EAAZ;EACD;;EACDtC,mBAAmB,CAACsC,SAAD,EAAYD,SAAZ,CAAnB,CAJ4B,CAK5B;;EACA,IAAIpd,KAAK,GAAGzF,QAAQ,CAAC,EAAD,EAAKugB,cAAL,EAAqBuC,SAArB,CAApB;;EACA,IAAIpW,KAAK,GAAGjH,KAAK,CAACiH,KAAlB;EAAA,IACEvL,cAAc,GAAGsE,KAAK,CAACtE,cADzB;EAAA,IAEEiB,WAAW,GAAGqD,KAAK,CAACrD,WAFtB;EAAA,IAGE0L,YAAY,GAAGrI,KAAK,CAACqI,YAHvB;EAAA,IAIE+M,uBAAuB,GAAGpV,KAAK,CAACoV,uBAJlC;EAAA,IAKE/E,oBAAoB,GAAGrQ,KAAK,CAACqQ,oBAL/B,CAP4B,CAa5B;;EACA,IAAIqG,YAAY,GAAGe,iBAAiB,CAACzX,KAAD,CAApC;;EACA,IAAIsd,qBAAqB,GAAGpG,sBAAsB,CAAC2F,sBAAD,EAAyBnG,YAAzB,EAAuC1W,KAAvC,CAAlD;EAAA,IACEQ,KAAK,GAAG8c,qBAAqB,CAAC,CAAD,CAD/B;EAAA,IAEEvG,QAAQ,GAAGuG,qBAAqB,CAAC,CAAD,CAFlC;;EAGA,IAAIje,MAAM,GAAGmB,KAAK,CAACnB,MAAnB;EAAA,IACEsI,gBAAgB,GAAGnH,KAAK,CAACmH,gBAD3B;EAAA,IAEEK,YAAY,GAAGxH,KAAK,CAACwH,YAFvB;EAAA,IAGEC,UAAU,GAAGzH,KAAK,CAACyH,UAHrB,CAlB4B,CAuB5B;;EACA,IAAIsV,eAAe,GAAG1iB,MAAM,CAAC,IAAD,CAA5B;EACA,IAAI6T,OAAO,GAAG7T,MAAM,CAAC,IAAD,CAApB;EACA,IAAIge,QAAQ,GAAGhe,MAAM,CAAC,EAAD,CAArB,CA1B4B,CA2B5B;;EACA,IAAI2iB,eAAe,GAAG3iB,MAAM,CAAC,IAAD,CAA5B,CA5B4B,CA6B5B;;EACA,IAAI4iB,UAAU,GAAG/H,aAAa,CAAC1V,KAAD,CAA9B,CA9B4B,CA+B5B;;EACA,IAAI0d,sBAAsB,GAAG7iB,MAAM,EAAnC;EACA,IAAIqd,iBAAiB,GAAGrd,MAAM,CAAC,IAAD,CAA9B,CAjC4B,CAkC5B;;EACA,IAAI8iB,MAAM,GAAGrH,YAAY,CAAC;IACxB9V,KAAK,EAAEA,KADiB;IAExBR,KAAK,EAAEA;EAFiB,CAAD,CAAzB,CAnC4B,CAwC5B;;EACA,IAAI8B,oBAAoB,GAAG/G,WAAW,CAAC,UAAUuH,KAAV,EAAiB;IACtD,OAAOuW,QAAQ,CAAC9Z,OAAT,CAAiB0e,UAAU,CAAC1W,SAAX,CAAqBzE,KAArB,CAAjB,CAAP;EACD,CAFqC,EAEnC,CAACmb,UAAD,CAFmC,CAAtC,CAzC4B,CA6C5B;EACA;;EACAhF,oBAAoB,CAACpI,oBAAD,EAAuB,CAAChR,MAAD,EAASsI,gBAAT,EAA2BM,UAA3B,EAAuChB,KAAvC,CAAvB,EAAsE1M,QAAQ,CAAC;IACjGoe,cAAc,EAAET,iBAAiB,CAACnZ,OAD+D;IAEjGQ,mBAAmB,EAAEme,sBAAsB,CAAC3e,OAFqD;IAGjGkI,KAAK,EAAEA,KAH0F;IAIjGtK,WAAW,EAAEA,WAJoF;IAKjG0L,YAAY,EAAEA;EALmF,CAAD,EAM/F7H,KAN+F,CAA9E,CAApB,CA/C4B,CAsD5B;;EACAiY,oBAAoB,CAACrD,uBAAD,EAA0B,CAACpN,YAAD,CAA1B,EAA0CzN,QAAQ,CAAC;IACrEoe,cAAc,EAAET,iBAAiB,CAACnZ,OADmC;IAErEQ,mBAAmB,EAAEme,sBAAsB,CAAC3e,OAFyB;IAGrEkI,KAAK,EAAEA,KAH8D;IAIrEtK,WAAW,EAAEA,WAJwD;IAKrE0L,YAAY,EAAEA;EALuD,CAAD,EAMnE7H,KANmE,CAAlD,CAApB,CAvD4B,CA8D5B;;EACA,IAAIwY,eAAe,GAAGJ,iBAAiB,CAAC;IACtCE,WAAW,EAAEpK,OAAO,CAAC3P,OADiB;IAEtC4I,gBAAgB,EAAEA,gBAFoB;IAGtCtI,MAAM,EAAEA,MAH8B;IAItCwZ,QAAQ,EAAEA,QAJ4B;IAKtCnd,cAAc,EAAEA,cALsB;IAMtCoG,oBAAoB,EAAEA;EANgB,CAAD,CAAvC,CA/D4B,CAwE5B;;EACAhH,SAAS,CAAC,YAAY;IACpB;IACA0iB,eAAe,CAACze,OAAhB,GAA0BhC,QAAQ,CAAC,UAAU6gB,aAAV,EAAyB;MAC1DA,aAAa,CAAC;QACZ9d,IAAI,EAAE0c,uBADM;QAEZvU,UAAU,EAAE;MAFA,CAAD,CAAb;IAID,CALiC,EAK/B,GAL+B,CAAlC,CAFoB,CASpB;;IACA,OAAO,YAAY;MACjBuV,eAAe,CAACze,OAAhB,CAAwB5B,MAAxB;IACD,CAFD;EAGD,CAbQ,EAaN,EAbM,CAAT,CAzE4B,CAwF5B;;EACArC,SAAS,CAAC,YAAY;IACpB,IAAI,CAACmN,UAAL,EAAiB;MACf;IACD;;IACDuV,eAAe,CAACze,OAAhB,CAAwBgY,QAAxB;EACD,CALQ,EAKN,CAACA,QAAD,EAAW9O,UAAX,CALM,CAAT;EAMAgR,wBAAwB,CAAC;IACvBN,cAAc,EAAET,iBAAiB,CAACnZ,OADX;IAEvBiB,KAAK,EAAEA,KAFgB;IAGvBQ,KAAK,EAAEA;EAHgB,CAAD,CAAxB;EAKA1F,SAAS,CAAC,YAAY;IACpB,IAAIod,iBAAiB,CAACnZ,OAAtB,EAA+B;MAC7B;IACD;;IACD2e,sBAAsB,CAAC3e,OAAvB,GAAiCkI,KAAK,CAACzJ,MAAvC;EACD,CALQ,CAAT,CApG4B,CA0G5B;;EACA,IAAIua,wBAAwB,GAAGH,uBAAuB,CAACvY,MAAD,EAAS,CAACqP,OAAD,EAAU6O,eAAV,CAAT,EAAqC5gB,WAArC,EAAkD,YAAY;IAClHoa,QAAQ,CAAC;MACPjX,IAAI,EAAEic;IADC,CAAD,CAAR;EAGD,CAJqD,CAAtD;EAKA,IAAIvD,qBAAqB,GAAGP,2BAA2B,CAAC,cAAD,EAAiB,sBAAjB,CAAvD,CAhH4B,CAiH5B;;EACAnd,SAAS,CAAC,YAAY;IACpBod,iBAAiB,CAACnZ,OAAlB,GAA4B,KAA5B;IACA,OAAO,YAAY;MACjBmZ,iBAAiB,CAACnZ,OAAlB,GAA4B,IAA5B;IACD,CAFD;EAGD,CALQ,EAKN,EALM,CAAT,CAlH4B,CAwH5B;;EACAjE,SAAS,CAAC,YAAY;IACpB,IAAI,CAACuE,MAAL,EAAa;MACXwZ,QAAQ,CAAC9Z,OAAT,GAAmB,EAAnB;IACD;EACF,CAJQ,EAIN,CAACM,MAAD,CAJM,CAAT,CAzH4B,CA+H5B;;EACA,IAAIwe,2BAA2B,GAAG3iB,OAAO,CAAC,YAAY;IACpD,OAAO;MACLsP,SAAS,EAAE,SAASA,SAAT,CAAmBtM,KAAnB,EAA0B;QACnCA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAEub,4BADC;UAEPvZ,oBAAoB,EAAEA,oBAFf;UAGPgb,MAAM,EAAE5e,KAAK,CAAC4e;QAHP,CAAD,CAAR;MAKD,CARI;MASL7R,OAAO,EAAE,SAASA,OAAT,CAAiB/M,KAAjB,EAAwB;QAC/BA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAEwb,0BADC;UAEPxZ,oBAAoB,EAAEA,oBAFf;UAGPgb,MAAM,EAAE5e,KAAK,CAAC4e;QAHP,CAAD,CAAR;MAKD,CAhBI;MAiBLhR,IAAI,EAAE,SAASA,IAAT,CAAc5N,KAAd,EAAqB;QACzBA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAE2b,uBADC;UAEP3Z,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CAvBI;MAwBLoK,GAAG,EAAE,SAASA,GAAT,CAAahO,KAAb,EAAoB;QACvBA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAE4b,sBADC;UAEP5Z,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CA9BI;MA+BL0J,MAAM,EAAE,SAASA,MAAT,GAAkB;QACxB,IAAImS,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAAzB,EAAiC;UAC/B0X,QAAQ,CAAC;YACPjX,IAAI,EAAE0b;UADC,CAAD,CAAR;QAGD;MACF,CArCI;MAsCLpQ,KAAK,EAAE,SAASA,KAAT,CAAelN,KAAf,EAAsB;QAC3BA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAE6d,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAArB,GAA8Bsc,wBAA9B,GAAyDP;QADxD,CAAD,CAAR;MAGD,CA3CI;MA4CL0C,MAAM,EAAE,SAASA,MAAT,CAAgB5f,KAAhB,EAAuB;QAC7B,IAAIyf,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAAzB,EAAiC;UAC/BnB,KAAK,CAACwM,cAAN;UACAqM,QAAQ,CAAC;YACPjX,IAAI,EAAE+b,yBADC;YAEP/Z,oBAAoB,EAAEA;UAFf,CAAD,CAAR;QAID;MACF,CApDI;MAqDLic,QAAQ,EAAE,SAASA,QAAT,CAAkB7f,KAAlB,EAAyB;QACjC,IAAIyf,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAAzB,EAAiC;UAC/BnB,KAAK,CAACwM,cAAN;UACAqM,QAAQ,CAAC;YACPjX,IAAI,EAAEgc,2BADC;YAEPha,oBAAoB,EAAEA;UAFf,CAAD,CAAR;QAID;MACF,CA7DI;MA8DL,KAAK,SAAS6J,CAAT,CAAWzN,KAAX,EAAkB;QACrBA,KAAK,CAACwM,cAAN;QACA,IAAIsT,YAAY,GAAGL,MAAM,CAAC5e,OAAP,CAAeyB,KAAlC;;QACA,IAAI,CAACwd,YAAY,CAAC3e,MAAlB,EAA0B;UACxB0X,QAAQ,CAAC;YACPjX,IAAI,EAAEsb;UADC,CAAD,CAAR;UAGA;QACD;;QACD,IAAI4C,YAAY,CAAC/V,UAAjB,EAA6B;UAC3B8O,QAAQ,CAAC;YACPjX,IAAI,EAAEyb,4BADC;YAEPxa,GAAG,EAAE,GAFE;YAGPe,oBAAoB,EAAEA;UAHf,CAAD,CAAR;QAKD,CAND,MAMO;UACLiV,QAAQ,CAAC;YACPjX,IAAI,EAAE8b;UADC,CAAD,CAAR;QAGD;MACF;IAlFI,CAAP;EAoFD,CArFwC,EAqFtC,CAAC7E,QAAD,EAAWjV,oBAAX,EAAiC6b,MAAjC,CArFsC,CAAzC,CAhI4B,CAuN5B;;EACA,IAAI/R,UAAU,GAAG7Q,WAAW,CAAC,YAAY;IACvCgc,QAAQ,CAAC;MACPjX,IAAI,EAAEqc;IADC,CAAD,CAAR;EAGD,CAJ2B,EAIzB,CAACpF,QAAD,CAJyB,CAA5B;EAKA,IAAI5G,SAAS,GAAGpV,WAAW,CAAC,YAAY;IACtCgc,QAAQ,CAAC;MACPjX,IAAI,EAAEuc;IADC,CAAD,CAAR;EAGD,CAJ0B,EAIxB,CAACtF,QAAD,CAJwB,CAA3B;EAKA,IAAI7G,QAAQ,GAAGnV,WAAW,CAAC,YAAY;IACrCgc,QAAQ,CAAC;MACPjX,IAAI,EAAEsc;IADC,CAAD,CAAR;EAGD,CAJyB,EAIvB,CAACrF,QAAD,CAJuB,CAA1B;EAKA,IAAIrP,mBAAmB,GAAG3M,WAAW,CAAC,UAAUkR,mBAAV,EAA+B;IACnE8K,QAAQ,CAAC;MACPjX,IAAI,EAAEwc,6BADC;MAEP3U,gBAAgB,EAAEsE;IAFX,CAAD,CAAR;EAID,CALoC,EAKlC,CAAC8K,QAAD,CALkC,CAArC;EAMA,IAAI5O,UAAU,GAAGpN,WAAW,CAAC,UAAUkjB,eAAV,EAA2B;IACtDlH,QAAQ,CAAC;MACPjX,IAAI,EAAEyc,oBADC;MAEPvU,YAAY,EAAEiW;IAFP,CAAD,CAAR;EAID,CAL2B,EAKzB,CAAClH,QAAD,CALyB,CAA5B;EAMA,IAAItL,KAAK,GAAG1Q,WAAW,CAAC,YAAY;IAClCgc,QAAQ,CAAC;MACPjX,IAAI,EAAE2c;IADC,CAAD,CAAR;EAGD,CAJsB,EAIpB,CAAC1F,QAAD,CAJoB,CAAvB;EAKA,IAAImH,aAAa,GAAGnjB,WAAW,CAAC,UAAUojB,aAAV,EAAyB;IACvDpH,QAAQ,CAAC;MACPjX,IAAI,EAAE0c,uBADC;MAEPvU,UAAU,EAAEkW;IAFL,CAAD,CAAR;EAID,CAL8B,EAK5B,CAACpH,QAAD,CAL4B,CAA/B,CAxP4B,CA8P5B;;EACA,IAAIvJ,aAAa,GAAGzS,WAAW,CAAC,UAAUqjB,UAAV,EAAsB;IACpD,OAAO7jB,QAAQ,CAAC;MACdoM,EAAE,EAAE8W,UAAU,CAAC5W,OADD;MAEd4G,OAAO,EAAEgQ,UAAU,CAAC7H;IAFN,CAAD,EAGZwI,UAHY,CAAf;EAID,CAL8B,EAK5B,CAACX,UAAD,CAL4B,CAA/B;EAMA,IAAI7O,YAAY,GAAG7T,WAAW,CAAC,UAAU6O,KAAV,EAAiBC,MAAjB,EAAyB;IACtD,IAAIC,SAAJ;;IACA,IAAI5N,IAAI,GAAG0N,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;IAAA,IACEyU,YAAY,GAAGniB,IAAI,CAACmiB,YADtB;IAAA,IAEEtU,WAAW,GAAG7N,IAAI,CAAC8N,MAFrB;IAAA,IAGEA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAH5C;;IAIE7N,IAAI,CAACwQ,SAAL;IACAxQ,IAAI,CAAC0Q,MAAL;;IACA,IAAI9N,GAAG,GAAG5C,IAAI,CAAC4C,GAAf;IAAA,IACAmL,IAAI,GAAG3P,6BAA6B,CAAC4B,IAAD,EAAO+gB,WAAP,CADpC;;IAEF,IAAI7d,KAAK,GAAGyK,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEK,qBAAqB,GAAG9K,KAAK,CAAC+K,gBADhC;IAAA,IAEEA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE;;IAGA,IAAIoU,oBAAoB,GAAG,SAASA,oBAAT,GAAgC;MACzDvH,QAAQ,CAAC;QACPjX,IAAI,EAAEkc;MADC,CAAD,CAAR;IAGD,CAJD;;IAKAxD,qBAAqB,CAAC,cAAD,EAAiBrO,gBAAjB,EAAmCH,MAAnC,EAA2C0E,OAA3C,CAArB;IACA,OAAOnU,QAAQ,EAAEuP,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUlD,QAAV,EAAoB;MACvF8S,OAAO,CAAC3P,OAAR,GAAkBnD,QAAlB;IACD,CAF8D,CAA9C,EAEbkO,SAAS,CAACnD,EAAV,GAAe8W,UAAU,CAAC7W,MAFb,EAEqBkD,SAAS,CAACQ,IAAV,GAAiB,SAFtC,EAEiDR,SAAS,CAAC,iBAAD,CAAT,GAA+BG,IAAI,IAAIA,IAAI,CAAC,YAAD,CAAZ,GAA6BhJ,SAA7B,GAAyC,KAAKwc,UAAU,CAAC5W,OAFzI,EAEkJiD,SAAS,CAACuU,YAAV,GAAyBvgB,oBAAoB,CAACugB,YAAD,EAAeC,oBAAf,CAF/L,EAEqOxU,SAFvO,GAEmPG,IAFnP,CAAf;EAGD,CAtB6B,EAsB3B,CAAC8M,QAAD,EAAWyB,qBAAX,EAAkCiF,UAAlC,CAtB2B,CAA9B;EAuBA,IAAIpR,oBAAoB,GAAGtR,WAAW,CAAC,UAAUuR,MAAV,EAAkBqB,MAAlB,EAA0B;IAC/D,IAAIoB,SAAJ;;IACA,IAAIxC,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEM,MAAM,GAAGL,KAAK,CAACK,MADjB;IAAA,IAEEJ,OAAO,GAAGD,KAAK,CAACC,OAFlB;;IAGED,KAAK,CAACE,OAAN;;IACA,IAAIC,SAAS,GAAGH,KAAK,CAACG,SAAtB;IAAA,IACA6R,YAAY,GAAGhS,KAAK,CAACvC,MADrB;IAAA,IAEAA,MAAM,GAAGuU,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF3C;IAAA,IAGAzf,GAAG,GAAGyN,KAAK,CAACzN,GAHZ;IAAA,IAIAmL,IAAI,GAAG3P,6BAA6B,CAACiS,KAAD,EAAQ2Q,YAAR,CAJpC;;IAKF,IAAItP,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACE6Q,qBAAqB,GAAG5Q,KAAK,CAACzD,gBADhC;IAAA,IAEEA,gBAAgB,GAAGqU,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE;;IAGA,IAAIC,WAAW,GAAGd,MAAM,CAAC5e,OAAP,CAAeyB,KAAjC;;IACA,IAAIke,uBAAuB,GAAG,SAASA,uBAAT,GAAmC;MAC/D3H,QAAQ,CAAC;QACPjX,IAAI,EAAEsb;MADC,CAAD,CAAR;IAGD,CAJD;;IAKA,IAAIuD,sBAAsB,GAAG,SAASA,sBAAT,GAAkC;MAC7D,IAAIF,WAAW,CAACpf,MAAZ,IAAsB,CAAC0Y,wBAAwB,CAAChZ,OAAzB,CAAiCwO,WAA5D,EAAyE;QACvEwJ,QAAQ,CAAC;UACPjX,IAAI,EAAEic;QADC,CAAD,CAAR;MAGD;IACF,CAND;;IAOA,IAAI6C,yBAAyB,GAAG,SAASA,yBAAT,CAAmC1gB,KAAnC,EAA0C;MACxE,IAAI6C,GAAG,GAAGG,iBAAiB,CAAChD,KAAD,CAA3B;;MACA,IAAI6C,GAAG,IAAI8c,2BAA2B,CAAC9c,GAAD,CAAtC,EAA6C;QAC3C8c,2BAA2B,CAAC9c,GAAD,CAA3B,CAAiC7C,KAAjC;MACD,CAFD,MAEO,IAAIgY,sBAAsB,CAACnV,GAAD,CAA1B,EAAiC;QACtCgW,QAAQ,CAAC;UACPjX,IAAI,EAAEyb,4BADC;UAEPxa,GAAG,EAAEA,GAFE;UAGPe,oBAAoB,EAAEA;QAHf,CAAD,CAAR;MAKD;IACF,CAXD;;IAYA,IAAI+c,WAAW,GAAGtkB,QAAQ,EAAEwU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAC/E,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUggB,gBAAV,EAA4B;MAC1GvB,eAAe,CAACxe,OAAhB,GAA0B+f,gBAA1B;IACD,CAFyE,CAA9C,EAExB/P,SAAS,CAAC,uBAAD,CAAT,GAAqC0P,WAAW,CAACpf,MAAZ,IAAsBof,WAAW,CAAC9W,gBAAZ,GAA+B,CAAC,CAAtD,GAA0D8V,UAAU,CAAC1W,SAAX,CAAqB0X,WAAW,CAAC9W,gBAAjC,CAA1D,GAA+G,EAF5H,EAEgIoH,SAAS,CAAC,eAAD,CAAT,GAA6B0O,UAAU,CAAC7W,MAFxK,EAEgLmI,SAAS,CAAC,eAAD,CAAT,GAA6B4O,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAFlO,EAE0O0P,SAAS,CAAC,eAAD,CAAT,GAA6B,SAFvQ,EAEkRA,SAAS,CAAC,iBAAD,CAAT,GAA+B9E,IAAI,IAAIA,IAAI,CAAC,YAAD,CAAZ,GAA6BhJ,SAA7B,GAAyC,KAAKwc,UAAU,CAAC5W,OAF1W,EAEmXkI,SAAS,CAACpI,EAAV,GAAe8W,UAAU,CAAC7H,cAF7Y,EAE6Z7G,SAAS,CAACzE,IAAV,GAAiB,UAF9a,EAE0byE,SAAS,CAACgQ,QAAV,GAAqB,CAF/c,EAEkdhQ,SAAS,CAACnC,MAAV,GAAmB9O,oBAAoB,CAAC8O,MAAD,EAAS+R,sBAAT,CAFzf,EAE2hB5P,SAF7hB,GAEyiB9E,IAFziB,CAA1B;;IAGA,IAAI,CAACA,IAAI,CAACmD,QAAV,EAAoB;MAClB;MACA;QACEyR,WAAW,CAACrS,OAAZ,GAAsB1O,oBAAoB,CAAC0O,OAAD,EAAUkS,uBAAV,CAA1C;QACAG,WAAW,CAACnS,SAAZ,GAAwB5O,oBAAoB,CAAC4O,SAAD,EAAYkS,yBAAZ,CAA5C;MACD;IACF;;IACDpG,qBAAqB,CAAC,sBAAD,EAAyBrO,gBAAzB,EAA2CH,MAA3C,EAAmDuT,eAAnD,CAArB;IACA,OAAOsB,WAAP;EACD,CAnDqC,EAmDnC,CAAClB,MAAD,EAASF,UAAT,EAAqBjF,qBAArB,EAA4CzB,QAA5C,EAAsDgB,wBAAtD,EAAgF8F,2BAAhF,EAA6G/b,oBAA7G,CAnDmC,CAAtC;EAoDA,IAAIsN,YAAY,GAAGrU,WAAW,CAAC,UAAU8T,MAAV,EAAkB;IAC/C,IAAImQ,SAAJ;;IACA,IAAIhQ,KAAK,GAAGH,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEkH,QAAQ,GAAG/G,KAAK,CAAC5G,IADnB;IAAA,IAEE4N,SAAS,GAAGhH,KAAK,CAAC1M,KAFpB;IAAA,IAGEkN,WAAW,GAAGR,KAAK,CAACQ,WAHtB;IAAA,IAIEhD,OAAO,GAAGwC,KAAK,CAACxC,OAJlB;;IAKEwC,KAAK,CAACvC,OAAN;;IACA,IAAIwC,YAAY,GAAGD,KAAK,CAAChF,MAAzB;IAAA,IACAA,MAAM,GAAGiF,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAD3C;IAAA,IAEAnQ,GAAG,GAAGkQ,KAAK,CAAClQ,GAFZ;IAAA,IAGAsO,QAAQ,GAAG4B,KAAK,CAAC5B,QAHjB;IAAA,IAIAnD,IAAI,GAAG3P,6BAA6B,CAAC0U,KAAD,EAAQmO,YAAR,CAJpC;;IAKF,IAAI8B,eAAe,GAAGtB,MAAM,CAAC5e,OAA7B;IAAA,IACE0f,WAAW,GAAGQ,eAAe,CAACze,KADhC;IAAA,IAEE0e,WAAW,GAAGD,eAAe,CAACjf,KAFhC;;IAGA,IAAImf,gBAAgB,GAAGrJ,eAAe,CAACC,QAAD,EAAWC,SAAX,EAAsBkJ,WAAW,CAACjY,KAAlC,EAAyC,4CAAzC,CAAtC;IAAA,IACEmB,IAAI,GAAG+W,gBAAgB,CAAC,CAAD,CADzB;IAAA,IAEE7c,KAAK,GAAG6c,gBAAgB,CAAC,CAAD,CAF1B;;IAGA,IAAIC,mBAAmB,GAAG,SAASA,mBAAT,GAA+B;MACvD,IAAI9c,KAAK,KAAKmc,WAAW,CAAC9W,gBAA1B,EAA4C;QAC1C;MACD;;MACDqR,eAAe,CAACja,OAAhB,GAA0B,KAA1B;MACAgY,QAAQ,CAAC;QACPjX,IAAI,EAAEmc,eADC;QAEP3Z,KAAK,EAAEA,KAFA;QAGP8K,QAAQ,EAAEA;MAHH,CAAD,CAAR;IAKD,CAVD;;IAWA,IAAIiS,eAAe,GAAG,SAASA,eAAT,GAA2B;MAC/CtI,QAAQ,CAAC;QACPjX,IAAI,EAAEoc,WADC;QAEP5Z,KAAK,EAAEA;MAFA,CAAD,CAAR;IAID,CALD;;IAMA,IAAIgd,SAAS,GAAG/kB,QAAQ,EAAEykB,SAAS,GAAG;MACpC5R,QAAQ,EAAEA,QAD0B;MAEpC9C,IAAI,EAAE,QAF8B;MAGpC,iBAAiB,MAAMlC,IAAI,KAAKJ,YAAf,CAHmB;MAIpCrB,EAAE,EAAE8W,UAAU,CAAC1W,SAAX,CAAqBzE,KAArB;IAJgC,CAAZ,EAKvB0c,SAAS,CAAChV,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUyM,QAAV,EAAoB;MACzD,IAAIA,QAAJ,EAAc;QACZsN,QAAQ,CAAC9Z,OAAT,CAAiB0e,UAAU,CAAC1W,SAAX,CAAqBzE,KAArB,CAAjB,IAAgDiJ,QAAhD;MACD;IACF,CAJgC,CALP,EAStByT,SAToB,GASR/U,IATQ,CAAxB;;IAUA,IAAI,CAACmD,QAAL,EAAe;MACb;MACA;QACEkS,SAAS,CAAC9S,OAAV,GAAoB1O,oBAAoB,CAAC0O,OAAD,EAAU6S,eAAV,CAAxC;MACD;IACF;;IACDC,SAAS,CAAC9P,WAAV,GAAwB1R,oBAAoB,CAAC0R,WAAD,EAAc4P,mBAAd,CAA5C;IACA,OAAOE,SAAP;EACD,CAtD6B,EAsD3B,CAAC3B,MAAD,EAAS3V,YAAT,EAAuByV,UAAvB,EAAmCzE,eAAnC,EAAoDjC,QAApD,CAtD2B,CAA9B;EAuDA,OAAO;IACL;IACA1K,oBAAoB,EAAEA,oBAFjB;IAGLmB,aAAa,EAAEA,aAHV;IAILoB,YAAY,EAAEA,YAJT;IAKLQ,YAAY,EAAEA,YALT;IAML;IACAxD,UAAU,EAAEA,UAPP;IAQLsE,QAAQ,EAAEA,QARL;IASLC,SAAS,EAAEA,SATN;IAULzI,mBAAmB,EAAEA,mBAVhB;IAWLS,UAAU,EAAEA,UAXP;IAYLsD,KAAK,EAAEA,KAZF;IAaLyS,aAAa,EAAEA,aAbV;IAcL;IACAvW,gBAAgB,EAAEA,gBAfb;IAgBLtI,MAAM,EAAEA,MAhBH;IAiBL2I,YAAY,EAAEA,YAjBT;IAkBLC,UAAU,EAAEA;EAlBP,CAAP;AAoBD;;AAED,IAAIsX,qBAAqB,GAAGvc,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,CAArG;AACA,IAAIsc,mBAAmB,GAAGxc,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,4BAAxC,GAAuE,CAAjG;AACA,IAAIuc,kBAAkB,GAAGzc,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,CAA9F;AACA,IAAIwc,gBAAgB,GAAG1c,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,CAA1F;AACA,IAAIyc,eAAe,GAAG3c,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,uBAAxC,GAAkE,CAAxF;AACA,IAAI0c,kBAAkB,GAAG5c,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2BAAxC,GAAsE,CAA/F;AACA,IAAI2c,oBAAoB,GAAG7c,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,6BAAxC,GAAwE,CAAnG;AACA,IAAI4c,iBAAiB,GAAG9c,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,CAA5F;AACA,IAAI6c,WAAW,GAAG/c,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kBAAxC,GAA6D,CAA/E;AACA,IAAI8c,SAAS,GAAGhd,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D,CAA3E;AACA,IAAI+c,UAAU,GAAGjd,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,iBAAxC,GAA4D,EAA7E;AACA,IAAIsW,cAAc,GAAGxW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,sBAAxC,GAAiE,EAAtF;AACA,IAAIqW,aAAa,GAAGvW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qBAAxC,GAAgE,EAApF;AACA,IAAIyZ,SAAS,GAAG3Z,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D,EAA3E;AACA,IAAIuW,iBAAiB,GAAGzW,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA3F;AACA,IAAIwW,kBAAkB,GAAG1W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAA9F;AACA,IAAIyW,gBAAgB,GAAG3W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,wBAAxC,GAAmE,EAA1F;AACA,IAAI0W,iBAAiB,GAAG5W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,EAA5F;AACA,IAAI2W,2BAA2B,GAAG7W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oCAAxC,GAA+E,EAAjH;AACA,IAAI0Z,kBAAkB,GAAG5Z,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0BAAxC,GAAqE,EAA9F;AACA,IAAI4W,qBAAqB,GAAG9W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,8BAAxC,GAAyE,EAArG;AACA,IAAIgd,eAAe,GAAGld,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,EAArF;AACA,IAAIid,iCAAiC,GAAGnd,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2CAAxC,GAAsF,EAA9H;AAEA,IAAIkd,kBAAkB,GAAG,aAAazf,MAAM,CAACqF,MAAP,CAAc;EAClDC,SAAS,EAAE,IADuC;EAElDsZ,qBAAqB,EAAEA,qBAF2B;EAGlDC,mBAAmB,EAAEA,mBAH6B;EAIlDC,kBAAkB,EAAEA,kBAJ8B;EAKlDC,gBAAgB,EAAEA,gBALgC;EAMlDC,eAAe,EAAEA,eANiC;EAOlDC,kBAAkB,EAAEA,kBAP8B;EAQlDC,oBAAoB,EAAEA,oBAR4B;EASlDC,iBAAiB,EAAEA,iBAT+B;EAUlDC,WAAW,EAAEA,WAVqC;EAWlDC,SAAS,EAAEA,SAXuC;EAYlDC,UAAU,EAAEA,UAZsC;EAalDzG,cAAc,EAAEA,cAbkC;EAclDD,aAAa,EAAEA,aAdmC;EAelDoD,SAAS,EAAEA,SAfuC;EAgBlDlD,iBAAiB,EAAEA,iBAhB+B;EAiBlDC,kBAAkB,EAAEA,kBAjB8B;EAkBlDC,gBAAgB,EAAEA,gBAlBgC;EAmBlDC,iBAAiB,EAAEA,iBAnB+B;EAoBlDC,2BAA2B,EAAEA,2BApBqB;EAqBlD+C,kBAAkB,EAAEA,kBArB8B;EAsBlD9C,qBAAqB,EAAEA,qBAtB2B;EAuBlDC,aAAa,EAAEmG,eAvBmC;EAwBlDC,iCAAiC,EAAEA;AAxBe,CAAd,CAAtC;;AA2BA,SAASE,iBAAT,CAA2BrgB,KAA3B,EAAkC;EAChC,IAAI0W,YAAY,GAAGe,iBAAiB,CAACzX,KAAD,CAApC;EACA,IAAIgI,YAAY,GAAG0O,YAAY,CAAC1O,YAAhC;EACA,IAAIC,UAAU,GAAGyO,YAAY,CAACzO,UAA9B;;EACA,IAAIA,UAAU,KAAK,EAAf,IAAqBD,YAArB,IAAqChI,KAAK,CAACsgB,iBAAN,KAA4Brf,SAAjE,IAA8EjB,KAAK,CAAC+Q,iBAAN,KAA4B9P,SAA1G,IAAuHjB,KAAK,CAACiI,UAAN,KAAqBhH,SAAhJ,EAA2J;IACzJgH,UAAU,GAAGjI,KAAK,CAACqI,YAAN,CAAmBL,YAAnB,CAAb;EACD;;EACD,OAAOzN,QAAQ,CAAC,EAAD,EAAKmc,YAAL,EAAmB;IAChCzO,UAAU,EAAEA;EADoB,CAAnB,CAAf;AAGD;;AACD,IAAIsY,WAAW,GAAG;EAChBtZ,KAAK,EAAEvM,SAAS,CAAC8f,KAAV,CAAgBC,UADP;EAEhBpS,YAAY,EAAE3N,SAAS,CAACoZ,IAFR;EAGhBZ,mBAAmB,EAAExY,SAAS,CAACoZ,IAHf;EAIhBzD,oBAAoB,EAAE3V,SAAS,CAACoZ,IAJhB;EAKhBsB,uBAAuB,EAAE1a,SAAS,CAACoZ,IALnB;EAMhBnM,gBAAgB,EAAEjN,SAAS,CAACqZ,MANZ;EAOhBlM,uBAAuB,EAAEnN,SAAS,CAACqZ,MAPnB;EAQhBtD,uBAAuB,EAAE/V,SAAS,CAACqZ,MARnB;EAShB1U,MAAM,EAAE3E,SAAS,CAACsZ,IATF;EAUhB9L,aAAa,EAAExN,SAAS,CAACsZ,IAVT;EAWhBpD,aAAa,EAAElW,SAAS,CAACsZ,IAXT;EAYhBhM,YAAY,EAAEtN,SAAS,CAACuZ,GAZR;EAahB/C,mBAAmB,EAAExW,SAAS,CAACuZ,GAbf;EAchByG,mBAAmB,EAAEhgB,SAAS,CAACuZ,GAdf;EAehBhM,UAAU,EAAEvN,SAAS,CAACwZ,MAfN;EAgBhBoM,iBAAiB,EAAE5lB,SAAS,CAACwZ,MAhBb;EAiBhBnD,iBAAiB,EAAErW,SAAS,CAACwZ,MAjBb;EAkBhBvN,EAAE,EAAEjM,SAAS,CAACwZ,MAlBE;EAmBhBrN,OAAO,EAAEnM,SAAS,CAACwZ,MAnBH;EAoBhBtN,MAAM,EAAElM,SAAS,CAACwZ,MApBF;EAqBhBnN,SAAS,EAAErM,SAAS,CAACoZ,IArBL;EAsBhBhN,OAAO,EAAEpM,SAAS,CAACwZ,MAtBH;EAuBhB0B,cAAc,EAAElb,SAAS,CAACwZ,MAvBV;EAwBhBhL,YAAY,EAAExO,SAAS,CAACoZ,IAxBR;EAyBhB6G,oBAAoB,EAAEjgB,SAAS,CAACoZ,IAzBhB;EA0BhB8G,wBAAwB,EAAElgB,SAAS,CAACoZ,IA1BpB;EA2BhBzK,aAAa,EAAE3O,SAAS,CAACoZ,IA3BT;EA4BhB+G,cAAc,EAAEngB,SAAS,CAACoZ,IA5BV;EA6BhBhL,kBAAkB,EAAEpO,SAAS,CAACoZ,IA7Bd;EA8BhBnX,WAAW,EAAEjC,SAAS,CAACyZ,KAAV,CAAgB;IAC3B5B,gBAAgB,EAAE7X,SAAS,CAACoZ,IADD;IAE3BrB,mBAAmB,EAAE/X,SAAS,CAACoZ,IAFJ;IAG3BjR,QAAQ,EAAEnI,SAAS,CAACyZ,KAAV,CAAgB;MACxBpQ,cAAc,EAAErJ,SAAS,CAACoZ,IADF;MAExBhR,aAAa,EAAEpI,SAAS,CAACuZ,GAFD;MAGxBrP,IAAI,EAAElK,SAAS,CAACuZ;IAHQ,CAAhB;EAHiB,CAAhB;AA9BG,CAAlB;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASuM,oBAAT,CAA8B/J,OAA9B,EAAuCC,YAAvC,EAAqD1W,KAArD,EAA4D;EAC1D,IAAIygB,uBAAuB,GAAG5lB,MAAM,EAApC;;EACA,IAAIsc,mBAAmB,GAAGX,kBAAkB,CAACC,OAAD,EAAUC,YAAV,EAAwB1W,KAAxB,CAA5C;EAAA,IACEQ,KAAK,GAAG2W,mBAAmB,CAAC,CAAD,CAD7B;EAAA,IAEEJ,QAAQ,GAAGI,mBAAmB,CAAC,CAAD,CAFhC,CAF0D,CAM1D;;;EACArc,SAAS,CAAC,YAAY;IACpB,IAAI,CAACkG,gBAAgB,CAAChB,KAAD,EAAQ,cAAR,CAArB,EAA8C;MAC5C;IACD;;IACD,IAAIA,KAAK,CAACkT,mBAAN,CAA0BuN,uBAAuB,CAAC1hB,OAAlD,EAA2DiB,KAAK,CAACgI,YAAjE,CAAJ,EAAoF;MAClF+O,QAAQ,CAAC;QACPjX,IAAI,EAAEqgB,iCADC;QAEPlY,UAAU,EAAEjI,KAAK,CAACqI,YAAN,CAAmBrI,KAAK,CAACgI,YAAzB;MAFL,CAAD,CAAR;IAID;;IACDyY,uBAAuB,CAAC1hB,OAAxB,GAAkCyB,KAAK,CAACwH,YAAN,KAAuByY,uBAAuB,CAAC1hB,OAA/C,GAAyDiB,KAAK,CAACgI,YAA/D,GAA8ExH,KAAK,CAACwH,YAAtH,CAVoB,CAWpB;EACD,CAZQ,EAYN,CAACxH,KAAK,CAACwH,YAAP,EAAqBhI,KAAK,CAACgI,YAA3B,CAZM,CAAT;EAaA,OAAO,CAACtH,QAAQ,CAACF,KAAD,EAAQR,KAAR,CAAT,EAAyB+W,QAAzB,CAAP;AACD,C,CAED;;;AACA,IAAI2J,mBAAmB,GAAGjlB,IAA1B;AACA;;AACA,IAAIuH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACzCwd,mBAAmB,GAAG,SAASC,iBAAT,CAA2B3F,OAA3B,EAAoCC,MAApC,EAA4C;IAChEvgB,SAAS,CAACwgB,cAAV,CAAyBqF,WAAzB,EAAsCvF,OAAtC,EAA+C,MAA/C,EAAuDC,MAAM,CAACE,IAA9D;EACD,CAFD;AAGD;;AACD,IAAIyF,cAAc,GAAGrmB,QAAQ,CAAC,EAAD,EAAK6c,cAAL,EAAqB;EAChDlE,mBAAmB,EAAE,SAASA,mBAAT,CAA6BQ,QAA7B,EAAuCtL,IAAvC,EAA6C;IAChE,OAAOsL,QAAQ,KAAKtL,IAApB;EACD,CAH+C;EAIhDiI,oBAAoB,EAAElR;AAJ0B,CAArB,CAA7B;AAOA;;;AACA,SAAS0hB,2BAAT,CAAqCrgB,KAArC,EAA4CoU,MAA5C,EAAoD;EAClD,IAAIwE,YAAJ;;EACA,IAAItZ,IAAI,GAAG8U,MAAM,CAAC9U,IAAlB;EAAA,IACEE,KAAK,GAAG4U,MAAM,CAAC5U,KADjB;EAAA,IAEE8c,MAAM,GAAGlI,MAAM,CAACkI,MAFlB;EAGA,IAAIhI,OAAJ;;EACA,QAAQhV,IAAR;IACE,KAAK6c,SAAL;MACE7H,OAAO,GAAG;QACRzV,MAAM,EAAEgY,iBAAiB,CAACrX,KAAD,EAAQ,QAAR,CADjB;QAER2H,gBAAgB,EAAE0P,iBAAiB,CAACrX,KAAD,EAAQ,kBAAR,CAF3B;QAGRgI,YAAY,EAAEhI,KAAK,CAACiH,KAAN,CAAY2N,MAAM,CAACtS,KAAnB,CAHN;QAIR2F,UAAU,EAAEjI,KAAK,CAACqI,YAAN,CAAmBrI,KAAK,CAACiH,KAAN,CAAY2N,MAAM,CAACtS,KAAnB,CAAnB;MAJJ,CAAV;MAMA;;IACF,KAAKid,qBAAL;MACE,IAAI/e,KAAK,CAACnB,MAAV,EAAkB;QAChByV,OAAO,GAAG;UACRnN,gBAAgB,EAAEjG,oBAAoB,CAAC,CAAD,EAAIlB,KAAK,CAACmH,gBAAV,EAA4B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAAxC,EAAgDoX,MAAM,CAAC9S,oBAAvD,EAA6E,IAA7E;QAD9B,CAAV;MAGD,CAJD,MAIO;QACLgT,OAAO,GAAG;UACRnN,gBAAgB,EAAEmV,MAAM,IAAItc,KAAK,CAACwH,YAAN,IAAsB,IAAhC,GAAuC,CAAC,CAAxC,GAA4C0P,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAf,EAAkBoU,MAAM,CAAC9S,oBAAzB,CAD/E;UAERzC,MAAM,EAAEW,KAAK,CAACiH,KAAN,CAAYzJ,MAAZ,IAAsB;QAFtB,CAAV;MAID;;MACD;;IACF,KAAKgiB,mBAAL;MACE,IAAIhf,KAAK,CAACnB,MAAV,EAAkB;QAChB,IAAIyd,MAAJ,EAAY;UACVhI,OAAO,GAAGqE,qBAAqB,CAACnZ,KAAD,EAAQQ,KAAK,CAACmH,gBAAd,CAA/B;QACD,CAFD,MAEO;UACLmN,OAAO,GAAG;YACRnN,gBAAgB,EAAEjG,oBAAoB,CAAC,CAAC,CAAF,EAAKlB,KAAK,CAACmH,gBAAX,EAA6B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAAzC,EAAiDoX,MAAM,CAAC9S,oBAAxD,EAA8E,IAA9E;UAD9B,CAAV;QAGD;MACF,CARD,MAQO;QACLgT,OAAO,GAAG;UACRnN,gBAAgB,EAAE+P,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAC,CAAhB,EAAmBoU,MAAM,CAAC9S,oBAA1B,CADnC;UAERzC,MAAM,EAAEW,KAAK,CAACiH,KAAN,CAAYzJ,MAAZ,IAAsB;QAFtB,CAAV;MAID;;MACD;;IACF,KAAKsiB,iBAAL;MACEhL,OAAO,GAAGqE,qBAAqB,CAACnZ,KAAD,EAAQQ,KAAK,CAACmH,gBAAd,CAA/B;MACA;;IACF,KAAK8X,kBAAL;MACE3K,OAAO,GAAGva,QAAQ,CAAC;QACjB8E,MAAM,EAAE,KADS;QAEjBsI,gBAAgB,EAAE,CAAC;MAFF,CAAD,EAGf,CAACnH,KAAK,CAACnB,MAAP,IAAiB;QAClB2I,YAAY,EAAE,IADI;QAElBC,UAAU,EAAE;MAFM,CAHF,CAAlB;MAOA;;IACF,KAAK2X,kBAAL;MACE9K,OAAO,GAAG;QACRnN,gBAAgB,EAAEjG,oBAAoB,CAAC,CAAC,EAAF,EAAMlB,KAAK,CAACmH,gBAAZ,EAA8B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAA1C,EAAkDoX,MAAM,CAAC9S,oBAAzD,EAA+E,KAA/E;MAD9B,CAAV;MAGA;;IACF,KAAK+d,oBAAL;MACE/K,OAAO,GAAG;QACRnN,gBAAgB,EAAEjG,oBAAoB,CAAC,EAAD,EAAKlB,KAAK,CAACmH,gBAAX,EAA6B3H,KAAK,CAACiH,KAAN,CAAYzJ,MAAzC,EAAiDoX,MAAM,CAAC9S,oBAAxD,EAA8E,KAA9E;MAD9B,CAAV;MAGA;;IACF,KAAK4d,gBAAL;MACE5K,OAAO,GAAG;QACRnN,gBAAgB,EAAExF,uBAAuB,CAAC,CAAD,EAAI,CAAJ,EAAOnC,KAAK,CAACiH,KAAN,CAAYzJ,MAAnB,EAA2BoX,MAAM,CAAC9S,oBAAlC,EAAwD,KAAxD;MADjC,CAAV;MAGA;;IACF,KAAK6d,eAAL;MACE7K,OAAO,GAAG;QACRnN,gBAAgB,EAAExF,uBAAuB,CAAC,CAAC,CAAF,EAAKnC,KAAK,CAACiH,KAAN,CAAYzJ,MAAZ,GAAqB,CAA1B,EAA6BwC,KAAK,CAACiH,KAAN,CAAYzJ,MAAzC,EAAiDoX,MAAM,CAAC9S,oBAAxD,EAA8E,KAA9E;MADjC,CAAV;MAGA;;IACF,KAAKke,SAAL;MACElL,OAAO,GAAGva,QAAQ,CAAC;QACjB8E,MAAM,EAAE,KADS;QAEjBsI,gBAAgB,EAAE,CAAC;MAFF,CAAD,EAGfnH,KAAK,CAACmH,gBAAN,IAA0B,CAA1B,KAAgC,CAACyR,YAAY,GAAGpZ,KAAK,CAACiH,KAAtB,KAAgC,IAAhC,GAAuC,KAAK,CAA5C,GAAgDmS,YAAY,CAAC5b,MAA7F,KAAwGoX,MAAM,CAACzM,UAA/G,IAA6H;QAC9HH,YAAY,EAAEhI,KAAK,CAACiH,KAAN,CAAYzG,KAAK,CAACmH,gBAAlB,CADgH;QAE9HM,UAAU,EAAEjI,KAAK,CAACqI,YAAN,CAAmBrI,KAAK,CAACiH,KAAN,CAAYzG,KAAK,CAACmH,gBAAlB,CAAnB;MAFkH,CAH9G,CAAlB;MAOA;;IACF,KAAKoY,WAAL;MACEjL,OAAO,GAAG;QACRzV,MAAM,EAAE,IADA;QAERsI,gBAAgB,EAAE0P,iBAAiB,CAACrX,KAAD,EAAQ,kBAAR,CAF3B;QAGRiI,UAAU,EAAE2M,MAAM,CAAC3M;MAHX,CAAV;MAKA;;IACF,KAAKgY,UAAL;MACEnL,OAAO,GAAG;QACRzV,MAAM,EAAE,IADA;QAERsI,gBAAgB,EAAE+P,yBAAyB,CAAC1X,KAAD,EAAQQ,KAAR,EAAe,CAAf;MAFnC,CAAV;MAIA;;IACF,KAAKoc,kBAAL;MACE9H,OAAO,GAAG;QACR9M,YAAY,EAAE4M,MAAM,CAAC5M,YADb;QAERC,UAAU,EAAEjI,KAAK,CAACqI,YAAN,CAAmBuM,MAAM,CAAC5M,YAA1B;MAFJ,CAAV;MAIA;;IACF,KAAKmY,iCAAL;MACErL,OAAO,GAAG;QACR7M,UAAU,EAAE2M,MAAM,CAAC3M;MADX,CAAV;MAGA;;IACF;MACE,OAAOqR,sBAAsB,CAAC9Y,KAAD,EAAQoU,MAAR,EAAgBwL,kBAAhB,CAA7B;EAvGJ;;EAyGA,OAAO7lB,QAAQ,CAAC,EAAD,EAAKiG,KAAL,EAAYsU,OAAZ,CAAf;AACD;AACD;;;AAEA,IAAIgM,WAAW,GAAG,CAAC,cAAD,EAAiB,QAAjB,EAA2B,KAA3B,CAAlB;AAAA,IACEC,YAAY,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,QAAlB,EAA4B,KAA5B,EAAmC,aAAnC,EAAkD,aAAlD,EAAiE,SAAjE,EAA4E,SAA5E,EAAuF,UAAvF,CADjB;AAAA,IAEEC,UAAU,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,QAAvB,EAAiC,KAAjC,CAFf;AAAA,IAGEC,UAAU,GAAG,CAAC,WAAD,EAAc,UAAd,EAA0B,SAA1B,EAAqC,SAArC,EAAgD,QAAhD,EAA0D,cAA1D,EAA0E,QAA1E,EAAoF,KAApF,CAHf;AAIAC,WAAW,CAACtN,gBAAZ,GAA+BwM,kBAA/B;;AACA,SAASc,WAAT,CAAqB7D,SAArB,EAAgC;EAC9B,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IACxBA,SAAS,GAAG,EAAZ;EACD;;EACDqD,mBAAmB,CAACrD,SAAD,EAAY6D,WAAZ,CAAnB,CAJ8B,CAK9B;;EACA,IAAIlhB,KAAK,GAAGzF,QAAQ,CAAC,EAAD,EAAKqmB,cAAL,EAAqBvD,SAArB,CAApB;;EACA,IAAIzM,aAAa,GAAG5Q,KAAK,CAAC4Q,aAA1B;EAAA,IACE1I,aAAa,GAAGlI,KAAK,CAACkI,aADxB;EAAA,IAEEjB,KAAK,GAAGjH,KAAK,CAACiH,KAFhB;EAAA,IAGEvL,cAAc,GAAGsE,KAAK,CAACtE,cAHzB;EAAA,IAIEiB,WAAW,GAAGqD,KAAK,CAACrD,WAJtB;EAAA,IAKE0T,oBAAoB,GAAGrQ,KAAK,CAACqQ,oBAL/B;EAAA,IAME+E,uBAAuB,GAAGpV,KAAK,CAACoV,uBANlC;EAAA,IAOE/M,YAAY,GAAGrI,KAAK,CAACqI,YAPvB,CAP8B,CAe9B;;EACA,IAAIqO,YAAY,GAAG2J,iBAAiB,CAACrgB,KAAD,CAApC;;EACA,IAAIsd,qBAAqB,GAAGkD,oBAAoB,CAACK,2BAAD,EAA8BnK,YAA9B,EAA4C1W,KAA5C,CAAhD;EAAA,IACEQ,KAAK,GAAG8c,qBAAqB,CAAC,CAAD,CAD/B;EAAA,IAEEvG,QAAQ,GAAGuG,qBAAqB,CAAC,CAAD,CAFlC;;EAGA,IAAIje,MAAM,GAAGmB,KAAK,CAACnB,MAAnB;EAAA,IACEsI,gBAAgB,GAAGnH,KAAK,CAACmH,gBAD3B;EAAA,IAEEK,YAAY,GAAGxH,KAAK,CAACwH,YAFvB;EAAA,IAGEC,UAAU,GAAGzH,KAAK,CAACyH,UAHrB,CApB8B,CAyB9B;;EACA,IAAIyG,OAAO,GAAG7T,MAAM,CAAC,IAAD,CAApB;EACA,IAAIge,QAAQ,GAAGhe,MAAM,CAAC,EAAD,CAArB;EACA,IAAIsmB,QAAQ,GAAGtmB,MAAM,CAAC,IAAD,CAArB;EACA,IAAI0iB,eAAe,GAAG1iB,MAAM,CAAC,IAAD,CAA5B;EACA,IAAIqd,iBAAiB,GAAGrd,MAAM,CAAC,IAAD,CAA9B,CA9B8B,CA+B9B;;EACA,IAAI4iB,UAAU,GAAG/H,aAAa,CAAC1V,KAAD,CAA9B,CAhC8B,CAiC9B;;EACA,IAAI0d,sBAAsB,GAAG7iB,MAAM,EAAnC,CAlC8B,CAmC9B;;EACA,IAAI8iB,MAAM,GAAGrH,YAAY,CAAC;IACxB9V,KAAK,EAAEA,KADiB;IAExBR,KAAK,EAAEA;EAFiB,CAAD,CAAzB;EAIA,IAAI8B,oBAAoB,GAAG/G,WAAW,CAAC,UAAUuH,KAAV,EAAiB;IACtD,OAAOuW,QAAQ,CAAC9Z,OAAT,CAAiB0e,UAAU,CAAC1W,SAAX,CAAqBzE,KAArB,CAAjB,CAAP;EACD,CAFqC,EAEnC,CAACmb,UAAD,CAFmC,CAAtC,CAxC8B,CA4C9B;EACA;;EACAhF,oBAAoB,CAACpI,oBAAD,EAAuB,CAAChR,MAAD,EAASsI,gBAAT,EAA2BM,UAA3B,EAAuChB,KAAvC,CAAvB,EAAsE1M,QAAQ,CAAC;IACjGoe,cAAc,EAAET,iBAAiB,CAACnZ,OAD+D;IAEjGQ,mBAAmB,EAAEme,sBAAsB,CAAC3e,OAFqD;IAGjGkI,KAAK,EAAEA,KAH0F;IAIjGtK,WAAW,EAAEA,WAJoF;IAKjG0L,YAAY,EAAEA;EALmF,CAAD,EAM/F7H,KAN+F,CAA9E,CAApB,CA9C8B,CAqD9B;;EACAiY,oBAAoB,CAACrD,uBAAD,EAA0B,CAACpN,YAAD,CAA1B,EAA0CzN,QAAQ,CAAC;IACrEoe,cAAc,EAAET,iBAAiB,CAACnZ,OADmC;IAErEQ,mBAAmB,EAAEme,sBAAsB,CAAC3e,OAFyB;IAGrEkI,KAAK,EAAEA,KAH8D;IAIrEtK,WAAW,EAAEA,WAJwD;IAKrE0L,YAAY,EAAEA;EALuD,CAAD,EAMnE7H,KANmE,CAAlD,CAApB,CAtD8B,CA6D9B;;EACA,IAAIwY,eAAe,GAAGJ,iBAAiB,CAAC;IACtCE,WAAW,EAAEpK,OAAO,CAAC3P,OADiB;IAEtC4I,gBAAgB,EAAEA,gBAFoB;IAGtCtI,MAAM,EAAEA,MAH8B;IAItCwZ,QAAQ,EAAEA,QAJ4B;IAKtCnd,cAAc,EAAEA,cALsB;IAMtCoG,oBAAoB,EAAEA;EANgB,CAAD,CAAvC;EAQAmX,wBAAwB,CAAC;IACvBN,cAAc,EAAET,iBAAiB,CAACnZ,OADX;IAEvBiB,KAAK,EAAEA,KAFgB;IAGvBQ,KAAK,EAAEA;EAHgB,CAAD,CAAxB,CAtE8B,CA2E9B;;EACA1F,SAAS,CAAC,YAAY;IACpB,IAAIsmB,WAAW,GAAGxQ,aAAa,IAAI1I,aAAjB,IAAkC7I,MAApD;;IACA,IAAI+hB,WAAW,IAAID,QAAQ,CAACpiB,OAA5B,EAAqC;MACnCoiB,QAAQ,CAACpiB,OAAT,CAAiBsO,KAAjB;IACD,CAJmB,CAKpB;;EACD,CANQ,EAMN,EANM,CAAT;EAOAvS,SAAS,CAAC,YAAY;IACpB,IAAIod,iBAAiB,CAACnZ,OAAtB,EAA+B;MAC7B;IACD;;IACD2e,sBAAsB,CAAC3e,OAAvB,GAAiCkI,KAAK,CAACzJ,MAAvC;EACD,CALQ,CAAT,CAnF8B,CAyF9B;;EACA,IAAIua,wBAAwB,GAAGH,uBAAuB,CAACvY,MAAD,EAAS,CAAC8hB,QAAD,EAAWzS,OAAX,EAAoB6O,eAApB,CAAT,EAA+C5gB,WAA/C,EAA4D,YAAY;IAC5Hoa,QAAQ,CAAC;MACPjX,IAAI,EAAEkgB,SADC;MAEP7X,UAAU,EAAE;IAFL,CAAD,CAAR;EAID,CALqD,CAAtD;EAMA,IAAIqQ,qBAAqB,GAAGP,2BAA2B,CAAC,eAAD,EAAkB,cAAlB,CAAvD,CAhG8B,CAiG9B;;EACAnd,SAAS,CAAC,YAAY;IACpBod,iBAAiB,CAACnZ,OAAlB,GAA4B,KAA5B;IACA,OAAO,YAAY;MACjBmZ,iBAAiB,CAACnZ,OAAlB,GAA4B,IAA5B;IACD,CAFD;EAGD,CALQ,EAKN,EALM,CAAT,CAlG8B,CAwG9B;;EACAjE,SAAS,CAAC,YAAY;IACpB,IAAIumB,qBAAJ;;IACA,IAAI,CAAChiB,MAAL,EAAa;MACXwZ,QAAQ,CAAC9Z,OAAT,GAAmB,EAAnB;IACD,CAFD,MAEO,IAAI,CAAC,CAACsiB,qBAAqB,GAAG1kB,WAAW,CAACkG,QAArC,KAAkD,IAAlD,GAAyD,KAAK,CAA9D,GAAkEwe,qBAAqB,CAACve,aAAzF,MAA4Gqe,QAAQ,CAACpiB,OAAzH,EAAkI;MACvI,IAAIuiB,iBAAJ;;MACAH,QAAQ,IAAI,IAAZ,IAAoB,CAACG,iBAAiB,GAAGH,QAAQ,CAACpiB,OAA9B,KAA0C,IAA9D,GAAqE,KAAK,CAA1E,GAA8EuiB,iBAAiB,CAACjU,KAAlB,EAA9E;IACD;EACF,CARQ,EAQN,CAAChO,MAAD,EAAS1C,WAAT,CARM,CAAT;EAUA;;EACA,IAAIkP,oBAAoB,GAAG3Q,OAAO,CAAC,YAAY;IAC7C,OAAO;MACLsP,SAAS,EAAE,SAASA,SAAT,CAAmBtM,KAAnB,EAA0B;QACnCA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAEyf,qBADC;UAEPzC,MAAM,EAAE5e,KAAK,CAAC4e,MAFP;UAGPhb,oBAAoB,EAAEA;QAHf,CAAD,CAAR;MAKD,CARI;MASLmJ,OAAO,EAAE,SAASA,OAAT,CAAiB/M,KAAjB,EAAwB;QAC/BA,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAE0f,mBADC;UAEP1C,MAAM,EAAE5e,KAAK,CAAC4e,MAFP;UAGPhb,oBAAoB,EAAEA;QAHf,CAAD,CAAR;MAKD,CAhBI;MAiBLgK,IAAI,EAAE,SAASA,IAAT,CAAc5N,KAAd,EAAqB;QACzB,IAAI,CAACyf,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAA1B,EAAkC;UAChC;QACD;;QACDnB,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAE4f,gBADC;UAEP5d,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CA1BI;MA2BLoK,GAAG,EAAE,SAASA,GAAT,CAAahO,KAAb,EAAoB;QACvB,IAAI,CAACyf,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAA1B,EAAkC;UAChC;QACD;;QACDnB,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAE6f,eADC;UAEP7d,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CApCI;MAqCL0J,MAAM,EAAE,SAASA,MAAT,CAAgBtN,KAAhB,EAAuB;QAC7B,IAAIugB,WAAW,GAAGd,MAAM,CAAC5e,OAAP,CAAeyB,KAAjC;;QACA,IAAIie,WAAW,CAACpf,MAAZ,IAAsBof,WAAW,CAACxW,UAAlC,IAAgDwW,WAAW,CAACzW,YAA5D,IAA4EyW,WAAW,CAAC9W,gBAAZ,GAA+B,CAAC,CAAhH,EAAmH;UACjHzJ,KAAK,CAACwM,cAAN;UACAqM,QAAQ,CAAC;YACPjX,IAAI,EAAE2f;UADC,CAAD,CAAR;QAGD;MACF,CA7CI;MA8CLrU,KAAK,EAAE,SAASA,KAAT,CAAelN,KAAf,EAAsB;QAC3B,IAAIugB,WAAW,GAAGd,MAAM,CAAC5e,OAAP,CAAeyB,KAAjC,CAD2B,CAE3B;;QACA,IAAI,CAACie,WAAW,CAACpf,MAAb,IAAuBnB,KAAK,CAACmN,KAAN,KAAgB,GAA3C,CAA+C;QAA/C,EACE;UACA;QACD;;QACDnN,KAAK,CAACwM,cAAN;QACAqM,QAAQ,CAAC;UACPjX,IAAI,EAAEggB,iBADC;UAEPhe,oBAAoB,EAAEA;QAFf,CAAD,CAAR;MAID,CA1DI;MA2DLgc,MAAM,EAAE,SAASA,MAAT,CAAgB5f,KAAhB,EAAuB;QAC7B,IAAIyf,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAAzB,EAAiC;UAC/BnB,KAAK,CAACwM,cAAN;UACAqM,QAAQ,CAAC;YACPjX,IAAI,EAAE8f,kBADC;YAEP9d,oBAAoB,EAAEA;UAFf,CAAD,CAAR;QAID;MACF,CAnEI;MAoELic,QAAQ,EAAE,SAASA,QAAT,CAAkB7f,KAAlB,EAAyB;QACjC,IAAIyf,MAAM,CAAC5e,OAAP,CAAeyB,KAAf,CAAqBnB,MAAzB,EAAiC;UAC/BnB,KAAK,CAACwM,cAAN;UACAqM,QAAQ,CAAC;YACPjX,IAAI,EAAE+f,oBADC;YAEP/d,oBAAoB,EAAEA;UAFf,CAAD,CAAR;QAID;MACF;IA5EI,CAAP;EA8ED,CA/EiC,EA+E/B,CAACiV,QAAD,EAAW4G,MAAX,EAAmB7b,oBAAnB,CA/E+B,CAAlC,CApH8B,CAqM9B;;EACA,IAAI0L,aAAa,GAAGzS,WAAW,CAAC,UAAUqjB,UAAV,EAAsB;IACpD,OAAO7jB,QAAQ,CAAC;MACdoM,EAAE,EAAE8W,UAAU,CAAC5W,OADD;MAEd4G,OAAO,EAAEgQ,UAAU,CAAC3W;IAFN,CAAD,EAGZsX,UAHY,CAAf;EAID,CAL8B,EAK5B,CAACX,UAAD,CAL4B,CAA/B;EAMA,IAAI7O,YAAY,GAAG7T,WAAW,CAAC,UAAU6O,KAAV,EAAiBC,MAAjB,EAAyB;IACtD,IAAIC,SAAJ;;IACA,IAAI5N,IAAI,GAAG0N,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAAnC;IAAA,IACEyU,YAAY,GAAGniB,IAAI,CAACmiB,YADtB;IAAA,IAEEtU,WAAW,GAAG7N,IAAI,CAAC8N,MAFrB;IAAA,IAGEA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB,KAAzB,GAAiCA,WAH5C;IAAA,IAIEjL,GAAG,GAAG5C,IAAI,CAAC4C,GAJb;IAAA,IAKEmL,IAAI,GAAG3P,6BAA6B,CAAC4B,IAAD,EAAO4kB,WAAP,CALtC;;IAMA,IAAI1hB,KAAK,GAAGyK,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEK,qBAAqB,GAAG9K,KAAK,CAAC+K,gBADhC;IAAA,IAEEA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE;;IAGAsO,qBAAqB,CAAC,cAAD,EAAiBrO,gBAAjB,EAAmCH,MAAnC,EAA2C0E,OAA3C,CAArB;IACA,OAAOnU,QAAQ,EAAEuP,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUlD,QAAV,EAAoB;MACvF8S,OAAO,CAAC3P,OAAR,GAAkBnD,QAAlB;IACD,CAF8D,CAA9C,EAEbkO,SAAS,CAACnD,EAAV,GAAe8W,UAAU,CAAC7W,MAFb,EAEqBkD,SAAS,CAACQ,IAAV,GAAiB,SAFtC,EAEiDR,SAAS,CAAC,iBAAD,CAAT,GAA+BG,IAAI,IAAIA,IAAI,CAAC,YAAD,CAAZ,GAA6BhJ,SAA7B,GAAyC,KAAKwc,UAAU,CAAC5W,OAFzI,EAEkJiD,SAAS,CAACuU,YAAV,GAAyBvgB,oBAAoB,CAACugB,YAAD,EAAe,YAAY;MACzOtH,QAAQ,CAAC;QACPjX,IAAI,EAAE0Z;MADC,CAAD,CAAR;IAGD,CAJ+M,CAF/L,EAMb1P,SANW,GAMCG,IAND,CAAf;EAOD,CAnB6B,EAmB3B,CAAC8M,QAAD,EAAWyB,qBAAX,EAAkCiF,UAAlC,CAnB2B,CAA9B;EAoBA,IAAIrO,YAAY,GAAGrU,WAAW,CAAC,UAAUuR,MAAV,EAAkB;IAC/C,IAAIyC,SAAJ,EAAenB,KAAf;;IACA,IAAIrB,KAAK,GAAGD,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEyJ,QAAQ,GAAGxJ,KAAK,CAACnE,IADnB;IAAA,IAEE4N,SAAS,GAAGzJ,KAAK,CAACjK,KAFpB;IAAA,IAGEic,YAAY,GAAGhS,KAAK,CAACvC,MAHvB;IAAA,IAIEA,MAAM,GAAGuU,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAJ7C;IAAA,IAKEzf,GAAG,GAAGyN,KAAK,CAACzN,GALd;IAAA,IAME0Q,WAAW,GAAGjD,KAAK,CAACiD,WANtB;IAAA,IAOEC,WAAW,GAAGlD,KAAK,CAACkD,WAPtB;IAAA,IAQEjD,OAAO,GAAGD,KAAK,CAACC,OARlB;;IASED,KAAK,CAACE,OAAN;;IACA,IAAIW,QAAQ,GAAGb,KAAK,CAACa,QAArB;IAAA,IACAnD,IAAI,GAAG3P,6BAA6B,CAACiS,KAAD,EAAQwU,YAAR,CADpC;;IAEF,IAAI9B,eAAe,GAAGtB,MAAM,CAAC5e,OAA7B;IAAA,IACEmgB,WAAW,GAAGD,eAAe,CAACjf,KADhC;IAAA,IAEEye,WAAW,GAAGQ,eAAe,CAACze,KAFhC;;IAGA,IAAI2e,gBAAgB,GAAGrJ,eAAe,CAACC,QAAD,EAAWC,SAAX,EAAsBkJ,WAAW,CAACjY,KAAlC,EAAyC,4CAAzC,CAAtC;IAAA,IACE3E,KAAK,GAAG6c,gBAAgB,CAAC,CAAD,CAD1B;;IAEA,IAAIxP,WAAW,GAAG,SAAlB;IACA,IAAIC,kBAAkB,GAAGpD,OAAzB;;IACA,IAAI4S,mBAAmB,GAAG,SAASA,mBAAT,GAA+B;MACvD,IAAI9c,KAAK,KAAKmc,WAAW,CAAC9W,gBAA1B,EAA4C;QAC1C;MACD;;MACDqR,eAAe,CAACja,OAAhB,GAA0B,KAA1B;MACAgY,QAAQ,CAAC;QACPjX,IAAI,EAAEyZ,aADC;QAEPjX,KAAK,EAAEA,KAFA;QAGP8K,QAAQ,EAAEA;MAHH,CAAD,CAAR;IAKD,CAVD;;IAWA,IAAIiS,eAAe,GAAG,SAASA,eAAT,GAA2B;MAC/CtI,QAAQ,CAAC;QACPjX,IAAI,EAAE6c,SADC;QAEPra,KAAK,EAAEA;MAFA,CAAD,CAAR;IAID,CALD;;IAMA,IAAIif,mBAAmB,GAAG,SAASA,mBAAT,CAA6BC,CAA7B,EAAgC;MACxD,OAAOA,CAAC,CAAC9W,cAAF,EAAP;IACD,CAFD;;IAGA,OAAOnQ,QAAQ,EAAEwU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAC/E,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUyM,QAAV,EAAoB;MACvF,IAAIA,QAAJ,EAAc;QACZsN,QAAQ,CAAC9Z,OAAT,CAAiB0e,UAAU,CAAC1W,SAAX,CAAqBzE,KAArB,CAAjB,IAAgDiJ,QAAhD;MACD;IACF,CAJ8D,CAA9C,EAIbwD,SAAS,CAAC3B,QAAV,GAAqBA,QAJR,EAIkB2B,SAAS,CAACzE,IAAV,GAAiB,QAJnC,EAI6CyE,SAAS,CAAC,eAAD,CAAT,GAA6B,MAAMzM,KAAK,KAAKmc,WAAW,CAAC9W,gBAA5B,CAJ1E,EAIyHoH,SAAS,CAACpI,EAAV,GAAe8W,UAAU,CAAC1W,SAAX,CAAqBzE,KAArB,CAJxI,EAIqKyM,SAJvK,GAImL,CAAC3B,QAAD,KAAcQ,KAAK,GAAG,EAAR,EAAYA,KAAK,CAAC+B,WAAD,CAAL,GAAqB7R,oBAAoB,CAAC8R,kBAAD,EAAqByP,eAArB,CAArD,EAA4FzR,KAA1G,CAJnL,EAIqS;MAClT4B,WAAW,EAAE1R,oBAAoB,CAAC0R,WAAD,EAAc4P,mBAAd,CADiR;MAElT3P,WAAW,EAAE3R,oBAAoB,CAAC2R,WAAD,EAAc8R,mBAAd;IAFiR,CAJrS,EAOZtX,IAPY,CAAf;EAQD,CAjD6B,EAiD3B,CAAC8M,QAAD,EAAW4G,MAAX,EAAmB3E,eAAnB,EAAoCyE,UAApC,CAjD2B,CAA9B;EAkDA,IAAIpR,oBAAoB,GAAGtR,WAAW,CAAC,UAAU4S,MAAV,EAAkB;IACvD,IAAIqR,SAAJ;;IACA,IAAIhQ,KAAK,GAAGrB,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEnB,OAAO,GAAGwC,KAAK,CAACxC,OADlB;;IAEEwC,KAAK,CAACvC,OAAN;;IACA,IAAIwC,YAAY,GAAGD,KAAK,CAAChF,MAAzB;IAAA,IACAA,MAAM,GAAGiF,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAD3C;IAAA,IAEAnQ,GAAG,GAAGkQ,KAAK,CAAClQ,GAFZ;IAAA,IAGAmL,IAAI,GAAG3P,6BAA6B,CAAC0U,KAAD,EAAQgS,UAAR,CAHpC;;IAIF,IAAIvC,WAAW,GAAGd,MAAM,CAAC5e,OAAP,CAAeyB,KAAjC;;IACA,IAAIke,uBAAuB,GAAG,SAASA,uBAAT,GAAmC;MAC/D3H,QAAQ,CAAC;QACPjX,IAAI,EAAE2Z;MADC,CAAD,CAAR;IAGD,CAJD;;IAKA,OAAOlf,QAAQ,EAAEykB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAChV,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUggB,gBAAV,EAA4B;MAC/FvB,eAAe,CAACxe,OAAhB,GAA0B+f,gBAA1B;IACD,CAF8D,CAA9C,EAEbE,SAAS,CAAC,eAAD,CAAT,GAA6BvB,UAAU,CAAC7W,MAF3B,EAEmCoY,SAAS,CAAC,eAAD,CAAT,GAA6BP,WAAW,CAACpf,MAF5E,EAEoF2f,SAAS,CAACrY,EAAV,GAAe8W,UAAU,CAAC7H,cAF9G,EAE8HoJ,SAAS,CAACD,QAAV,GAAqB,CAAC,CAFpJ,EAEuJC,SAFzJ,GAEqK,CAAC/U,IAAI,CAACmD,QAAN,IAAkB7S,QAAQ,CAAC,EAAD,EAAK;MACjNiS,OAAO,EAAE1O,oBAAoB,CAAC0O,OAAD,EAAUkS,uBAAV;IADoL,CAAL,CAF/L,EAIXzU,IAJW,CAAf;EAKD,CApBqC,EAoBnC,CAAC8M,QAAD,EAAW4G,MAAX,EAAmBF,UAAnB,CApBmC,CAAtC;EAqBA,IAAI/P,aAAa,GAAG3S,WAAW,CAAC,UAAU8T,MAAV,EAAkBC,MAAlB,EAA0B;IACxD,IAAI2S,SAAJ;;IACA,IAAIvS,KAAK,GAAGL,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEnC,SAAS,GAAGwC,KAAK,CAACxC,SADpB;IAAA,IAEEnD,QAAQ,GAAG2F,KAAK,CAAC3F,QAFnB;IAAA,IAGEsE,OAAO,GAAGqB,KAAK,CAACrB,OAHlB;IAAA,IAIE6T,OAAO,GAAGxS,KAAK,CAACwS,OAJlB;IAAA,IAKE9U,MAAM,GAAGsC,KAAK,CAACtC,MALjB;;IAMEsC,KAAK,CAACpB,YAAN;;IACA,IAAI6T,YAAY,GAAGzS,KAAK,CAAClF,MAAzB;IAAA,IACAA,MAAM,GAAG2X,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAD3C;IAAA,IAEA7iB,GAAG,GAAGoQ,KAAK,CAACpQ,GAFZ;IAAA,IAGAmL,IAAI,GAAG3P,6BAA6B,CAAC4U,KAAD,EAAQ+R,UAAR,CAHpC;;IAIF,IAAI1R,KAAK,GAAGT,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACE8S,qBAAqB,GAAGrS,KAAK,CAACpF,gBADhC;IAAA,IAEEA,gBAAgB,GAAGyX,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE;;IAGApJ,qBAAqB,CAAC,eAAD,EAAkBrO,gBAAlB,EAAoCH,MAApC,EAA4CmX,QAA5C,CAArB;IACA,IAAI1C,WAAW,GAAGd,MAAM,CAAC5e,OAAP,CAAeyB,KAAjC;;IACA,IAAI2N,kBAAkB,GAAG,SAASA,kBAAT,CAA4BjQ,KAA5B,EAAmC;MAC1D,IAAI6C,GAAG,GAAGG,iBAAiB,CAAChD,KAAD,CAA3B;;MACA,IAAI6C,GAAG,IAAI8K,oBAAoB,CAAC9K,GAAD,CAA/B,EAAsC;QACpC8K,oBAAoB,CAAC9K,GAAD,CAApB,CAA0B7C,KAA1B;MACD;IACF,CALD;;IAMA,IAAIgQ,iBAAiB,GAAG,SAASA,iBAAT,CAA2BhQ,KAA3B,EAAkC;MACxD6Y,QAAQ,CAAC;QACPjX,IAAI,EAAEigB,WADC;QAEP9X,UAAU,EAAE/J,KAAK,CAACuE,MAAN,CAAa6L;MAFlB,CAAD,CAAR;IAID,CALD;;IAMA,IAAIF,eAAe,GAAG,SAASA,eAAT,CAAyBlQ,KAAzB,EAAgC;MACpD;MACA,IAAIugB,WAAW,CAACpf,MAAZ,IAAsB,CAAC0Y,wBAAwB,CAAChZ,OAAzB,CAAiCwO,WAA5D,EAAyE;QACvE,IAAIsU,iBAAiB,GAAG3jB,KAAK,CAAC4jB,aAAN,KAAwB,IAAxB,IAAgCnlB,WAAW,CAACkG,QAAZ,CAAqBC,aAArB,KAAuCnG,WAAW,CAACkG,QAAZ,CAAqB+B,IAApH;QACAmS,QAAQ,CAAC;UACPjX,IAAI,EAAEkgB,SADC;UAEP7X,UAAU,EAAE,CAAC0Z;QAFN,CAAD,CAAR;MAID;IACF,CATD;;IAUA,IAAIE,gBAAgB,GAAG,SAASA,gBAAT,GAA4B;MACjD,IAAI,CAACtD,WAAW,CAACpf,MAAjB,EAAyB;QACvB0X,QAAQ,CAAC;UACPjX,IAAI,EAAEmgB;QADC,CAAD,CAAR;MAGD;IACF,CAND;IAQA;;;IACA,IAAIlS,WAAW,GAAG,UAAlB;IACA,IAAIZ,aAAa,GAAG,EAApB;;IACA,IAAI,CAAClD,IAAI,CAACmD,QAAV,EAAoB;MAClB,IAAIa,cAAJ;;MACAd,aAAa,IAAIc,cAAc,GAAG,EAAjB,EAAqBA,cAAc,CAACF,WAAD,CAAd,GAA8BjQ,oBAAoB,CAACyL,QAAD,EAAWsE,OAAX,EAAoBK,iBAApB,CAAvE,EAA+GD,cAAc,CAACvB,SAAf,GAA2B5O,oBAAoB,CAAC4O,SAAD,EAAYyB,kBAAZ,CAA9J,EAA+LF,cAAc,CAACrB,MAAf,GAAwB9O,oBAAoB,CAAC8O,MAAD,EAASwB,eAAT,CAA3O,EAAsQH,cAAc,CAACyT,OAAf,GAAyB5jB,oBAAoB,CAAC4jB,OAAD,EAAUK,gBAAV,CAAnT,EAAgV9T,cAApV,CAAb;IACD;;IACD,OAAO1T,QAAQ,EAAEknB,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACzX,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUkjB,SAAV,EAAqB;MACxFb,QAAQ,CAACpiB,OAAT,GAAmBijB,SAAnB;IACD,CAF8D,CAA9C,EAEbP,SAAS,CAAC,uBAAD,CAAT,GAAqChD,WAAW,CAACpf,MAAZ,IAAsBof,WAAW,CAAC9W,gBAAZ,GAA+B,CAAC,CAAtD,GAA0D8V,UAAU,CAAC1W,SAAX,CAAqB0X,WAAW,CAAC9W,gBAAjC,CAA1D,GAA+G,EAFvI,EAE2I8Z,SAAS,CAAC,mBAAD,CAAT,GAAiC,MAF5K,EAEoLA,SAAS,CAAC,eAAD,CAAT,GAA6BhE,UAAU,CAAC7W,MAF5N,EAEoO6a,SAAS,CAAC,eAAD,CAAT,GAA6BhD,WAAW,CAACpf,MAF7Q,EAEqRoiB,SAAS,CAAC,iBAAD,CAAT,GAA+BxX,IAAI,IAAIA,IAAI,CAAC,YAAD,CAAZ,GAA6BhJ,SAA7B,GAAyC,KAAKwc,UAAU,CAAC5W,OAF7W,EAEsX4a,SAAS,CAACpT,YAAV,GAAyB,KAF/Y,EAEsZoT,SAAS,CAAC9a,EAAV,GAAe8W,UAAU,CAAC3W,OAFhb,EAEyb2a,SAAS,CAACnX,IAAV,GAAiB,UAF1c,EAEsdmX,SAAS,CAACnT,KAAV,GAAkBmQ,WAAW,CAACxW,UAFpf,EAEggBwZ,SAFlgB,GAE8gBtU,aAF9gB,EAE6hBlD,IAF7hB,CAAf;EAGD,CA1D8B,EA0D5B,CAACuO,qBAAD,EAAwBmF,MAAxB,EAAgCF,UAAhC,EAA4C5R,oBAA5C,EAAkEkL,QAAlE,EAA4EgB,wBAA5E,EAAsGpb,WAAtG,CA1D4B,CAA/B,CAvS8B,CAmW9B;;EACA,IAAIiP,UAAU,GAAG7Q,WAAW,CAAC,YAAY;IACvCgc,QAAQ,CAAC;MACPjX,IAAI,EAAE4Z;IADC,CAAD,CAAR;EAGD,CAJ2B,EAIzB,CAAC3C,QAAD,CAJyB,CAA5B;EAKA,IAAI5G,SAAS,GAAGpV,WAAW,CAAC,YAAY;IACtCgc,QAAQ,CAAC;MACPjX,IAAI,EAAE8Z;IADC,CAAD,CAAR;EAGD,CAJ0B,EAIxB,CAAC7C,QAAD,CAJwB,CAA3B;EAKA,IAAI7G,QAAQ,GAAGnV,WAAW,CAAC,YAAY;IACrCgc,QAAQ,CAAC;MACPjX,IAAI,EAAE6Z;IADC,CAAD,CAAR;EAGD,CAJyB,EAIvB,CAAC5C,QAAD,CAJuB,CAA1B;EAKA,IAAIrP,mBAAmB,GAAG3M,WAAW,CAAC,UAAUkR,mBAAV,EAA+B;IACnE8K,QAAQ,CAAC;MACPjX,IAAI,EAAE+Z,2BADC;MAEPlS,gBAAgB,EAAEsE;IAFX,CAAD,CAAR;EAID,CALoC,EAKlC,CAAC8K,QAAD,CALkC,CAArC;EAMA,IAAI5O,UAAU,GAAGpN,WAAW,CAAC,UAAUkjB,eAAV,EAA2B;IACtDlH,QAAQ,CAAC;MACPjX,IAAI,EAAE8c,kBADC;MAEP5U,YAAY,EAAEiW;IAFP,CAAD,CAAR;EAID,CAL2B,EAKzB,CAAClH,QAAD,CALyB,CAA5B;EAMA,IAAImH,aAAa,GAAGnjB,WAAW,CAAC,UAAUojB,aAAV,EAAyB;IACvDpH,QAAQ,CAAC;MACPjX,IAAI,EAAEga,qBADC;MAEP7R,UAAU,EAAEkW;IAFL,CAAD,CAAR;EAID,CAL8B,EAK5B,CAACpH,QAAD,CAL4B,CAA/B;EAMA,IAAItL,KAAK,GAAG1Q,WAAW,CAAC,YAAY;IAClCgc,QAAQ,CAAC;MACPjX,IAAI,EAAEogB;IADC,CAAD,CAAR;EAGD,CAJsB,EAIpB,CAACnJ,QAAD,CAJoB,CAAvB;EAKA,OAAO;IACL;IACA3H,YAAY,EAAEA,YAFT;IAGL5B,aAAa,EAAEA,aAHV;IAILoB,YAAY,EAAEA,YAJT;IAKLlB,aAAa,EAAEA,aALV;IAMLrB,oBAAoB,EAAEA,oBANjB;IAOL;IACAT,UAAU,EAAEA,UARP;IASLsE,QAAQ,EAAEA,QATL;IAULC,SAAS,EAAEA,SAVN;IAWLzI,mBAAmB,EAAEA,mBAXhB;IAYLwW,aAAa,EAAEA,aAZV;IAaL/V,UAAU,EAAEA,UAbP;IAcLsD,KAAK,EAAEA,KAdF;IAeL;IACA9D,gBAAgB,EAAEA,gBAhBb;IAiBLtI,MAAM,EAAEA,MAjBH;IAkBL2I,YAAY,EAAEA,YAlBT;IAmBLC,UAAU,EAAEA;EAnBP,CAAP;AAqBD;;AAED,IAAIqP,kBAAkB,GAAG;EACvB2K,WAAW,EAAE,CAAC,CADS;EAEvBC,aAAa,EAAE;AAFQ,CAAzB;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASC,eAAT,CAAyBniB,KAAzB,EAAgCsD,OAAhC,EAAyC;EACvC,OAAOiU,iBAAiB,CAACvX,KAAD,EAAQsD,OAAR,EAAiBgU,kBAAjB,CAAxB;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS8K,eAAT,CAAyBpiB,KAAzB,EAAgCsD,OAAhC,EAAyC;EACvC,OAAO+T,iBAAiB,CAACrX,KAAD,EAAQsD,OAAR,EAAiBgU,kBAAjB,CAAxB;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS+K,eAAT,CAAyBriB,KAAzB,EAAgC;EAC9B,IAAIiiB,WAAW,GAAGE,eAAe,CAACniB,KAAD,EAAQ,aAAR,CAAjC;EACA,IAAIkiB,aAAa,GAAGC,eAAe,CAACniB,KAAD,EAAQ,eAAR,CAAnC;EACA,OAAO;IACLiiB,WAAW,EAAEA,WADR;IAELC,aAAa,EAAEA;EAFV,CAAP;AAID;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASI,2BAAT,CAAqCpkB,KAArC,EAA4C;EAC1C,IAAIA,KAAK,CAAC0M,QAAN,IAAkB1M,KAAK,CAACqkB,OAAxB,IAAmCrkB,KAAK,CAACskB,OAAzC,IAAoDtkB,KAAK,CAAC4e,MAA9D,EAAsE;IACpE,OAAO,KAAP;EACD;;EACD,IAAIjd,OAAO,GAAG3B,KAAK,CAACuE,MAApB;;EACA,IAAI5C,OAAO,YAAY4iB,gBAAnB,IACJ;EACA5iB,OAAO,CAACyO,KAAR,KAAkB,EAFd,MAGJ;EACA;EACAzO,OAAO,CAAC6iB,cAAR,KAA2B,CAA3B,IAAgC7iB,OAAO,CAAC8iB,YAAR,KAAyB,CALrD,CAAJ,EAK6D;IAC3D,OAAO,KAAP;EACD;;EACD,OAAO,IAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,qBAAT,CAA+BvN,mBAA/B,EAAoD;EAClD,IAAIwN,mBAAmB,GAAGxN,mBAAmB,CAACwN,mBAA9C;EAAA,IACEvN,iBAAiB,GAAGD,mBAAmB,CAAChN,YAD1C;EAEA,OAAOiN,iBAAiB,CAACuN,mBAAD,CAAjB,GAAyC,oBAAhD;AACD;;AACD,IAAIhP,SAAS,GAAG;EACdqO,aAAa,EAAExnB,SAAS,CAAC8f,KADX;EAEdsI,oBAAoB,EAAEpoB,SAAS,CAAC8f,KAFlB;EAGduI,oBAAoB,EAAEroB,SAAS,CAAC8f,KAHlB;EAIdnS,YAAY,EAAE3N,SAAS,CAACoZ,IAJV;EAKd8O,qBAAqB,EAAEloB,SAAS,CAACoZ,IALnB;EAMd5K,YAAY,EAAExO,SAAS,CAACoZ,IANV;EAOdmO,WAAW,EAAEvnB,SAAS,CAACqZ,MAPT;EAQdiP,kBAAkB,EAAEtoB,SAAS,CAACqZ,MARhB;EASdkP,kBAAkB,EAAEvoB,SAAS,CAACqZ,MAThB;EAUdmP,mBAAmB,EAAExoB,SAAS,CAACoZ,IAVjB;EAWdqP,qBAAqB,EAAEzoB,SAAS,CAACoZ,IAXnB;EAYdsP,iBAAiB,EAAE1oB,SAAS,CAACwZ,MAZf;EAadmP,qBAAqB,EAAE3oB,SAAS,CAACwZ,MAbnB;EAcdvX,WAAW,EAAEjC,SAAS,CAACyZ,KAAV,CAAgB;IAC3B5B,gBAAgB,EAAE7X,SAAS,CAACoZ,IADD;IAE3BrB,mBAAmB,EAAE/X,SAAS,CAACoZ,IAFJ;IAG3BjR,QAAQ,EAAEnI,SAAS,CAACyZ,KAAV,CAAgB;MACxBpQ,cAAc,EAAErJ,SAAS,CAACoZ,IADF;MAExBhR,aAAa,EAAEpI,SAAS,CAACuZ,GAFD;MAGxBrP,IAAI,EAAElK,SAAS,CAACuZ;IAHQ,CAAhB;EAHiB,CAAhB;AAdC,CAAhB;AAwBA,IAAIT,YAAY,GAAG;EACjBnL,YAAY,EAAE+O,cAAc,CAAC/O,YADZ;EAEjBa,YAAY,EAAEkO,cAAc,CAAClO,YAFZ;EAGjBvM,WAAW,EAAEya,cAAc,CAACza,WAHX;EAIjBimB,qBAAqB,EAAEA,qBAJN;EAKjBQ,iBAAiB,EAAE,YALF;EAMjBC,qBAAqB,EAAE;AANN,CAAnB,C,CASA;;AACA,IAAI1C,iBAAiB,GAAGllB,IAAxB;AACA;;AACA,IAAIuH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;EACzCyd,iBAAiB,GAAG,SAASA,iBAAT,CAA2B3F,OAA3B,EAAoCC,MAApC,EAA4C;IAC9DvgB,SAAS,CAACwgB,cAAV,CAAyBrH,SAAzB,EAAoCmH,OAApC,EAA6C,MAA7C,EAAqDC,MAAM,CAACE,IAA5D;EACD,CAFD;AAGD;;AAED,IAAImI,iBAAiB,GAAGtgB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,yBAAxC,GAAoE,CAA5F;AACA,IAAIqgB,yBAAyB,GAAGvgB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,kCAAxC,GAA6E,CAA7G;AACA,IAAIsgB,4BAA4B,GAAGxgB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,qCAAxC,GAAgF,CAAnH;AACA,IAAIugB,iCAAiC,GAAGzgB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,2CAAxC,GAAsF,CAA9H;AACA,IAAIwgB,qCAAqC,GAAG1gB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+CAAxC,GAA0F,CAAtI;AACA,IAAIygB,iCAAiC,GAAG3gB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,0CAAxC,GAAqF,CAA7H;AACA,IAAI0gB,wBAAwB,GAAG5gB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAA1G;AACA,IAAI2gB,aAAa,GAAG7gB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,CAAnF;AACA,IAAI4gB,uBAAuB,GAAG9gB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,gCAAxC,GAA2E,CAAzG;AACA,IAAI6gB,0BAA0B,GAAG/gB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,mCAAxC,GAA8E,CAA/G;AACA,IAAI8gB,wBAAwB,GAAGhhB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,iCAAxC,GAA4E,EAA3G;AACA,IAAI+gB,sBAAsB,GAAGjhB,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,+BAAxC,GAA0E,EAAvG;AACA,IAAI6W,aAAa,GAAG/W,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC,oBAAxC,GAA+D,EAAnF;AAEA,IAAI0Q,gBAAgB,GAAG,aAAajT,MAAM,CAACqF,MAAP,CAAc;EAChDC,SAAS,EAAE,IADqC;EAEhDqd,iBAAiB,EAAEA,iBAF6B;EAGhDC,yBAAyB,EAAEA,yBAHqB;EAIhDC,4BAA4B,EAAEA,4BAJkB;EAKhDC,iCAAiC,EAAEA,iCALa;EAMhDC,qCAAqC,EAAEA,qCANS;EAOhDC,iCAAiC,EAAEA,iCAPa;EAQhDC,wBAAwB,EAAEA,wBARsB;EAShDC,aAAa,EAAEA,aATiC;EAUhDC,uBAAuB,EAAEA,uBAVuB;EAWhDC,0BAA0B,EAAEA,0BAXoB;EAYhDC,wBAAwB,EAAEA,wBAZsB;EAahDC,sBAAsB,EAAEA,sBAbwB;EAchDlK,aAAa,EAAEA;AAdiC,CAAd,CAApC;AAiBA;;AACA,SAASmK,iCAAT,CAA2C1jB,KAA3C,EAAkDoU,MAAlD,EAA0D;EACxD,IAAI9U,IAAI,GAAG8U,MAAM,CAAC9U,IAAlB;EAAA,IACEwC,KAAK,GAAGsS,MAAM,CAACtS,KADjB;EAAA,IAEEtC,KAAK,GAAG4U,MAAM,CAAC5U,KAFjB;EAAA,IAGEgI,YAAY,GAAG4M,MAAM,CAAC5M,YAHxB;EAIA,IAAIia,WAAW,GAAGzhB,KAAK,CAACyhB,WAAxB;EAAA,IACEC,aAAa,GAAG1hB,KAAK,CAAC0hB,aADxB;EAEA,IAAIpN,OAAJ;;EACA,QAAQhV,IAAR;IACE,KAAKwjB,iBAAL;MACExO,OAAO,GAAG;QACRmN,WAAW,EAAE3f;MADL,CAAV;MAGA;;IACF,KAAKohB,qCAAL;MACE5O,OAAO,GAAG;QACRmN,WAAW,EAAEA,WAAW,GAAG,CAAd,GAAkB,CAAlB,GAAsB,CAAtB,GAA0BA,WAAW,GAAG;MAD7C,CAAV;MAGA;;IACF,KAAKwB,iCAAL;MACE3O,OAAO,GAAG;QACRmN,WAAW,EAAEA,WAAW,GAAG,CAAd,IAAmBC,aAAa,CAAC1kB,MAAjC,GAA0C,CAAC,CAA3C,GAA+CykB,WAAW,GAAG;MADlE,CAAV;MAGA;;IACF,KAAKuB,4BAAL;IACA,KAAKD,yBAAL;MACE;QACE,IAAItB,WAAW,GAAG,CAAlB,EAAqB;UACnB;QACD;;QACD,IAAIkC,cAAc,GAAGlC,WAArB;;QACA,IAAIC,aAAa,CAAC1kB,MAAd,KAAyB,CAA7B,EAAgC;UAC9B2mB,cAAc,GAAG,CAAC,CAAlB;QACD,CAFD,MAEO,IAAIlC,WAAW,KAAKC,aAAa,CAAC1kB,MAAd,GAAuB,CAA3C,EAA8C;UACnD2mB,cAAc,GAAGjC,aAAa,CAAC1kB,MAAd,GAAuB,CAAxC;QACD;;QACDsX,OAAO,GAAGva,QAAQ,CAAC;UACjB2nB,aAAa,EAAE,GAAG5jB,MAAH,CAAU4jB,aAAa,CAAC9L,KAAd,CAAoB,CAApB,EAAuB6L,WAAvB,CAAV,EAA+CC,aAAa,CAAC9L,KAAd,CAAoB6L,WAAW,GAAG,CAAlC,CAA/C;QADE,CAAD,EAEf;UACDA,WAAW,EAAEkC;QADZ,CAFe,CAAlB;QAKA;MACD;;IACH,KAAKR,iCAAL;MACE7O,OAAO,GAAG;QACRmN,WAAW,EAAEC,aAAa,CAAC1kB,MAAd,GAAuB;MAD5B,CAAV;MAGA;;IACF,KAAKomB,wBAAL;MACE9O,OAAO,GAAG;QACRoN,aAAa,EAAEA,aAAa,CAAC9L,KAAd,CAAoB,CAApB,EAAuB8L,aAAa,CAAC1kB,MAAd,GAAuB,CAA9C;MADP,CAAV;MAGA;;IACF,KAAKsmB,uBAAL;MACEhP,OAAO,GAAG;QACRoN,aAAa,EAAE,GAAG5jB,MAAH,CAAU4jB,aAAV,EAAyB,CAACla,YAAD,CAAzB;MADP,CAAV;MAGA;;IACF,KAAK6b,aAAL;MACE/O,OAAO,GAAG;QACRmN,WAAW,EAAE,CAAC;MADN,CAAV;MAGA;;IACF,KAAK8B,0BAAL;MACE;QACE,IAAIK,eAAe,GAAGnC,WAAtB;QACA,IAAIoC,iBAAiB,GAAGnC,aAAa,CAAC9gB,OAAd,CAAsB4G,YAAtB,CAAxB;;QACA,IAAIqc,iBAAiB,GAAG,CAAxB,EAA2B;UACzB;QACD;;QACD,IAAInC,aAAa,CAAC1kB,MAAd,KAAyB,CAA7B,EAAgC;UAC9B4mB,eAAe,GAAG,CAAC,CAAnB;QACD,CAFD,MAEO,IAAIC,iBAAiB,KAAKnC,aAAa,CAAC1kB,MAAd,GAAuB,CAAjD,EAAoD;UACzD4mB,eAAe,GAAGlC,aAAa,CAAC1kB,MAAd,GAAuB,CAAzC;QACD;;QACDsX,OAAO,GAAG;UACRoN,aAAa,EAAE,GAAG5jB,MAAH,CAAU4jB,aAAa,CAAC9L,KAAd,CAAoB,CAApB,EAAuBiO,iBAAvB,CAAV,EAAqDnC,aAAa,CAAC9L,KAAd,CAAoBiO,iBAAiB,GAAG,CAAxC,CAArD,CADP;UAERpC,WAAW,EAAEmC;QAFL,CAAV;QAIA;MACD;;IACH,KAAKJ,wBAAL;MACE;QACE,IAAIM,gBAAgB,GAAG1P,MAAM,CAACsN,aAA9B;QACApN,OAAO,GAAG;UACRoN,aAAa,EAAEoC;QADP,CAAV;QAGA;MACD;;IACH,KAAKL,sBAAL;MACE;QACE,IAAIM,gBAAgB,GAAG3P,MAAM,CAACqN,WAA9B;QACAnN,OAAO,GAAG;UACRmN,WAAW,EAAEsC;QADL,CAAV;QAGA;MACD;;IACH,KAAKxK,aAAL;MACEjF,OAAO,GAAG;QACRmN,WAAW,EAAEG,eAAe,CAACpiB,KAAD,EAAQ,aAAR,CADpB;QAERkiB,aAAa,EAAEE,eAAe,CAACpiB,KAAD,EAAQ,eAAR;MAFtB,CAAV;MAIA;;IACF;MACE,MAAM,IAAIuT,KAAJ,CAAU,4CAAV,CAAN;EAhGJ;;EAkGA,OAAOhZ,QAAQ,CAAC,EAAD,EAAKiG,KAAL,EAAYsU,OAAZ,CAAf;AACD;;AAED,IAAI0P,SAAS,GAAG,CAAC,QAAD,EAAW,KAAX,EAAkB,SAAlB,EAA6B,WAA7B,EAA0C,cAA1C,EAA0D,OAA1D,CAAhB;AAAA,IACEC,UAAU,GAAG,CAAC,QAAD,EAAW,KAAX,EAAkB,WAAlB,EAA+B,SAA/B,EAA0C,kBAA1C,CADf;AAEAC,oBAAoB,CAAC9Q,gBAArB,GAAwCA,gBAAxC;;AACA,SAAS8Q,oBAAT,CAA8BrH,SAA9B,EAAyC;EACvC,IAAIA,SAAS,KAAK,KAAK,CAAvB,EAA0B;IACxBA,SAAS,GAAG,EAAZ;EACD;;EACDsD,iBAAiB,CAACtD,SAAD,EAAYqH,oBAAZ,CAAjB,CAJuC,CAKvC;;EACA,IAAI1kB,KAAK,GAAGzF,QAAQ,CAAC,EAAD,EAAKiZ,YAAL,EAAmB6J,SAAnB,CAApB;;EACA,IAAIuF,qBAAqB,GAAG5iB,KAAK,CAAC4iB,qBAAlC;EAAA,IACEva,YAAY,GAAGrI,KAAK,CAACqI,YADvB;EAAA,IAEE1L,WAAW,GAAGqD,KAAK,CAACrD,WAFtB;EAAA,IAGEymB,iBAAiB,GAAGpjB,KAAK,CAACojB,iBAH5B;EAAA,IAIEC,qBAAqB,GAAGrjB,KAAK,CAACqjB,qBAJhC,CAPuC,CAavC;;EACA,IAAI/F,qBAAqB,GAAGpG,sBAAsB,CAACgN,iCAAD,EAAoC7B,eAAe,CAACriB,KAAD,CAAnD,EAA4DA,KAA5D,CAAlD;EAAA,IACEQ,KAAK,GAAG8c,qBAAqB,CAAC,CAAD,CAD/B;EAAA,IAEEvG,QAAQ,GAAGuG,qBAAqB,CAAC,CAAD,CAFlC;;EAGA,IAAI2E,WAAW,GAAGzhB,KAAK,CAACyhB,WAAxB;EAAA,IACEC,aAAa,GAAG1hB,KAAK,CAAC0hB,aADxB,CAjBuC,CAoBvC;;EACA,IAAIhK,iBAAiB,GAAGrd,MAAM,CAAC,IAAD,CAA9B;EACA,IAAI8pB,WAAW,GAAG9pB,MAAM,CAAC,IAAD,CAAxB;EACA,IAAI+pB,wBAAwB,GAAG/pB,MAAM,CAACqnB,aAAD,CAArC;EACA,IAAI2C,gBAAgB,GAAGhqB,MAAM,EAA7B;EACAgqB,gBAAgB,CAAC9lB,OAAjB,GAA2B,EAA3B;EACA,IAAI4e,MAAM,GAAGrH,YAAY,CAAC;IACxB9V,KAAK,EAAEA,KADiB;IAExBR,KAAK,EAAEA;EAFiB,CAAD,CAAzB,CA1BuC,CA+BvC;;EACA;;EACAlF,SAAS,CAAC,YAAY;IACpB,IAAIod,iBAAiB,CAACnZ,OAAlB,IAA6B,KAAjC,EAAwC;MACtC;IACD;;IACD,IAAImjB,aAAa,CAAC1kB,MAAd,GAAuBonB,wBAAwB,CAAC7lB,OAAzB,CAAiCvB,MAA5D,EAAoE;MAClE,IAAIqlB,mBAAmB,GAAG+B,wBAAwB,CAAC7lB,OAAzB,CAAiC+lB,IAAjC,CAAsC,UAAU1c,IAAV,EAAgB;QAC9E,OAAO8Z,aAAa,CAAC9gB,OAAd,CAAsBgH,IAAtB,IAA8B,CAArC;MACD,CAFyB,CAA1B;MAGAzE,SAAS,CAACif,qBAAqB,CAAC;QAC9Bva,YAAY,EAAEA,YADgB;QAE9B/I,WAAW,EAAE4iB,aAAa,CAAC1kB,MAFG;QAG9BqlB,mBAAmB,EAAEA,mBAHS;QAI9BZ,WAAW,EAAEA,WAJiB;QAK9B8C,kBAAkB,EAAE7C,aAAa,CAACD,WAAD;MALH,CAAD,CAAtB,EAMLtlB,WAAW,CAACkG,QANP,CAAT;IAOD;;IACD+hB,wBAAwB,CAAC7lB,OAAzB,GAAmCmjB,aAAnC,CAhBoB,CAkBpB;EACD,CAnBQ,EAmBN,CAACA,aAAa,CAAC1kB,MAAf,CAnBM,CAAT,CAjCuC,CAqDvC;;EACA1C,SAAS,CAAC,YAAY;IACpB,IAAIod,iBAAiB,CAACnZ,OAAtB,EAA+B;MAC7B;IACD;;IACD,IAAIkjB,WAAW,KAAK,CAAC,CAAjB,IAAsB0C,WAAW,CAAC5lB,OAAtC,EAA+C;MAC7C4lB,WAAW,CAAC5lB,OAAZ,CAAoBsO,KAApB;IACD,CAFD,MAEO,IAAIwX,gBAAgB,CAAC9lB,OAAjB,CAAyBkjB,WAAzB,CAAJ,EAA2C;MAChD4C,gBAAgB,CAAC9lB,OAAjB,CAAyBkjB,WAAzB,EAAsC5U,KAAtC;IACD;EACF,CATQ,EASN,CAAC4U,WAAD,CATM,CAAT;EAUAhJ,wBAAwB,CAAC;IACvBN,cAAc,EAAET,iBAAiB,CAACnZ,OADX;IAEvBiB,KAAK,EAAEA,KAFgB;IAGvBQ,KAAK,EAAEA;EAHgB,CAAD,CAAxB;EAKA,IAAIgY,qBAAqB,GAAGP,2BAA2B,CAAC,kBAAD,CAAvD,CArEuC,CAsEvC;;EACAnd,SAAS,CAAC,YAAY;IACpBod,iBAAiB,CAACnZ,OAAlB,GAA4B,KAA5B;IACA,OAAO,YAAY;MACjBmZ,iBAAiB,CAACnZ,OAAlB,GAA4B,IAA5B;IACD,CAFD;EAGD,CALQ,EAKN,EALM,CAAT,CAvEuC,CA8EvC;;EACA,IAAIimB,2BAA2B,GAAG9pB,OAAO,CAAC,YAAY;IACpD,IAAIgB,IAAJ;;IACA,OAAOA,IAAI,GAAG,EAAP,EAAWA,IAAI,CAACmnB,qBAAD,CAAJ,GAA8B,YAAY;MAC1DtM,QAAQ,CAAC;QACPjX,IAAI,EAAE4jB;MADC,CAAD,CAAR;IAGD,CAJM,EAIJxnB,IAAI,CAACknB,iBAAD,CAAJ,GAA0B,YAAY;MACvCrM,QAAQ,CAAC;QACPjX,IAAI,EAAE2jB;MADC,CAAD,CAAR;IAGD,CARM,EAQJvnB,IAAI,CAAC+oB,MAAL,GAAc,SAASA,MAAT,GAAkB;MACjClO,QAAQ,CAAC;QACPjX,IAAI,EAAEyjB;MADC,CAAD,CAAR;IAGD,CAZM,EAYJrnB,IAAI,CAACgpB,SAAL,GAAiB,SAASA,SAAT,GAAqB;MACvCnO,QAAQ,CAAC;QACPjX,IAAI,EAAE0jB;MADC,CAAD,CAAR;IAGD,CAhBM,EAgBJtnB,IAhBH;EAiBD,CAnBwC,EAmBtC,CAAC6a,QAAD,EAAWqM,iBAAX,EAA8BC,qBAA9B,CAnBsC,CAAzC;EAoBA,IAAI8B,uBAAuB,GAAGjqB,OAAO,CAAC,YAAY;IAChD,IAAIkE,KAAJ;;IACA,OAAOA,KAAK,GAAG,EAAR,EAAYA,KAAK,CAACikB,qBAAD,CAAL,GAA+B,UAAUnlB,KAAV,EAAiB;MACjE,IAAIokB,2BAA2B,CAACpkB,KAAD,CAA/B,EAAwC;QACtC6Y,QAAQ,CAAC;UACPjX,IAAI,EAAE6jB;QADC,CAAD,CAAR;MAGD;IACF,CANM,EAMJvkB,KAAK,CAAC8lB,SAAN,GAAkB,SAASA,SAAT,CAAmBhnB,KAAnB,EAA0B;MAC7C,IAAIokB,2BAA2B,CAACpkB,KAAD,CAA/B,EAAwC;QACtC6Y,QAAQ,CAAC;UACPjX,IAAI,EAAE8jB;QADC,CAAD,CAAR;MAGD;IACF,CAZM,EAYJxkB,KAZH;EAaD,CAfoC,EAelC,CAAC2X,QAAD,EAAWsM,qBAAX,CAfkC,CAArC,CAnGuC,CAoHvC;;EACA,IAAI+B,oBAAoB,GAAGrqB,WAAW,CAAC,UAAU6O,KAAV,EAAiB;IACtD,IAAIE,SAAJ;;IACA,IAAIyC,KAAK,GAAG3C,KAAK,KAAK,KAAK,CAAf,GAAmB,EAAnB,GAAwBA,KAApC;IAAA,IACE2U,YAAY,GAAGhS,KAAK,CAACvC,MADvB;IAAA,IAEEA,MAAM,GAAGuU,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF7C;IAAA,IAGEzf,GAAG,GAAGyN,KAAK,CAACzN,GAHd;IAAA,IAIE0N,OAAO,GAAGD,KAAK,CAACC,OAJlB;IAAA,IAKEE,SAAS,GAAGH,KAAK,CAACG,SALpB;IAAA,IAME2Y,gBAAgB,GAAG9Y,KAAK,CAACvE,YAN3B;IAAA,IAOEgO,SAAS,GAAGzJ,KAAK,CAACjK,KAPpB;IAAA,IAQE2H,IAAI,GAAG3P,6BAA6B,CAACiS,KAAD,EAAQiY,SAAR,CARtC;;IASA,IAAI/F,WAAW,GAAGd,MAAM,CAAC5e,OAAP,CAAeyB,KAAjC;;IACA,IAAI2e,gBAAgB,GAAGrJ,eAAe,CAACuP,gBAAD,EAAmBrP,SAAnB,EAA8ByI,WAAW,CAACyD,aAA1C,EAAyD,oDAAzD,CAAtC;IAAA,IACE5f,KAAK,GAAG6c,gBAAgB,CAAC,CAAD,CAD1B;;IAEA,IAAImG,WAAW,GAAGhjB,KAAK,GAAG,CAAC,CAAT,IAAcA,KAAK,KAAKmc,WAAW,CAACwD,WAAtD;;IACA,IAAIsD,uBAAuB,GAAG,SAASA,uBAAT,GAAmC;MAC/DxO,QAAQ,CAAC;QACPjX,IAAI,EAAEwjB,iBADC;QAEPhhB,KAAK,EAAEA;MAFA,CAAD,CAAR;IAID,CALD;;IAMA,IAAIkjB,yBAAyB,GAAG,SAASA,yBAAT,CAAmCtnB,KAAnC,EAA0C;MACxE,IAAI6C,GAAG,GAAGG,iBAAiB,CAAChD,KAAD,CAA3B;;MACA,IAAI6C,GAAG,IAAIikB,2BAA2B,CAACjkB,GAAD,CAAtC,EAA6C;QAC3CikB,2BAA2B,CAACjkB,GAAD,CAA3B,CAAiC7C,KAAjC;MACD;IACF,CALD;;IAMA,OAAO3D,QAAQ,EAAEuP,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAACE,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAU2mB,gBAAV,EAA4B;MAC/F,IAAIA,gBAAJ,EAAsB;QACpBZ,gBAAgB,CAAC9lB,OAAjB,CAAyBuI,IAAzB,CAA8Bme,gBAA9B;MACD;IACF,CAJ8D,CAA9C,EAIb3b,SAAS,CAACiV,QAAV,GAAqBuG,WAAW,GAAG,CAAH,GAAO,CAAC,CAJ3B,EAI8Bxb,SAAS,CAAC0C,OAAV,GAAoB1O,oBAAoB,CAAC0O,OAAD,EAAU+Y,uBAAV,CAJtE,EAI0Gzb,SAAS,CAAC4C,SAAV,GAAsB5O,oBAAoB,CAAC4O,SAAD,EAAY8Y,yBAAZ,CAJpJ,EAI4L1b,SAJ9L,GAI0MG,IAJ1M,CAAf;EAKD,CAhCqC,EAgCnC,CAAC8M,QAAD,EAAW4G,MAAX,EAAmBqH,2BAAnB,CAhCmC,CAAtC;EAiCA,IAAIU,gBAAgB,GAAG3qB,WAAW,CAAC,UAAU8O,MAAV,EAAkByC,MAAlB,EAA0B;IAC3D,IAAIyC,SAAJ;;IACA,IAAInB,KAAK,GAAG/D,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACE8b,YAAY,GAAG/X,KAAK,CAAC5D,MADvB;IAAA,IAEEA,MAAM,GAAG2b,YAAY,KAAK,KAAK,CAAtB,GAA0B,KAA1B,GAAkCA,YAF7C;IAAA,IAGE7mB,GAAG,GAAG8O,KAAK,CAAC9O,GAHd;IAAA,IAIE4N,SAAS,GAAGkB,KAAK,CAAClB,SAJpB;IAAA,IAKEF,OAAO,GAAGoB,KAAK,CAACpB,OALlB;IAAA,IAMEoZ,qBAAqB,GAAGhY,KAAK,CAACiY,gBANhC;IAAA,IAOEA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAPhE;IAAA,IAQE3b,IAAI,GAAG3P,6BAA6B,CAACsT,KAAD,EAAQ6W,UAAR,CARtC;;IASA,IAAIzV,KAAK,GAAG1C,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAArC;IAAA,IACEwZ,qBAAqB,GAAG9W,KAAK,CAAC7E,gBADhC;IAAA,IAEEA,gBAAgB,GAAG2b,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,KAAnC,GAA2CA,qBAFhE;;IAGAtN,qBAAqB,CAAC,kBAAD,EAAqBrO,gBAArB,EAAuCH,MAAvC,EAA+C2a,WAA/C,CAArB;;IACA,IAAIoB,qBAAqB,GAAG,SAASA,qBAAT,CAA+B7nB,KAA/B,EAAsC;MAChE,IAAI6C,GAAG,GAAGG,iBAAiB,CAAChD,KAAD,CAA3B;;MACA,IAAI6C,GAAG,IAAIokB,uBAAuB,CAACpkB,GAAD,CAAlC,EAAyC;QACvCokB,uBAAuB,CAACpkB,GAAD,CAAvB,CAA6B7C,KAA7B;MACD;IACF,CALD;;IAMA,IAAI8nB,mBAAmB,GAAG,SAASA,mBAAT,GAA+B;MACvDjP,QAAQ,CAAC;QACPjX,IAAI,EAAE+jB;MADC,CAAD,CAAR;IAGD,CAJD;;IAKA,OAAOtpB,QAAQ,EAAEwU,SAAS,GAAG,EAAZ,EAAgBA,SAAS,CAAC/E,MAAD,CAAT,GAAoBtL,UAAU,CAACI,GAAD,EAAM,UAAUmnB,YAAV,EAAwB;MAC3F,IAAIA,YAAJ,EAAkB;QAChBtB,WAAW,CAAC5lB,OAAZ,GAAsBknB,YAAtB;MACD;IACF,CAJ8D,CAA9C,EAIblX,SAJW,GAIC,CAAC8W,gBAAD,IAAqB;MACnCnZ,SAAS,EAAE5O,oBAAoB,CAAC4O,SAAD,EAAYqZ,qBAAZ,CADI;MAEnCvZ,OAAO,EAAE1O,oBAAoB,CAAC0O,OAAD,EAAUwZ,mBAAV;IAFM,CAJtB,EAOZ/b,IAPY,CAAf;EAQD,CAlCiC,EAkC/B,CAAC8M,QAAD,EAAWoO,uBAAX,EAAoC3M,qBAApC,CAlC+B,CAAlC,CAtJuC,CA0LvC;;EACA,IAAI0N,eAAe,GAAGnrB,WAAW,CAAC,UAAUiN,YAAV,EAAwB;IACxD+O,QAAQ,CAAC;MACPjX,IAAI,EAAEgkB,uBADC;MAEP9b,YAAY,EAAEA;IAFP,CAAD,CAAR;EAID,CALgC,EAK9B,CAAC+O,QAAD,CAL8B,CAAjC;EAMA,IAAIoP,kBAAkB,GAAGprB,WAAW,CAAC,UAAUiN,YAAV,EAAwB;IAC3D+O,QAAQ,CAAC;MACPjX,IAAI,EAAEikB,0BADC;MAEP/b,YAAY,EAAEA;IAFP,CAAD,CAAR;EAID,CALmC,EAKjC,CAAC+O,QAAD,CALiC,CAApC;EAMA,IAAIqP,gBAAgB,GAAGrrB,WAAW,CAAC,UAAUupB,gBAAV,EAA4B;IAC7DvN,QAAQ,CAAC;MACPjX,IAAI,EAAEkkB,wBADC;MAEP9B,aAAa,EAAEoC;IAFR,CAAD,CAAR;EAID,CALiC,EAK/B,CAACvN,QAAD,CAL+B,CAAlC;EAMA,IAAIsP,cAAc,GAAGtrB,WAAW,CAAC,UAAUopB,cAAV,EAA0B;IACzDpN,QAAQ,CAAC;MACPjX,IAAI,EAAEmkB,sBADC;MAEPhC,WAAW,EAAEkC;IAFN,CAAD,CAAR;EAID,CAL+B,EAK7B,CAACpN,QAAD,CAL6B,CAAhC;EAMA,IAAItL,KAAK,GAAG1Q,WAAW,CAAC,YAAY;IAClCgc,QAAQ,CAAC;MACPjX,IAAI,EAAEia;IADC,CAAD,CAAR;EAGD,CAJsB,EAIpB,CAAChD,QAAD,CAJoB,CAAvB;EAKA,OAAO;IACLqO,oBAAoB,EAAEA,oBADjB;IAELM,gBAAgB,EAAEA,gBAFb;IAGLQ,eAAe,EAAEA,eAHZ;IAILC,kBAAkB,EAAEA,kBAJf;IAKLC,gBAAgB,EAAEA,gBALb;IAMLC,cAAc,EAAEA,cANX;IAOL5a,KAAK,EAAEA,KAPF;IAQLyW,aAAa,EAAEA,aARV;IASLD,WAAW,EAAEA;EATR,CAAP;AAWD;;AAED,SAAS7N,WAAW,IAAIkS,OAAxB,EAAiCpnB,cAAjC,EAAiDgiB,WAAjD,EAA8DwD,oBAA9D,EAAoFtH,SAApF"},"metadata":{},"sourceType":"module"}